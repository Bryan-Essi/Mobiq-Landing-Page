{"version":3,"file":"static/js/447.a011189e.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/circle-check-big.ts","utils/deviceSelection.ts","components/Layout.tsx","../node_modules/lucide-react/src/icons/chevron-down.ts","../node_modules/lucide-react/src/icons/plus.ts","../node_modules/lucide-react/src/icons/settings.ts","../node_modules/lucide-react/src/icons/clock.ts","../node_modules/lucide-react/src/icons/copy.ts","../node_modules/lucide-react/src/icons/pause.ts","../node_modules/lucide-react/src/icons/circle-stop.ts","../node_modules/lucide-react/src/icons/square-pen.ts","../node_modules/lucide-react/src/icons/trash-2.ts","../node_modules/lucide-react/src/icons/arrow-up.ts","../node_modules/lucide-react/src/icons/arrow-down.ts","../node_modules/lucide-react/src/icons/x.ts","pages/FlowComposer.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21.801 10A10 10 0 1 1 17 3.335', key: 'yps3ct' }],\n  ['path', { d: 'm9 11 3 3L22 4', key: '1pflzl' }],\n];\n\n/**\n * @component @name CircleCheckBig\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuODAxIDEwQTEwIDEwIDAgMSAxIDE3IDMuMzM1IiAvPgogIDxwYXRoIGQ9Im05IDExIDMgM0wyMiA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/circle-check-big\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleCheckBig = createLucideIcon('circle-check-big', __iconNode);\n\nexport default CircleCheckBig;\n","export const SELECTED_DEVICES_STORAGE_KEY = 'selectedDeviceIds';\nconst LEGACY_SELECTED_DEVICE_KEY = 'selectedDeviceId';\nexport const SELECTED_DEVICES_EVENT = 'selected-devices:updated';\n\nconst normalizeIds = (value: unknown): string[] => {\n  if (!value) {\n    return [];\n  }\n  if (Array.isArray(value)) {\n    return value.filter((id): id is string => typeof id === 'string' && id.trim().length > 0);\n  }\n  if (typeof value === 'string') {\n    try {\n      const parsed = JSON.parse(value);\n      if (Array.isArray(parsed)) {\n        return normalizeIds(parsed);\n      }\n    } catch {\n      const trimmed = value.trim();\n      if (trimmed.length > 0) {\n        return [trimmed];\n      }\n    }\n  }\n  return [];\n};\n\nexport const readSelectedDeviceIds = (): string[] => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return [];\n  }\n  try {\n    const stored = window.localStorage.getItem(SELECTED_DEVICES_STORAGE_KEY);\n    const ids = normalizeIds(stored);\n    if (ids.length > 0) {\n      return Array.from(new Set(ids));\n    }\n    const legacy = window.localStorage.getItem(LEGACY_SELECTED_DEVICE_KEY);\n    const legacyIds = normalizeIds(legacy);\n    if (legacyIds.length > 0) {\n      writeSelectedDeviceIds(legacyIds);\n      window.localStorage.removeItem(LEGACY_SELECTED_DEVICE_KEY);\n      return legacyIds;\n    }\n  } catch (error) {\n    console.warn('[deviceSelection] Failed to read selected devices', error);\n  }\n  return [];\n};\n\nexport const writeSelectedDeviceIds = (ids: string[]) => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return;\n  }\n  try {\n    const uniqueIds = Array.from(new Set(ids.filter((id) => typeof id === 'string' && id.trim().length > 0)));\n    window.localStorage.setItem(SELECTED_DEVICES_STORAGE_KEY, JSON.stringify(uniqueIds));\n    window.dispatchEvent(new CustomEvent(SELECTED_DEVICES_EVENT, { detail: uniqueIds }));\n  } catch (error) {\n    console.warn('[deviceSelection] Failed to persist selected devices', error);\n  }\n};\n\nexport const clearSelectedDeviceIds = () => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return;\n  }\n  try {\n    window.localStorage.removeItem(SELECTED_DEVICES_STORAGE_KEY);\n    window.dispatchEvent(new CustomEvent(SELECTED_DEVICES_EVENT, { detail: [] }));\n  } catch (error) {\n    console.warn('[deviceSelection] Failed to clear selected devices', error);\n  }\n};\n\nexport const toggleSelectedDeviceId = (ids: string[], deviceId: string): string[] => {\n  const set = new Set(ids);\n  if (set.has(deviceId)) {\n    set.delete(deviceId);\n  } else {\n    set.add(deviceId);\n  }\n  return Array.from(set);\n};\n","import React, { useEffect, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Box, Typography, Chip, IconButton, Menu, MenuItem } from '@mui/material';\nimport { Grid3X3, Smartphone, Zap, Puzzle, Info, ChevronLeft, ChevronRight } from 'lucide-react';\n\ninterface LayoutProps {\n  children: React.ReactNode;\n}\n\ntype AppMenuAction = 'about' | 'faq' | 'updates' | 'manual';\n\nconst Layout: React.FC<LayoutProps> = ({ children }) => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [appMenuAnchor, setAppMenuAnchor] = useState<null | HTMLElement>(null);\n  const [historyIndex, setHistoryIndex] = useState(() => {\n    if (typeof window === 'undefined') {\n      return 0;\n    }\n    return window.history.state?.idx ?? 0;\n  });\n  const [historyLength, setHistoryLength] = useState(() => (typeof window === 'undefined' ? 0 : window.history.length));\n\n  useEffect(() => {\n    if (typeof window === 'undefined') {\n      return;\n    }\n    setHistoryIndex(window.history.state?.idx ?? 0);\n    setHistoryLength(window.history.length);\n  }, [location]);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') {\n      return;\n    }\n    const handlePopState = () => {\n      setHistoryIndex(window.history.state?.idx ?? 0);\n      setHistoryLength(window.history.length);\n    };\n    window.addEventListener('popstate', handlePopState);\n    return () => {\n      window.removeEventListener('popstate', handlePopState);\n    };\n  }, []);\n\n  const canGoBack = historyIndex > 0;\n  const canGoForward = historyIndex < historyLength - 1;\n\n  const handleOpenMenu = (event: React.MouseEvent<HTMLElement>) => setAppMenuAnchor(event.currentTarget);\n  const handleCloseMenu = () => setAppMenuAnchor(null);\n  const handleMenuClick = (action: AppMenuAction) => {\n    handleCloseMenu();\n    if (action === 'about') {\n      window.alert(\n        'MOBIQ v1.0\\n\\nUnified console for mobile automation.\\n Bundled FastAPI backend + React dashboard + Electron shell\\n Live device telemetry and diagnostics\\n One-click telco modules and workflow composer\\n Offline Windows installer built with PyInstaller\\n\\nBuild: v1.0.0 (Electron 28  React 18  Python 3.12)'\n      );\n      return;\n    }\n\n    const links: Record<Exclude<AppMenuAction, 'about'>, string> = {\n      faq: 'https://github.com/Specpapers/ADB-automation-tool/wiki/FAQ',\n      updates: 'https://github.com/Specpapers/ADB-automation-tool/releases',\n      manual: 'https://github.com/Specpapers/ADB-automation-tool/wiki/User-Manual',\n    };\n    window.open(links[action], '_blank', 'noopener,noreferrer');\n  };\n\n  return (\n    <Box sx={{ \n      display: 'flex',\n      minHeight: '100vh',\n      backgroundColor: '#F7F9FC',\n      fontFamily: 'Inter, system-ui, -apple-system, \"Segoe UI\", Roboto, sans-serif'\n    }}>\n      <Box sx={{\n        width: 280,\n        background: 'linear-gradient(180deg, #0D1B2A 0%, #152238 100%)',\n        padding: '16px 12px',\n        display: 'flex',\n        flexDirection: 'column',\n        position: 'sticky',\n        top: 0,\n        height: '100vh'\n      }}>\n        <Box sx={{ mb: 4, pb: 2, borderBottom: '1px solid rgba(255, 255, 255, 0.08)' }}>\n          <Typography variant=\"h6\" sx={{ \n            color: 'rgba(255, 255, 255, 0.9)', \n            fontWeight: 700,\n            fontSize: '18px',\n            lineHeight: '26px'\n          }}>\n            MOBIQ\n          </Typography>\n          <Typography variant=\"body2\" sx={{ \n            color: 'rgba(255, 255, 255, 0.7)',\n            fontSize: '12px',\n            lineHeight: '18px'\n          }}>\n            The Future of Telecom Automation\n          </Typography>\n        </Box>\n\n        <Box sx={{ flex: 1 }}>\n          {[\n            { label: 'Dashboard', icon: <Grid3X3 size={20} />, path: '/dashboard' },\n            { label: 'Test Modules', icon: <Puzzle size={20} />, path: '/modules' },\n            { label: 'Workflows', icon: <Zap size={20} />, path: '/workflows' },\n            { label: 'Device Manager', icon: <Smartphone size={20} />, path: '/devices' }\n          ].map((item, index) => {\n            const isActive = location.pathname === item.path;\n            return (\n              <Box\n                key={index}\n                onClick={() => navigate(item.path)}\n                sx={{\n                  height: 48,\n                  borderRadius: '12px',\n                  padding: '0 14px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 2,\n                  mb: 1,\n                  cursor: 'pointer',\n                  backgroundColor: isActive ? '#1E3A8A' : 'transparent',\n                  color: isActive ? '#FFFFFF' : '#D1D5DB',\n                  '&:hover': {\n                    backgroundColor: isActive ? '#1E3A8A' : '#11253F',\n                    color: isActive ? '#FFFFFF' : '#E5E7EB'\n                  }\n                }}\n              >\n                <Box sx={{ color: isActive ? '#FFFFFF' : '#93C5FD' }}>\n                  {item.icon}\n                </Box>\n                <Typography sx={{ fontSize: '14px', fontWeight: 500 }}>\n                  {item.label}\n                </Typography>\n              </Box>\n            );\n          })}\n        </Box>\n\n        <Box sx={{ textAlign: 'center', mt: 2 }}>\n          <Box sx={{ display: 'inline-flex', alignItems: 'center', gap: 1 }}>\n            <Chip \n              label=\"MOBIQ v1.0\"\n              size=\"small\"\n              sx={{\n                backgroundColor: 'rgba(255, 255, 255, 0.1)',\n                color: 'rgba(255, 255, 255, 0.7)',\n                fontSize: '11px'\n              }}\n            />\n            <IconButton size=\"small\" onClick={handleOpenMenu} sx={{ color: 'rgba(255, 255, 255, 0.8)' }}>\n              <Info size={16} />\n            </IconButton>\n          </Box>\n          <Menu anchorEl={appMenuAnchor} open={Boolean(appMenuAnchor)} onClose={handleCloseMenu}>\n            <MenuItem onClick={() => handleMenuClick('about')}>About</MenuItem>\n            <MenuItem onClick={() => handleMenuClick('faq')}>FAQ</MenuItem>\n            <MenuItem onClick={() => handleMenuClick('updates')}>Check for updates</MenuItem>\n            <MenuItem onClick={() => handleMenuClick('manual')}>User manual</MenuItem>\n          </Menu>\n        </Box>\n      </Box>\n\n      <Box sx={{ flex: 1, padding: '24px 28px', maxWidth: 1320, margin: '0 auto' }}>\n        <Box sx={{ display: 'flex', justifyContent: 'flex-end', gap: 1, mb: 2 }}>\n          <IconButton\n            size=\"small\"\n            onClick={() => navigate(-1)}\n            disabled={!canGoBack}\n            sx={{ border: '1px solid #E2E8F0', borderRadius: '8px', backgroundColor: canGoBack ? '#FFFFFF' : '#F1F5F9' }}\n            aria-label=\"Go back\"\n          >\n            <ChevronLeft size={18} />\n          </IconButton>\n          <IconButton\n            size=\"small\"\n            onClick={() => navigate(1)}\n            disabled={!canGoForward}\n            sx={{ border: '1px solid #E2E8F0', borderRadius: '8px', backgroundColor: canGoForward ? '#FFFFFF' : '#F1F5F9' }}\n            aria-label=\"Go forward\"\n          >\n            <ChevronRight size={18} />\n          </IconButton>\n        </Box>\n        {children}\n      </Box>\n    </Box>\n  );\n};\n\nexport default Layout;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'm6 9 6 6 6-6', key: 'qrunsl' }]];\n\n/**\n * @component @name ChevronDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNiA5IDYgNiA2LTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/chevron-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronDown = createLucideIcon('chevron-down', __iconNode);\n\nexport default ChevronDown;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n];\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('plus', __iconNode);\n\nexport default Plus;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915',\n      key: '1i5ecw',\n    },\n  ],\n  ['circle', { cx: '12', cy: '12', r: '3', key: '1v7zrd' }],\n];\n\n/**\n * @component @name Settings\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOS42NzEgNC4xMzZhMi4zNCAyLjM0IDAgMCAxIDQuNjU5IDAgMi4zNCAyLjM0IDAgMCAwIDMuMzE5IDEuOTE1IDIuMzQgMi4zNCAwIDAgMSAyLjMzIDQuMDMzIDIuMzQgMi4zNCAwIDAgMCAwIDMuODMxIDIuMzQgMi4zNCAwIDAgMS0yLjMzIDQuMDMzIDIuMzQgMi4zNCAwIDAgMC0zLjMxOSAxLjkxNSAyLjM0IDIuMzQgMCAwIDEtNC42NTkgMCAyLjM0IDIuMzQgMCAwIDAtMy4zMi0xLjkxNSAyLjM0IDIuMzQgMCAwIDEtMi4zMy00LjAzMyAyLjM0IDIuMzQgMCAwIDAgMC0zLjgzMUEyLjM0IDIuMzQgMCAwIDEgNi4zNSA2LjA1MWEyLjM0IDIuMzQgMCAwIDAgMy4zMTktMS45MTUiIC8+CiAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/settings\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Settings = createLucideIcon('settings', __iconNode);\n\nexport default Settings;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 6v6l4 2', key: 'mmk7yg' }],\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n];\n\n/**\n * @component @name Clock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgNnY2bDQgMiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/clock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Clock = createLucideIcon('clock', __iconNode);\n\nexport default Clock;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '14', height: '14', x: '8', y: '8', rx: '2', ry: '2', key: '17jyea' }],\n  ['path', { d: 'M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2', key: 'zix9uf' }],\n];\n\n/**\n * @component @name Copy\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHg9IjgiIHk9IjgiIHJ4PSIyIiByeT0iMiIgLz4KICA8cGF0aCBkPSJNNCAxNmMtMS4xIDAtMi0uOS0yLTJWNGMwLTEuMS45LTIgMi0yaDEwYzEuMSAwIDIgLjkgMiAyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/copy\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Copy = createLucideIcon('copy', __iconNode);\n\nexport default Copy;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { x: '14', y: '3', width: '5', height: '18', rx: '1', key: 'kaeet6' }],\n  ['rect', { x: '5', y: '3', width: '5', height: '18', rx: '1', key: '1wsw3u' }],\n];\n\n/**\n * @component @name Pause\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB4PSIxNCIgeT0iMyIgd2lkdGg9IjUiIGhlaWdodD0iMTgiIHJ4PSIxIiAvPgogIDxyZWN0IHg9IjUiIHk9IjMiIHdpZHRoPSI1IiBoZWlnaHQ9IjE4IiByeD0iMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pause\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Pause = createLucideIcon('pause', __iconNode);\n\nexport default Pause;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['rect', { x: '9', y: '9', width: '6', height: '6', rx: '1', key: '1ssd4o' }],\n];\n\n/**\n * @component @name CircleStop\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cmVjdCB4PSI5IiB5PSI5IiB3aWR0aD0iNiIgaGVpZ2h0PSI2IiByeD0iMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/circle-stop\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleStop = createLucideIcon('circle-stop', __iconNode);\n\nexport default CircleStop;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7', key: '1m0v6g' }],\n  [\n    'path',\n    {\n      d: 'M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z',\n      key: 'ohrbg2',\n    },\n  ],\n];\n\n/**\n * @component @name SquarePen\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgM0g1YTIgMiAwIDAgMC0yIDJ2MTRhMiAyIDAgMCAwIDIgMmgxNGEyIDIgMCAwIDAgMi0ydi03IiAvPgogIDxwYXRoIGQ9Ik0xOC4zNzUgMi42MjVhMSAxIDAgMCAxIDMgM2wtOS4wMTMgOS4wMTRhMiAyIDAgMCAxLS44NTMuNTA1bC0yLjg3My44NGEuNS41IDAgMCAxLS42Mi0uNjJsLjg0LTIuODczYTIgMiAwIDAgMSAuNTA2LS44NTJ6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/square-pen\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst SquarePen = createLucideIcon('square-pen', __iconNode);\n\nexport default SquarePen;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10 11v6', key: 'nco0om' }],\n  ['path', { d: 'M14 11v6', key: 'outv1u' }],\n  ['path', { d: 'M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6', key: 'miytrc' }],\n  ['path', { d: 'M3 6h18', key: 'd0wm0j' }],\n  ['path', { d: 'M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2', key: 'e791ji' }],\n];\n\n/**\n * @component @name Trash2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTQgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTkgNnYxNGEyIDIgMCAwIDEtMiAySDdhMiAyIDAgMCAxLTItMlY2IiAvPgogIDxwYXRoIGQ9Ik0zIDZoMTgiIC8+CiAgPHBhdGggZD0iTTggNlY0YTIgMiAwIDAgMSAyLTJoNGEyIDIgMCAwIDEgMiAydjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/trash-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trash2 = createLucideIcon('trash-2', __iconNode);\n\nexport default Trash2;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm5 12 7-7 7 7', key: 'hav0vg' }],\n  ['path', { d: 'M12 19V5', key: 'x0mq9r' }],\n];\n\n/**\n * @component @name ArrowUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNSAxMiA3LTcgNyA3IiAvPgogIDxwYXRoIGQ9Ik0xMiAxOVY1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/arrow-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowUp = createLucideIcon('arrow-up', __iconNode);\n\nexport default ArrowUp;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n  ['path', { d: 'm19 12-7 7-7-7', key: '1idqje' }],\n];\n\n/**\n * @component @name ArrowDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KICA8cGF0aCBkPSJtMTkgMTItNyA3LTctNyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowDown = createLucideIcon('arrow-down', __iconNode);\n\nexport default ArrowDown;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M18 6 6 18', key: '1bl5f8' }],\n  ['path', { d: 'm6 6 12 12', key: 'd8bk6v' }],\n];\n\n/**\n * @component @name X\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggNiA2IDE4IiAvPgogIDxwYXRoIGQ9Im02IDYgMTIgMTIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst X = createLucideIcon('x', __iconNode);\n\nexport default X;\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport {\n  Box,\n  Typography,\n  Button,\n  TextField,\n  InputAdornment,\n  Select,\n  MenuItem,\n  FormControl,\n  Card,\n  CardContent,\n  Grid,\n  Chip,\n  IconButton,\n  Tooltip,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Snackbar,\n  Alert,\n  Stack,\n} from '@mui/material';\nimport {\n  Search,\n  ChevronDown,\n  Plus,\n  Play,\n  Pause,\n  Settings,\n  Zap,\n  Clock,\n  CheckCircle,\n  Edit,\n  Trash2,\n  ArrowUp,\n  ArrowDown,\n  X,\n  StopCircle,\n  Copy,\n} from 'lucide-react';\n\nimport Layout from '../components/Layout';\nimport { MODULE_CATALOG, ModuleMetadata } from '../data/modules';\nimport {\n  addStoredWorkflow,\n  deleteStoredWorkflow,\n  getStoredWorkflows,\n  recordWorkflowRun,\n  updateStoredWorkflow,\n  WORKFLOWS_STORAGE_EVENT,\n  StoredWorkflow,\n} from '../utils/workflows';\nimport { recordDeviceWorkflowRun } from '../utils/deviceHistory';\nimport { recordDeviceActivity } from '../utils/deviceActivity';\nimport { readSelectedDeviceIds, SELECTED_DEVICES_EVENT } from '../utils/deviceSelection';\nimport { CallTestValues } from '../types/callTest';\n\ntype WorkflowEditorData = {\n  name: string;\n  description: string;\n  modules: ModuleMetadata[];\n  repeatSettings: RepeatDurationSettings;\n};\n\ninterface FlowComposerProps {\n  backendUrl: string;\n}\n\nconst CALL_TEST_STORAGE_KEY = 'callTestParams';\nconst GLOBAL_CALL_TEST_KEY = '__global__';\nconst WORKFLOW_BACKEND_MAP_KEY = 'workflowBackendMap';\nconst CALL_TEST_DEFAULTS: CallTestValues = {\n  countryCode: '+237',\n  phoneNumber: '691234567',\n  duration: 30,\n  callCount: 1,\n};\nconst WAITING_TIME_MODULE_ID = 'waiting_time';\nconst DEFAULT_WAIT_DURATION_SECONDS = 5;\nconst MIN_WAIT_DURATION_SECONDS = 1;\nconst MAX_WAIT_DURATION_SECONDS = 600;\nconst WAITING_TIME_STORAGE_KEY = 'waitingTimeDurationSeconds';\n\nconst REPEAT_UNIT_TO_SECONDS = {\n  minutes: 60,\n  hours: 3600,\n  days: 86400,\n} as const;\n\ntype DurationUnit = keyof typeof REPEAT_UNIT_TO_SECONDS;\n\ninterface RepeatDurationSettings {\n  repeatCount: number;\n  durationValue: number;\n  durationUnit: DurationUnit;\n}\n\nconst DEFAULT_REPEAT_SETTINGS: RepeatDurationSettings = {\n  repeatCount: 1,\n  durationValue: 0,\n  durationUnit: 'minutes',\n};\n\nconst convertDurationToSeconds = (value: number, unit: DurationUnit): number => {\n  const normalizedValue = Number.isFinite(value) ? Math.max(0, Math.trunc(value)) : 0;\n  return normalizedValue * REPEAT_UNIT_TO_SECONDS[unit];\n};\n\n\ntype StoredCallTestValues = CallTestValues;\n\ntype BackendWorkflowSchedule = {\n  id: string;\n  workflow_id: string;\n  workflow_name: string;\n  device_id: string;\n  run_at: string;\n  status: 'scheduled' | 'running' | 'completed' | 'failed' | 'cancelled';\n  created_at: string;\n  updated_at?: string;\n  started_at?: string | null;\n  completed_at?: string | null;\n  result?: Record<string, unknown> | null;\n};\n\ntype WorkflowScheduleSummary = {\n  deviceIds: string[];\n  scheduleIds: string[];\n  nextRunAt: string;\n};\n\nconst sanitizeCallTestValues = (values: Partial<StoredCallTestValues>): StoredCallTestValues => {\n  const countryDigits = (values.countryCode ?? CALL_TEST_DEFAULTS.countryCode).replace(/[^0-9]/g, '');\n  const countryCode = countryDigits ? `+${countryDigits}` : CALL_TEST_DEFAULTS.countryCode;\n  const phoneNumber =\n    (values.phoneNumber ?? CALL_TEST_DEFAULTS.phoneNumber).replace(/[^0-9]/g, '') ||\n    CALL_TEST_DEFAULTS.phoneNumber;\n  const duration = Math.max(1, Math.min(600, Number(values.duration ?? CALL_TEST_DEFAULTS.duration)));\n  const callCount = Math.max(1, Math.min(10, Number(values.callCount ?? CALL_TEST_DEFAULTS.callCount)));\n  return { countryCode, phoneNumber, duration, callCount };\n};\n\nconst readCallTestStorageMap = (): Record<string, StoredCallTestValues> => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return {};\n  }\n  try {\n    const raw = window.localStorage.getItem(CALL_TEST_STORAGE_KEY);\n    if (!raw) {\n      return {};\n    }\n    const parsed = JSON.parse(raw);\n    if (parsed && typeof parsed === 'object') {\n      const entries: Record<string, StoredCallTestValues> = {};\n      Object.entries(parsed).forEach(([key, value]) => {\n        if (value && typeof value === 'object') {\n          entries[key] = sanitizeCallTestValues(value as Partial<StoredCallTestValues>);\n        }\n      });\n      return entries;\n    }\n  } catch (error) {\n    console.warn('[FlowComposer] Failed to read Call Test storage map', error);\n  }\n  return {};\n};\n\nconst resolveCallTestValuesForDevice = (deviceId?: string | null): StoredCallTestValues => {\n  const map = readCallTestStorageMap();\n  if (deviceId && map[deviceId]) {\n    return map[deviceId];\n  }\n  if (map[GLOBAL_CALL_TEST_KEY]) {\n    return map[GLOBAL_CALL_TEST_KEY];\n  }\n  return CALL_TEST_DEFAULTS;\n};\n\nconst buildModuleParametersForDevice = (module: ModuleMetadata, deviceId?: string | null): Record<string, any> | undefined => {\n  if (module.id === 'call_test') {\n    const values = resolveCallTestValuesForModule(module, deviceId);\n    const internationalNumber = `${values.countryCode}${values.phoneNumber}`.replace(/\\s+/g, '');\n    return {\n      number: internationalNumber,\n      duration: values.duration,\n      call_count: values.callCount,\n      calls: values.callCount,\n    };\n  }\n  return undefined;\n};\n\nconst resolveModuleExecutionId = (moduleId: string): string | null => {\n  if (moduleId === 'call_test') {\n    return 'voice_call_test';\n  }\n  if (moduleId === WAITING_TIME_MODULE_ID) {\n    return null;\n  }\n  return moduleId;\n};\n\nconst resolveCallTestValuesForModule = (module: ModuleMetadata, deviceId?: string | null): StoredCallTestValues => {\n  if (module.id === 'call_test' && module.callTestParams) {\n    return sanitizeCallTestValues(module.callTestParams);\n  }\n  return resolveCallTestValuesForDevice(deviceId);\n};\n\nconst sleep = (ms: number) => new Promise((resolve) => setTimeout(resolve, ms));\n\nconst isWaitingModule = (module?: ModuleMetadata | null): boolean => module?.id === WAITING_TIME_MODULE_ID;\n\nconst formatCallTestNumber = (values: StoredCallTestValues): string => {\n  const compactCountry = values.countryCode.replace(/\\s+/g, '');\n  const localNumber = values.phoneNumber.replace(/(\\d{2})(?=\\d)/g, '$1 ').trim();\n  return [compactCountry, localNumber].filter(Boolean).join(' ').trim();\n};\n\nconst describeCallTestModule = (module: ModuleMetadata): string => {\n  const values = resolveCallTestValuesForModule(module);\n  const numberLabel = formatCallTestNumber(values);\n  const attempts = Math.max(1, values.callCount ?? 1);\n  const attemptLabel = attempts > 1 ? `${attempts} appels` : '1 appel';\n  return `Appel vers ${numberLabel}  ${attemptLabel}`;\n};\n\nconst describeWaitingModule = (module: ModuleMetadata): string =>\n  `Attente de ${module.waitDurationSeconds ?? DEFAULT_WAIT_DURATION_SECONDS} seconde(s)`;\n\nconst getModuleTooltipLabel = (module: ModuleMetadata): string | undefined => {\n  if (module.id === 'call_test') {\n    return describeCallTestModule(module);\n  }\n  if (isWaitingModule(module)) {\n    return describeWaitingModule(module);\n  }\n  if (typeof module.description === 'string' && module.description.trim().length > 0) {\n    return module.description.trim();\n  }\n  return undefined;\n};\n\ntype ModuleTooltipWrapperProps = {\n  title?: string;\n  children: React.ReactElement;\n};\n\nconst ModuleTooltipWrapper: React.FC<ModuleTooltipWrapperProps> = ({ title, children }) => {\n  if (!title) {\n    return children;\n  }\n  return <Tooltip title={title}>{children}</Tooltip>;\n};\n\nconst sanitizeWaitDurationSeconds = (value?: number | string): number => {\n  const candidate = typeof value === 'number' ? value : Number(value);\n  if (!Number.isFinite(candidate)) {\n    return DEFAULT_WAIT_DURATION_SECONDS;\n  }\n  const rounded = Math.round(candidate);\n  return Math.min(MAX_WAIT_DURATION_SECONDS, Math.max(MIN_WAIT_DURATION_SECONDS, rounded));\n};\n\nconst getStoredWaitingTimeDuration = (): number => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return DEFAULT_WAIT_DURATION_SECONDS;\n  }\n  try {\n    const raw = window.localStorage.getItem(WAITING_TIME_STORAGE_KEY);\n    if (!raw) {\n      return DEFAULT_WAIT_DURATION_SECONDS;\n    }\n    const parsed = Number(raw);\n    return sanitizeWaitDurationSeconds(parsed);\n  } catch {\n    return DEFAULT_WAIT_DURATION_SECONDS;\n  }\n};\n\nconst cloneModuleForWorkflow = (module: ModuleMetadata): ModuleMetadata => {\n  let cloned: ModuleMetadata = { ...module };\n  if (isWaitingModule(module)) {\n    const effectiveDuration =\n      typeof module.waitDurationSeconds === 'number'\n        ? module.waitDurationSeconds\n        : getStoredWaitingTimeDuration();\n    cloned = {\n      ...cloned,\n      waitDurationSeconds: sanitizeWaitDurationSeconds(effectiveDuration),\n    };\n  }\n  if (module.id === 'call_test' && module.callTestParams) {\n    cloned = {\n      ...cloned,\n      callTestParams: { ...module.callTestParams },\n    };\n  } else if (module.id === 'call_test' && !module.callTestParams) {\n    const values = resolveCallTestValuesForDevice();\n    cloned = {\n      ...cloned,\n      callTestParams: { ...values },\n    };\n  }\n  return cloned;\n};\n\nconst readWorkflowBackendMap = (): Record<string, string> => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return {};\n  }\n  try {\n    const raw = window.localStorage.getItem(WORKFLOW_BACKEND_MAP_KEY);\n    if (!raw) {\n      return {};\n    }\n    const parsed = JSON.parse(raw);\n    if (parsed && typeof parsed === 'object') {\n      const map: Record<string, string> = {};\n      Object.entries(parsed).forEach(([localId, backendId]) => {\n        if (typeof localId === 'string' && typeof backendId === 'string') {\n          map[localId] = backendId;\n        }\n      });\n      return map;\n    }\n  } catch (error) {\n    console.warn('[FlowComposer] Failed to read backend workflow map', error);\n  }\n  return {};\n};\n\nconst FlowComposer: React.FC<FlowComposerProps> = ({ backendUrl }) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filterStatus, setFilterStatus] = useState('all');\n  const [workflows, setWorkflows] = useState<StoredWorkflow[]>(() => getStoredWorkflows());\n  const [editorOpen, setEditorOpen] = useState(false);\n  const [editingWorkflow, setEditingWorkflow] = useState<StoredWorkflow | null>(null);\n  const [snackbar, setSnackbar] = useState<{ message: string; severity: 'success' | 'error' | 'info' | 'warning' } | null>(null);\n  const [selectedDeviceIds, setSelectedDeviceIds] = useState<string[]>(() => readSelectedDeviceIds());\n  const [runningWorkflows, setRunningWorkflows] = useState<Record<string, boolean>>({});\n  const [workflowRunStatus, setWorkflowRunStatus] = useState<Record<string, string>>({});\n  const [workflowActiveModuleIndex, setWorkflowActiveModuleIndex] = useState<Record<string, number | null>>({});\n  const [workflowCompletedModules, setWorkflowCompletedModules] = useState<Record<string, number[]>>({});\n  const [workflowPauseRequests, setWorkflowPauseRequests] = useState<Record<string, boolean>>({});\n  const workflowPauseRef = useRef<Record<string, boolean>>({});\n  const [workflowRepeatSettings, setWorkflowRepeatSettings] = useState<Record<string, RepeatDurationSettings>>({});\n  const [workflowCancelRequests, setWorkflowCancelRequests] = useState<Record<string, boolean>>({});\n  const workflowCancelControllers = useRef<Record<string, AbortController>>({});\n  const [serverSchedules, setServerSchedules] = useState<BackendWorkflowSchedule[]>([]);\n  const [scheduleFetchError, setScheduleFetchError] = useState<string | null>(null);\n  const [scheduleDialogOpen, setScheduleDialogOpen] = useState(false);\n  const [scheduleTargetWorkflow, setScheduleTargetWorkflow] = useState<StoredWorkflow | null>(null);\n  const [scheduleDelayMinutes, setScheduleDelayMinutes] = useState('10');\n  const [scheduleDialogError, setScheduleDialogError] = useState<string | null>(null);\n  const [scheduleDeviceIds, setScheduleDeviceIds] = useState<string[]>([]);\n  const [workflowBackendMap, setWorkflowBackendMap] = useState<Record<string, string>>(() => readWorkflowBackendMap());\n  const [backendWorkflowIds, setBackendWorkflowIds] = useState<string[]>([]);\n  const moduleCatalogMap = useMemo(() => new Map(MODULE_CATALOG.map((m) => [m.id, m])), []);\n  const normalizedBackendUrl = useMemo(() => (backendUrl ? backendUrl.replace(/\\/$/, '') : ''), [backendUrl]);\n  const schedulePreviewTime = useMemo(() => {\n    const minutes = Number(scheduleDelayMinutes);\n    if (!Number.isFinite(minutes) || minutes <= 0) {\n      return null;\n    }\n    const future = new Date(Date.now() + minutes * 60 * 1000);\n    return future.toLocaleString([], { hour: '2-digit', minute: '2-digit' });\n  }, [scheduleDelayMinutes]);\n\n  const handleCloneWorkflow = useCallback(\n    (workflow: StoredWorkflow) => {\n      const cloneName = `${workflow.name} (Copy)`;\n      addStoredWorkflow({\n        name: cloneName,\n        description: workflow.description,\n        modules: workflow.modules,\n        runCount: 0,\n        lastRunAt: null,\n      });\n      setWorkflows(getStoredWorkflows());\n      setSnackbar({ severity: 'success', message: `Workflow \"${cloneName}\" created.` });\n    },\n    []\n  );\n\n  useEffect(() => {\n    const syncWorkflows = () => setWorkflows(getStoredWorkflows());\n    syncWorkflows();\n    window.addEventListener(WORKFLOWS_STORAGE_EVENT, syncWorkflows);\n    return () => {\n      window.removeEventListener(WORKFLOWS_STORAGE_EVENT, syncWorkflows);\n    };\n  }, []);\n\n  useEffect(() => {\n    const syncSelection = (event: Event) => {\n      const detail = (event as CustomEvent<string[]>).detail;\n      if (Array.isArray(detail)) {\n        setSelectedDeviceIds(detail);\n      } else {\n        setSelectedDeviceIds(readSelectedDeviceIds());\n      }\n    };\n    window.addEventListener(SELECTED_DEVICES_EVENT, syncSelection as EventListener);\n    return () => {\n      window.removeEventListener(SELECTED_DEVICES_EVENT, syncSelection as EventListener);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!scheduleDialogOpen) {\n      setScheduleDeviceIds(selectedDeviceIds);\n    }\n  }, [selectedDeviceIds, scheduleDialogOpen]);\n\n  useEffect(() => {\n    workflowPauseRef.current = workflowPauseRequests;\n  }, [workflowPauseRequests]);\n\n  useEffect(() => {\n    if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n      return;\n    }\n    try {\n      window.localStorage.setItem(WORKFLOW_BACKEND_MAP_KEY, JSON.stringify(workflowBackendMap));\n    } catch (error) {\n      console.warn('[FlowComposer] Failed to persist backend workflow map', error);\n    }\n  }, [workflowBackendMap]);\n\n\n  const getRepeatSettingsForWorkflow = (workflowId: string): RepeatDurationSettings =>\n    workflowRepeatSettings[workflowId] ?? DEFAULT_REPEAT_SETTINGS;\n\n  const updateRepeatSettingsForWorkflow = useCallback(\n    (workflowId: string, patch: Partial<RepeatDurationSettings>) => {\n      setWorkflowRepeatSettings((prev) => ({\n        ...prev,\n        [workflowId]: {\n          ...(prev[workflowId] ?? DEFAULT_REPEAT_SETTINGS),\n          ...patch,\n        },\n      }));\n    },\n    []\n  );\n\n  const setWorkflowPaused = useCallback((workflowId: string, paused: boolean) => {\n    setWorkflowPauseRequests((prev) => {\n      const next = { ...prev };\n      if (paused) {\n        next[workflowId] = true;\n      } else {\n        delete next[workflowId];\n      }\n      return next;\n    });\n  }, []);\n\n  const isWorkflowPaused = useCallback(\n    (workflowId: string) => Boolean(workflowPauseRequests[workflowId]),\n    [workflowPauseRequests]\n  );\n\n  const markWorkflowCancelled = useCallback((workflowId: string) => {\n    setWorkflowCancelRequests((prev) => ({ ...prev, [workflowId]: true }));\n  }, []);\n\n  const clearWorkflowCancellation = useCallback((workflowId: string) => {\n    setWorkflowCancelRequests((prev) => {\n      const next = { ...prev };\n      delete next[workflowId];\n      return next;\n    });\n    if (workflowCancelControllers.current[workflowId]) {\n      delete workflowCancelControllers.current[workflowId];\n    }\n  }, []);\n\n  const isWorkflowCancelled = useCallback(\n    (workflowId: string) => workflowCancelRequests[workflowId] === true,\n    [workflowCancelRequests]\n  );\n\n  const handleStopWorkflow = useCallback((workflowId: string) => {\n    markWorkflowCancelled(workflowId);\n    setWorkflowPaused(workflowId, false);\n    const controller = workflowCancelControllers.current[workflowId];\n    if (controller) {\n      controller.abort();\n    }\n  }, [markWorkflowCancelled, setWorkflowPaused]);\n\n  const sortedModuleCatalog = useMemo(\n    () => [...MODULE_CATALOG].sort((a, b) => a.name.localeCompare(b.name)),\n    []\n  );\n\n  const sortedWorkflows = useMemo(\n    () => [...workflows].sort((a, b) => b.updatedAt.localeCompare(a.updatedAt)),\n    [workflows]\n  );\n  const totalWorkflows = workflows.length;\n  const activeWorkflows = workflows.filter((workflow) => workflow.status === 'active');\n  const draftWorkflows = workflows.filter((workflow) => workflow.status === 'draft');\n  const totalExecutions = workflows.reduce((sum, workflow) => sum + (workflow.runCount || 0), 0);\n  const mostRecentRunAt = workflows.reduce<string | null>((latest, workflow) => {\n    if (!workflow.lastRunAt) {\n      return latest;\n    }\n    return !latest || workflow.lastRunAt > latest ? workflow.lastRunAt : latest;\n  }, null);\n  const mostRecentRunLabel = useMemo(() => {\n    if (!mostRecentRunAt) {\n      return null;\n    }\n    const parsed = new Date(mostRecentRunAt);\n    if (Number.isNaN(parsed.getTime())) {\n      return null;\n    }\n    return parsed.toLocaleString();\n  }, [mostRecentRunAt]);\n\n  const filteredWorkflows = sortedWorkflows.filter((workflow) => {\n    const matchesStatus = filterStatus === 'all' ? true : workflow.status === filterStatus;\n    const query = searchQuery.trim().toLowerCase();\n    const matchesSearch =\n      query.length === 0 ||\n      workflow.name.toLowerCase().includes(query) ||\n      (workflow.description || '').toLowerCase().includes(query);\n    return matchesStatus && matchesSearch;\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'active': return { bg: '#EEF2FF', color: '#2563EB' };\n      case 'draft': return { bg: '#F1F5F9', color: '#64748B' };\n      default: return { bg: '#F1F5F9', color: '#64748B' };\n    }\n  };\n\n  const fetchWorkflowSchedules = useCallback(\n    async (signal?: AbortSignal) => {\n      if (!normalizedBackendUrl) {\n        setServerSchedules([]);\n        setScheduleFetchError(null);\n        return;\n      }\n      try {\n        const response = await fetch(`${normalizedBackendUrl}/api/workflows/schedules`, { signal });\n        if (!response.ok) {\n          const text = await response.text();\n          throw new Error(text || `Failed to load schedules (HTTP ${response.status})`);\n        }\n        const payload = await response.json();\n        if (!Array.isArray(payload)) {\n          throw new Error('Unexpected schedule payload.');\n        }\n        setServerSchedules(payload as BackendWorkflowSchedule[]);\n        setScheduleFetchError(null);\n      } catch (error) {\n        if (signal?.aborted) {\n          return;\n        }\n        setScheduleFetchError(\n          error instanceof Error ? error.message : 'Unable to load workflow schedules from the backend.'\n        );\n      } finally {\n        // no cleanup needed\n      }\n    },\n    [normalizedBackendUrl]\n  );\n\n  useEffect(() => {\n    const controller = new AbortController();\n    fetchWorkflowSchedules(controller.signal);\n    const interval = window.setInterval(() => fetchWorkflowSchedules(), 15000);\n    return () => {\n      controller.abort();\n      window.clearInterval(interval);\n    };\n  }, [fetchWorkflowSchedules]);\n\n  const scheduleSummaries = useMemo(() => {\n    const grouped: Record<string, WorkflowScheduleSummary> = {};\n    const backendToLocal = Object.entries(workflowBackendMap).reduce<Record<string, string>>((acc, [localId, backendId]) => {\n      acc[backendId] = localId;\n      return acc;\n    }, {});\n    serverSchedules.forEach((entry) => {\n      if (entry.status !== 'scheduled') {\n        return;\n      }\n      const localWorkflowId = backendToLocal[entry.workflow_id];\n      if (!localWorkflowId) {\n        return;\n      }\n      const bucket =\n        grouped[localWorkflowId] ??\n        {\n          deviceIds: [] as string[],\n          scheduleIds: [] as string[],\n          nextRunAt: entry.run_at,\n        };\n      bucket.deviceIds.push(entry.device_id);\n      bucket.scheduleIds.push(entry.id);\n      if (!bucket.nextRunAt || new Date(entry.run_at).getTime() < new Date(bucket.nextRunAt).getTime()) {\n        bucket.nextRunAt = entry.run_at;\n      }\n      grouped[localWorkflowId] = bucket;\n    });\n    return grouped;\n  }, [serverSchedules, workflowBackendMap]);\n\n  const ensureBackendWorkflow = useCallback(\n    async (workflow: StoredWorkflow): Promise<string> => {\n      if (!normalizedBackendUrl) {\n        throw new Error('Backend unavailable: no URL configured.');\n      }\n\n      const existing = workflowBackendMap[workflow.id];\n      if (existing) {\n        try {\n          const response = await fetch(`${normalizedBackendUrl}/api/workflows/${existing}`);\n          if (response.ok) {\n            return existing;\n          }\n          if (response.status !== 404) {\n            const text = await response.text();\n            throw new Error(\n              text || `Failed to validate workflow \"${workflow.name}\" on backend (HTTP ${response.status})`\n            );\n          }\n          setWorkflowBackendMap((prev) => {\n            const next = { ...prev };\n            delete next[workflow.id];\n            return next;\n          });\n        } catch (error) {\n          if (error instanceof Error) {\n            throw error;\n          }\n          throw new Error('Unable to validate workflow on backend.');\n        }\n      }\n\n      const response = await fetch(`${normalizedBackendUrl}/api/workflows`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          name: workflow.name,\n          description: workflow.description,\n          modules: workflow.modules.map((module) => module.id),\n        }),\n      });\n      if (!response.ok) {\n        const text = await response.text();\n        throw new Error(text || `Failed to register workflow on backend (HTTP ${response.status})`);\n      }\n      const payload = await response.json();\n      if (!payload?.id) {\n        throw new Error('Backend did not return a workflow identifier.');\n      }\n      setWorkflowBackendMap((prev) => ({\n        ...prev,\n        [workflow.id]: payload.id,\n      }));\n      return payload.id as string;\n    },\n    [normalizedBackendUrl, workflowBackendMap]\n  );\n\n  useEffect(() => {\n    if (!normalizedBackendUrl) {\n      setBackendWorkflowIds([]);\n      return;\n    }\n    const controller = new AbortController();\n    const syncBackendState = async () => {\n      try {\n        const response = await fetch(`${normalizedBackendUrl}/api/workflows`, { signal: controller.signal });\n        if (!response.ok) {\n          const text = await response.text();\n          throw new Error(text || `Failed to read backend workflows (HTTP ${response.status})`);\n        }\n        const payload = await response.json();\n        if (!Array.isArray(payload)) {\n          throw new Error('Unexpected backend workflow payload.');\n        }\n        const ids = payload\n          .map((wf) => (wf && typeof wf === 'object' ? (wf as { id?: string }).id : null))\n          .filter((id): id is string => typeof id === 'string');\n        setBackendWorkflowIds(ids);\n        setWorkflowBackendMap((prev) => {\n          const backendIdSet = new Set(ids);\n          let changed = false;\n          const next = { ...prev };\n          Object.entries(prev).forEach(([localId, backendId]) => {\n            if (!backendIdSet.has(backendId)) {\n              delete next[localId];\n              changed = true;\n            }\n          });\n          return changed ? next : prev;\n        });\n      } catch (error) {\n        if (!controller.signal.aborted) {\n          console.warn('[FlowComposer] Failed to sync backend workflows', error);\n        }\n      }\n    };\n    syncBackendState();\n    return () => controller.abort();\n  }, [normalizedBackendUrl]);\n\n  useEffect(() => {\n    if (!normalizedBackendUrl) {\n      return;\n    }\n    const backendIdSet = new Set(backendWorkflowIds);\n    const missing = workflows.filter((workflow) => {\n      const backendId = workflowBackendMap[workflow.id];\n      return !backendId || !backendIdSet.has(backendId);\n    });\n    if (missing.length === 0) {\n      return;\n    }\n    let cancelled = false;\n    (async () => {\n      for (const workflow of missing) {\n        if (cancelled) {\n          break;\n        }\n        try {\n          await ensureBackendWorkflow(workflow);\n        } catch (error) {\n          console.warn('[FlowComposer] Failed to register workflow on backend', error);\n          break;\n        }\n      }\n    })();\n    return () => {\n      cancelled = true;\n    };\n  }, [ensureBackendWorkflow, normalizedBackendUrl, backendWorkflowIds, workflowBackendMap, workflows]);\n\n  const handleOpenScheduleDialog = useCallback(\n    (workflow: StoredWorkflow) => {\n      const devices = selectedDeviceIds.length > 0 ? selectedDeviceIds : readSelectedDeviceIds();\n      if (devices.length === 0) {\n        setSnackbar({\n          severity: 'error',\n          message: 'Select one or more devices on the dashboard before scheduling a workflow.',\n        });\n        return;\n      }\n      setScheduleTargetWorkflow(workflow);\n      setScheduleDeviceIds(devices);\n      setScheduleDelayMinutes('10');\n      setScheduleDialogError(null);\n      setScheduleDialogOpen(true);\n    },\n    [selectedDeviceIds]\n  );\n\n  const handleScheduleDialogClose = useCallback(() => {\n    setScheduleDialogOpen(false);\n    setScheduleTargetWorkflow(null);\n    setScheduleDialogError(null);\n  }, []);\n\n  const handleScheduleSave = useCallback(async () => {\n    if (!scheduleTargetWorkflow) {\n      return;\n    }\n    if (!normalizedBackendUrl) {\n      setScheduleDialogError('Backend unavailable: no URL configured.');\n      return;\n    }\n    const parsedMinutes = Number(scheduleDelayMinutes);\n    if (!Number.isFinite(parsedMinutes) || parsedMinutes <= 0) {\n      setScheduleDialogError('Delay must be at least 1 minute.');\n      return;\n    }\n    if (scheduleDeviceIds.length === 0) {\n      setScheduleDialogError('Select one or more devices on the dashboard before scheduling.');\n      return;\n    }\n    const runAtIso = new Date(Date.now() + parsedMinutes * 60 * 1000).toISOString();\n    try {\n      const attemptSchedule = async (workflowId: string) => {\n        const response = await fetch(`${normalizedBackendUrl}/api/workflows/${workflowId}/schedule`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            device_ids: scheduleDeviceIds,\n            run_at: runAtIso,\n          }),\n        });\n        if (!response.ok) {\n          const text = await response.text();\n          const message = text || `Scheduling failed (HTTP ${response.status})`;\n          if (response.status === 404 && message.toLowerCase().includes('workflow not found')) {\n            return { retry: true, message };\n          }\n          throw new Error(message);\n        }\n        return { retry: false };\n      };\n\n      let backendWorkflowId = await ensureBackendWorkflow(scheduleTargetWorkflow);\n      let scheduleResult = await attemptSchedule(backendWorkflowId);\n\n      if (scheduleResult.retry) {\n        setWorkflowBackendMap((prev) => {\n          const next = { ...prev };\n          delete next[scheduleTargetWorkflow.id];\n          return next;\n        });\n        backendWorkflowId = await ensureBackendWorkflow(scheduleTargetWorkflow);\n        scheduleResult = await attemptSchedule(backendWorkflowId);\n      }\n\n      if (!scheduleResult.retry) {\n        setSnackbar({\n          severity: 'success',\n          message: `Workflow \"${scheduleTargetWorkflow.name}\" scheduled for ${new Date(runAtIso).toLocaleTimeString([], {\n            hour: '2-digit',\n            minute: '2-digit',\n          })}.`,\n        });\n        setScheduleDialogOpen(false);\n        setScheduleTargetWorkflow(null);\n        setScheduleDialogError(null);\n        await fetchWorkflowSchedules();\n      }\n    } catch (error) {\n      setScheduleDialogError(error instanceof Error ? error.message : 'Unable to schedule workflow.');\n    }\n  }, [\n    ensureBackendWorkflow,\n    fetchWorkflowSchedules,\n    normalizedBackendUrl,\n    scheduleDelayMinutes,\n    scheduleDeviceIds,\n    scheduleTargetWorkflow,\n  ]);\n\n  const handleCancelSchedule = useCallback(\n    async (workflowId: string) => {\n      const summary = scheduleSummaries[workflowId];\n      if (!summary || summary.scheduleIds.length === 0) {\n        return;\n      }\n      if (!normalizedBackendUrl) {\n        setSnackbar({ severity: 'error', message: 'Backend unavailable: no URL configured.' });\n        return;\n      }\n      try {\n        await Promise.all(\n          summary.scheduleIds.map((scheduleId) =>\n            fetch(`${normalizedBackendUrl}/api/workflows/schedules/${scheduleId}`, { method: 'DELETE' })\n          )\n        );\n        setSnackbar({ severity: 'info', message: 'Scheduled workflow run cancelled.' });\n        await fetchWorkflowSchedules();\n      } catch (error) {\n        setSnackbar({\n          severity: 'error',\n          message: error instanceof Error ? error.message : 'Unable to cancel scheduled workflow.',\n        });\n      }\n    },\n    [fetchWorkflowSchedules, normalizedBackendUrl, scheduleSummaries]\n  );\n\n  const formatScheduleLabel = useCallback((iso: string) => {\n    const date = new Date(iso);\n    if (Number.isNaN(date.getTime())) {\n      return iso;\n    }\n    return date.toLocaleString([], { hour: '2-digit', minute: '2-digit' });\n  }, []);\n\n  const handleCloseEditor = () => {\n    setEditorOpen(false);\n    setEditingWorkflow(null);\n  };\n\n  const handleNewWorkflow = () => {\n    setEditingWorkflow(null);\n    setEditorOpen(true);\n  };\n\n  const handleDeleteWorkflow = (workflow: StoredWorkflow) => {\n    if (runningWorkflows[workflow.id]) {\n      setSnackbar({\n        severity: 'warning',\n        message: `Stop workflow \"${workflow.name}\" before deleting it.`,\n      });\n      return;\n    }\n    const confirmDelete = window.confirm(`Delete workflow \"${workflow.name}\"?`);\n    if (!confirmDelete) {\n      return;\n    }\n    deleteStoredWorkflow(workflow.id);\n    setWorkflows(getStoredWorkflows());\n    setSnackbar({ severity: 'success', message: `Workflow \"${workflow.name}\" deleted.` });\n  };\n\n  const handleEditorSubmit = (data: WorkflowEditorData, workflowId?: string) => {\n    if (!data.name.trim()) {\n      setSnackbar({ severity: 'error', message: 'Workflow name is required.' });\n      return;\n    }\n    if (data.modules.length === 0) {\n      setSnackbar({ severity: 'error', message: 'Select at least one module.' });\n      return;\n    }\n\n    const normalizedDescription = data.description?.trim() ?? '';\n    const description = normalizedDescription.length > 0 ? normalizedDescription : '';\n\n    const sanitizedRepeat: RepeatDurationSettings = {\n      repeatCount: Math.max(1, Math.trunc(data.repeatSettings.repeatCount)),\n      durationValue: Math.max(0, Math.trunc(data.repeatSettings.durationValue)),\n      durationUnit: data.repeatSettings.durationUnit,\n    };\n\n    if (workflowId) {\n      const updated = updateStoredWorkflow(workflowId, {\n        name: data.name.trim(),\n        description,\n        modules: data.modules,\n      });\n      if (!updated) {\n        setSnackbar({ severity: 'error', message: 'Workflow not found.' });\n        return;\n      }\n      updateRepeatSettingsForWorkflow(workflowId, sanitizedRepeat);\n      setSnackbar({ severity: 'success', message: `Workflow \"${data.name}\" updated.` });\n    } else {\n      const created = addStoredWorkflow({\n        name: data.name.trim(),\n        description,\n        modules: data.modules,\n      });\n      setWorkflowRepeatSettings((prev) => ({\n        ...prev,\n        [created.id]: sanitizedRepeat,\n      }));\n      setSnackbar({ severity: 'success', message: `Workflow \"${data.name}\" created.` });\n    }\n\n    setWorkflows(getStoredWorkflows());\n    handleCloseEditor();\n  };\n\n  const executeModuleForDevices = useCallback(\n    async (\n      workflow: StoredWorkflow,\n      module: ModuleMetadata,\n      deviceIds: string[],\n      normalizedBackendUrl: string,\n      repeatCountMeta: number,\n      durationSecondsMeta: number,\n      runIteration: number,\n      abortSignal?: AbortSignal\n    ) => {\n      if (isWaitingModule(module)) {\n        const waitSeconds = sanitizeWaitDurationSeconds(module.waitDurationSeconds);\n        if (waitSeconds > 0) {\n          await sleep(waitSeconds * 1000);\n        }\n        return { successes: deviceIds, failures: [] };\n      }\n      const apiModuleId = resolveModuleExecutionId(module.id);\n      if (!apiModuleId) {\n        return {\n          successes: [],\n          failures: deviceIds.map((deviceId) => ({\n            deviceId,\n            reason: `Module \"${module.name}\" not supported for workflows.`,\n          })),\n        };\n      }\n\n      const results = await Promise.allSettled(\n        deviceIds.map(async (deviceId) => {\n          if (abortSignal?.aborted) {\n            throw { deviceId, message: 'Execution cancelled' };\n          }\n\n          const parameters = buildModuleParametersForDevice(module, deviceId) ?? {};\n          try {\n            const response = await fetch(`${normalizedBackendUrl}/api/modules/${apiModuleId}/execute`, {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({\n                device_id: deviceId,\n                parameters,\n                workflow_id: workflow.id,\n                workflow_name: workflow.name,\n                module_id: module.id,\n                repeat_count: repeatCountMeta,\n                duration_seconds: durationSecondsMeta,\n                run_iteration: runIteration,\n              }),\n              signal: abortSignal,\n            });\n\n            if (!response.ok) {\n              const text = await response.text();\n              throw { deviceId, message: text || `Backend failure (HTTP ${response.status})` };\n            }\n\n            const data = await response.json();\n            const dataStatus = typeof data.status === 'string' ? data.status.toLowerCase() : 'completed';\n            const success =\n              typeof data.success === 'boolean' ? data.success : dataStatus !== 'failed' && dataStatus !== 'error';\n\n            if (!success) {\n              const reason = data.error || data.message || `Module \"${module.name}\" failed`;\n              throw { deviceId, message: reason };\n            }\n\n            return { deviceId, data };\n          } catch (error: any) {\n            if (error?.name === 'AbortError') {\n              throw { deviceId, message: 'Execution cancelled' };\n            }\n            throw error;\n          }\n        })\n      );\n\n      const successes: string[] = [];\n      const failures: { deviceId: string; reason: string }[] = [];\n\n      results.forEach((result) => {\n        if (result.status === 'fulfilled') {\n          successes.push(result.value.deviceId);\n        } else {\n          const deviceId = (result.reason && result.reason.deviceId) || 'unknown';\n          const reason =\n            (result.reason && result.reason.message) ||\n            (result.reason instanceof Error ? result.reason.message : `Module \"${module.name}\" execution failed.`);\n          failures.push({ deviceId, reason });\n        }\n      });\n\n      return { successes, failures };\n    },\n    []\n  );\n\n  const handleRunWorkflow = async (workflow: StoredWorkflow) => {\n    if (!backendUrl) {\n      setSnackbar({ severity: 'error', message: 'Backend unavailable: no URL configured.' });\n      return;\n    }\n\n    const deviceIds = selectedDeviceIds.length > 0 ? selectedDeviceIds : readSelectedDeviceIds();\n    if (deviceIds.length === 0) {\n      setSnackbar({\n        severity: 'error',\n        message: 'Select one or more devices on the dashboard before running a workflow.',\n      });\n      return;\n    }\n\n    const workflowSummary =\n      workflow.modules.map((module) => module.name).filter(Boolean).join('  ') || workflow.name;\n    const repeatSettings = getRepeatSettingsForWorkflow(workflow.id);\n    const normalizedRepeatCount = Number.isFinite(repeatSettings.repeatCount)\n      ? Math.max(1, Math.trunc(repeatSettings.repeatCount))\n      : 1;\n    const durationUnit: DurationUnit = repeatSettings.durationUnit ?? 'minutes';\n    const durationSeconds = convertDurationToSeconds(repeatSettings.durationValue ?? 0, durationUnit);\n\n    if (workflowCancelControllers.current[workflow.id]) {\n      workflowCancelControllers.current[workflow.id].abort();\n      delete workflowCancelControllers.current[workflow.id];\n    }\n    const workflowController = new AbortController();\n    workflowCancelControllers.current[workflow.id] = workflowController;\n    setWorkflowCancelRequests((prev) => ({ ...prev, [workflow.id]: false }));\n\n    setRunningWorkflows((prev) => ({ ...prev, [workflow.id]: true }));\n    setWorkflowActiveModuleIndex((prev) => ({\n      ...prev,\n      [workflow.id]: workflow.modules.length > 0 ? 0 : null,\n    }));\n    setWorkflowCompletedModules((prev) => ({ ...prev, [workflow.id]: [] }));\n    setWorkflowRunStatus((prev) => ({\n      ...prev,\n      [workflow.id]: `Planning workflow (${workflowSummary}) for ${deviceIds.length} device${deviceIds.length === 1 ? '' : 's'}`,\n    }));\n    setSnackbar({\n      severity: 'info',\n      message: `Workflow \"${workflow.name}\" started (${workflowSummary}).`,\n    });\n\n    const sessionStart = Date.now();\n    const durationWindowMs = durationSeconds * 1000;\n    let runCounter = 0;\n    let completedRuns = 0;\n    let cancelled = false;\n\n    const waitWhilePaused = async () => {\n      if (!workflowPauseRef.current[workflow.id]) {\n        return;\n      }\n      setWorkflowRunStatus((prev) => ({\n        ...prev,\n        [workflow.id]: `Workflow \"${workflow.name}\" paused. Click resume to continue.`,\n      }));\n      while (workflowPauseRef.current[workflow.id]) {\n        await sleep(500);\n      }\n      setWorkflowRunStatus((prev) => ({\n        ...prev,\n        [workflow.id]: `Resuming workflow \"${workflow.name}\"`,\n      }));\n    };\n\n    try {\n      while (true) {\n        await waitWhilePaused();\n        if (isWorkflowCancelled(workflow.id)) {\n          cancelled = true;\n          break;\n        }\n\n        runCounter += 1;\n        const runLabel = `Run #${runCounter}`;\n\n        setWorkflowCompletedModules((prev) => ({ ...prev, [workflow.id]: [] }));\n        setWorkflowActiveModuleIndex((prev) => ({\n          ...prev,\n          [workflow.id]: workflow.modules.length > 0 ? 0 : null,\n        }));\n        setWorkflowRunStatus((prev) => ({\n          ...prev,\n          [workflow.id]: `Starting ${runLabel} (${workflowSummary}) on ${deviceIds.length} device${deviceIds.length === 1 ? '' : 's'}`,\n        }));\n\n        const deviceOutcomes: Record<string, { success: boolean; reasons: string[] }> = {};\n        deviceIds.forEach((deviceId) => {\n          deviceOutcomes[deviceId] = { success: true, reasons: [] };\n        });\n\n        for (let index = 0; index < workflow.modules.length; index += 1) {\n          await waitWhilePaused();\n          const module = workflow.modules[index];\n          if (isWorkflowCancelled(workflow.id)) {\n            cancelled = true;\n            break;\n          }\n          setWorkflowActiveModuleIndex((prev) => ({ ...prev, [workflow.id]: index }));\n          setWorkflowRunStatus((prev) => ({\n            ...prev,\n            [workflow.id]: `${runLabel}: running \"${module.name}\" on ${deviceIds.length} device${deviceIds.length === 1 ? '' : 's'}`,\n          }));\n\n        const { failures } = await executeModuleForDevices(\n            workflow,\n            module,\n            deviceIds,\n            normalizedBackendUrl,\n            normalizedRepeatCount,\n            durationSeconds,\n            runCounter,\n            workflowController.signal\n          );\n          failures.forEach(({ deviceId, reason }) => {\n            if (!deviceOutcomes[deviceId]) {\n              deviceOutcomes[deviceId] = { success: false, reasons: [reason] };\n            } else {\n              deviceOutcomes[deviceId].success = false;\n              deviceOutcomes[deviceId].reasons.push(`${module.name}: ${reason}`);\n            }\n          });\n\n          setWorkflowCompletedModules((prev) => {\n            const previous = prev[workflow.id] || [];\n            if (previous.includes(index)) {\n              return prev;\n            }\n            return {\n              ...prev,\n              [workflow.id]: [...previous, index],\n            };\n          });\n\n          const nextModule = workflow.modules[index + 1];\n          const shouldDelayBeforeNext =\n            index < workflow.modules.length - 1 &&\n            !isWaitingModule(module) &&\n            !isWaitingModule(nextModule);\n          if (shouldDelayBeforeNext) {\n            await sleep(2000);\n          }\n        }\n        if (cancelled) {\n          break;\n        }\n\n        const successes = deviceIds.filter((deviceId) => deviceOutcomes[deviceId]?.success !== false);\n        const failedDevices = deviceIds\n          .filter((deviceId) => deviceOutcomes[deviceId]?.success === false)\n          .map((deviceId) => ({\n            deviceId,\n            reason: deviceOutcomes[deviceId].reasons.join(' | ') || 'Execution failed.',\n          }));\n\n        const timestamp = new Date().toISOString();\n        if (successes.length > 0) {\n          recordWorkflowRun(workflow.id, timestamp);\n          successes.forEach((deviceId) => recordDeviceWorkflowRun(deviceId, workflow.id, workflow.name, timestamp));\n        } else {\n          updateStoredWorkflow(workflow.id, { lastRunAt: timestamp });\n        }\n        successes.forEach((deviceId) =>\n          recordDeviceActivity({\n            deviceId,\n            type: 'workflow',\n            label: workflow.name,\n            status: 'success',\n            referenceId: workflow.id,\n            timestamp,\n          })\n        );\n        failedDevices.forEach(({ deviceId, reason }) =>\n          recordDeviceActivity({\n            deviceId,\n            type: 'workflow',\n            label: workflow.name,\n            status: 'failure',\n            referenceId: workflow.id,\n            details: reason,\n            timestamp,\n          })\n        );\n        setWorkflows(getStoredWorkflows());\n\n        if (failedDevices.length === 0) {\n          setSnackbar({\n            severity: 'success',\n            message: `${runLabel} of \"${workflow.name}\" completed on ${successes.length} device${successes.length === 1 ? '' : 's'}.`,\n          });\n        } else if (successes.length > 0) {\n          const failedList = failedDevices.map((failure) => `${failure.deviceId}`).join(', ');\n          setSnackbar({\n            severity: 'warning',\n            message: `${runLabel} of \"${workflow.name}\" completed with warnings. Failed for: ${failedList}.`,\n          });\n        } else {\n          const failureReasons = failedDevices.map((failure) => `${failure.deviceId}: ${failure.reason}`).join(' | ');\n          setSnackbar({\n            severity: 'error',\n            message: `${runLabel} of \"${workflow.name}\" failed on all devices. ${failureReasons}`,\n          });\n        }\n        setWorkflowRunStatus((prev) => ({\n          ...prev,\n          [workflow.id]:\n            failedDevices.length === 0\n              ? `${runLabel} completed successfully.`\n              : successes.length > 0\n                ? `${runLabel} completed with warnings.`\n                : `${runLabel} failed.`,\n        }));\n\n        completedRuns = runCounter;\n\n        const elapsedMs = Date.now() - sessionStart;\n        const needMoreByCount = runCounter < normalizedRepeatCount;\n        const needMoreByDuration = durationSeconds > 0 && elapsedMs < durationWindowMs;\n        if (!(needMoreByCount || needMoreByDuration)) {\n          break;\n        }\n\n        setWorkflowRunStatus((prev) => ({\n          ...prev,\n          [workflow.id]: `${runLabel} completed. Preparing next run`,\n        }));\n        await sleep(1200);\n      }\n\n      if (cancelled) {\n        setWorkflowRunStatus((prev) => ({\n          ...prev,\n          [workflow.id]: `Workflow \"${workflow.name}\" cancelled after ${completedRuns} completed run${completedRuns === 1 ? '' : 's'}.`,\n        }));\n      } else {\n        setWorkflowRunStatus((prev) => ({\n          ...prev,\n          [workflow.id]: `Workflow \"${workflow.name}\" completed after ${completedRuns} run${completedRuns === 1 ? '' : 's'}.`,\n        }));\n      }\n      await sleep(1200);\n    } catch (error) {\n      cancelled = cancelled || isWorkflowCancelled(workflow.id);\n      if (cancelled) {\n        setSnackbar({\n          severity: 'info',\n          message: `Workflow \"${workflow.name}\" cancelled after ${completedRuns} completed run${completedRuns === 1 ? '' : 's'}.`,\n        });\n        setWorkflowRunStatus((prev) => ({\n          ...prev,\n          [workflow.id]: `Workflow \"${workflow.name}\" cancelled after ${completedRuns} completed run${completedRuns === 1 ? '' : 's'}.`,\n        }));\n      } else {\n        const message = error instanceof Error ? error.message : 'Unknown error while communicating with the backend.';\n        setSnackbar({ severity: 'error', message: `Failed to run workflow \"${workflow.name}\": ${message}` });\n        setWorkflowRunStatus((prev) => ({\n          ...prev,\n          [workflow.id]: `Workflow \"${workflow.name}\" failed${runCounter > 0 ? ` during run #${runCounter}` : ''}: ${message}`,\n        }));\n      }\n      await sleep(1200);\n    } finally {\n      clearWorkflowCancellation(workflow.id);\n      setWorkflowPauseRequests((prev) => {\n        const next = { ...prev };\n        delete next[workflow.id];\n        return next;\n      });\n      setRunningWorkflows((prev) => {\n        const next = { ...prev };\n        delete next[workflow.id];\n        return next;\n      });\n      setWorkflowActiveModuleIndex((prev) => {\n        const next = { ...prev };\n        delete next[workflow.id];\n        return next;\n      });\n      setWorkflowCompletedModules((prev) => {\n        const next = { ...prev };\n        delete next[workflow.id];\n        return next;\n      });\n      setWorkflowRunStatus((prev) => {\n        const next = { ...prev };\n        delete next[workflow.id];\n        return next;\n      });\n    }\n  };\n\n  const handlePauseWorkflow = (workflowId: string) => {\n    setWorkflowPaused(workflowId, true);\n  };\n\n  const handleResumeWorkflow = (workflowId: string) => {\n    setWorkflowPaused(workflowId, false);\n  };\n  const formatLastRun = (timestamp: string | null) => {\n    if (!timestamp) {\n      return 'Never';\n    }\n    const parsed = new Date(timestamp);\n    if (Number.isNaN(parsed.getTime())) {\n      return 'Never';\n    }\n    return parsed.toLocaleString();\n  };\n\n  return (\n    <Layout>\n      {/* Header */}\n      <Box sx={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        mb: 4\n      }}>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n          <Typography variant=\"h1\" sx={{\n            fontSize: '28px',\n            lineHeight: '36px',\n            fontWeight: 700,\n            color: '#0F172A',\n            mr: 2\n          }}>\n            Workflows\n          </Typography>\n          \n          <FormControl size=\"small\">\n            <Select\n              value={filterStatus}\n              onChange={(e) => setFilterStatus(e.target.value)}\n              sx={{\n                height: 36,\n                borderRadius: '10px',\n                '& .MuiOutlinedInput-notchedOutline': {\n                  borderColor: '#E5E7EB'\n                }\n              }}\n              IconComponent={ChevronDown}\n            >\n              <MenuItem value=\"all\">All Workflows ({totalWorkflows})</MenuItem>\n              <MenuItem value=\"active\">Active ({activeWorkflows.length})</MenuItem>\n              <MenuItem value=\"draft\">Draft ({draftWorkflows.length})</MenuItem>\n            </Select>\n          </FormControl>\n\n          <Chip\n            label={`${selectedDeviceIds.length} device${selectedDeviceIds.length === 1 ? '' : 's'} selected`}\n            size=\"small\"\n            sx={{\n              backgroundColor: '#EEF2FF',\n              color: '#2563EB',\n              fontWeight: 600\n            }}\n          />\n        </Box>\n\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n          <TextField\n            placeholder=\"Search workflows...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            sx={{\n              width: 300,\n              '& .MuiOutlinedInput-root': {\n                height: 40,\n                borderRadius: '10px',\n                '& fieldset': {\n                  borderColor: '#E5E7EB'\n                }\n              }\n            }}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <Search size={20} color=\"#6B7280\" />\n                </InputAdornment>\n              )\n            }}\n          />\n          \n          <Button\n            variant=\"contained\"\n            startIcon={<Plus size={20} />}\n            onClick={handleNewWorkflow}\n            sx={{\n              height: 40,\n              borderRadius: '10px',\n              backgroundColor: '#2563EB',\n              textTransform: 'none',\n              fontWeight: 600,\n              '&:hover': {\n                backgroundColor: '#1E48C7'\n              }\n            }}\n          >\n            New Workflow\n          </Button>\n        </Box>\n      </Box>\n\n      {/* Stats Cards */}\n      <Grid container spacing={3} sx={{ mb: 4 }}>\n        <Grid item xs={12} sm={6}>\n          <Card sx={{\n            backgroundColor: '#FFFFFF',\n            border: '1px solid #E5E7EB',\n            borderRadius: '16px',\n            boxShadow: '0 1px 2px rgba(16, 24, 40, 0.06)'\n          }}>\n            <CardContent sx={{ padding: '20px 24px' }}>\n              <Typography sx={{\n                fontSize: '16px',\n                lineHeight: '24px',\n                fontWeight: 600,\n                color: '#0F172A',\n                mb: 2\n              }}>\n                Total Workflows\n              </Typography>\n              <Typography sx={{\n                fontSize: '48px',\n                fontWeight: 700,\n                color: '#0F172A',\n                lineHeight: 1\n              }}>\n                {totalWorkflows}\n              </Typography>\n              <Typography sx={{\n                fontSize: '12px',\n                lineHeight: '18px',\n                fontWeight: 500,\n                color: '#6B7280',\n                mt: 1\n              }}>\n                {activeWorkflows.length} active, {draftWorkflows.length} draft\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n\n\n        <Grid item xs={12} sm={6}>\n          <Card sx={{\n            backgroundColor: '#FFFFFF',\n            border: '1px solid #E5E7EB',\n            borderRadius: '16px',\n            boxShadow: '0 1px 2px rgba(16, 24, 40, 0.06)'\n          }}>\n            <CardContent sx={{ padding: '20px 24px' }}>\n              <Typography sx={{\n                fontSize: '16px',\n                lineHeight: '24px',\n                fontWeight: 600,\n                color: '#0F172A',\n                mb: 2\n              }}>\n                Total Executions\n              </Typography>\n              <Typography sx={{\n                fontSize: '48px',\n                fontWeight: 700,\n                color: '#0F172A',\n                lineHeight: 1\n              }}>\n                {totalExecutions}\n              </Typography>\n              <Typography sx={{\n                fontSize: '12px',\n                lineHeight: '18px',\n                fontWeight: 500,\n                color: '#6B7280',\n                mt: 1\n              }}>\n                {mostRecentRunLabel ? `Last run ${mostRecentRunLabel}` : 'No runs recorded yet'}\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Workflows List */}\n      <Card sx={{\n        backgroundColor: '#FFFFFF',\n        border: '1px solid #E5E7EB',\n        borderRadius: '16px',\n        boxShadow: '0 1px 2px rgba(16, 24, 40, 0.06)'\n      }}>\n        <CardContent sx={{ padding: '20px 24px' }}>\n          <Typography sx={{\n            fontSize: '16px',\n            lineHeight: '24px',\n            fontWeight: 600,\n            color: '#0F172A',\n            mb: 3\n          }}>\n            Workflows\n          </Typography>\n          {scheduleFetchError && (\n            <Alert severity=\"warning\" sx={{ mb: 2 }}>\n              {scheduleFetchError}\n            </Alert>\n          )}\n\n          <Grid container spacing={3}>\n            {filteredWorkflows.map((workflow) => {\n              const statusStyle = getStatusColor(workflow.status);\n              const modulesCount = workflow.modules.length;\n              const estimatedDuration = `${Math.max(1, modulesCount * 2)}-${Math.max(1, modulesCount * 3)}m`;\n              const description = workflow.description && workflow.description.trim().length > 0\n                ? workflow.description\n                : 'No description provided.';\n              const modulePreview = workflow.modules.slice(0, 4).map((module, index) => {\n                const base = moduleCatalogMap.get(module.id);\n                const label = base?.name || module.name || module.id;\n                const paramCount = module.callTestParams ? Object.keys(module.callTestParams).length : 0;\n                const suffix = paramCount > 0 ? `  ${paramCount} param${paramCount > 1 ? 's' : ''}` : '';\n                return `${index + 1}. ${label}${suffix}`;\n              });\n              const extraModules = workflow.modules.length - modulePreview.length;\n              const isRunning = Boolean(runningWorkflows[workflow.id]);\n              const runStatusMessage = workflowRunStatus[workflow.id];\n              const activeModuleIndex = workflowActiveModuleIndex[workflow.id];\n              const completedModules = workflowCompletedModules[workflow.id] || [];\n              const repeatSettings = getRepeatSettingsForWorkflow(workflow.id);\n              return (\n                <Grid item xs={12} key={workflow.id}>\n                  <Card sx={{\n                    backgroundColor: '#F8FAFC',\n                    border: '1px solid #E5E7EB',\n                    borderRadius: '12px',\n                    transition: 'all 0.2s',\n                    '&:hover': {\n                      boxShadow: '0 4px 8px rgba(16, 24, 40, 0.12)',\n                      borderColor: '#2563EB'\n                    }\n                  }}>\n                    <CardContent sx={{ padding: '16px 20px' }}>\n                      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"flex-start\">\n                        <Box flex={1}>\n                          <Box display=\"flex\" alignItems=\"center\" gap={2} mb={1}>\n                            <Typography variant=\"h6\" sx={{\n                              fontSize: '16px',\n                              fontWeight: 600,\n                              color: '#0F172A'\n                            }}>\n                              {workflow.name}\n                            </Typography>\n                            <Chip\n                              label={workflow.status}\n                              size=\"small\"\n                              sx={{\n                                backgroundColor: statusStyle.bg,\n                                color: statusStyle.color,\n                                fontWeight: 600,\n                                fontSize: '11px',\n                                textTransform: 'capitalize'\n                              }}\n                            />\n                          </Box>\n                          \n                          <Typography variant=\"body2\" sx={{\n                            color: '#6B7280',\n                            mb: 2,\n                            fontSize: '14px'\n                          }}>\n                          {description}\n                        </Typography>\n\n                        {scheduleSummaries[workflow.id] && (\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 1.5,\n                              backgroundColor: '#E0F2FE',\n                              borderRadius: '10px',\n                              padding: '8px 12px',\n                              mb: 2,\n                            }}\n                          >\n                            <Typography sx={{ fontSize: '13px', color: '#0369A1', flex: 1 }}>\n                              Scheduled for {formatScheduleLabel(scheduleSummaries[workflow.id].nextRunAt)} {' '}\n                              {scheduleSummaries[workflow.id].deviceIds.length} device\n                              {scheduleSummaries[workflow.id].deviceIds.length === 1 ? '' : 's'}\n                            </Typography>\n                            <Button\n                              size=\"small\"\n                              variant=\"text\"\n                              color=\"warning\"\n                              onClick={() => handleCancelSchedule(workflow.id)}\n                              sx={{ textTransform: 'none' }}\n                            >\n                              Cancel\n                            </Button>\n                          </Box>\n                        )}\n\n                        <Stack direction=\"row\" spacing={1} sx={{ flexWrap: 'wrap', mb: 2 }}>\n                          {workflow.modules.map((module, moduleIndex) => {\n                            const isActive = activeModuleIndex === moduleIndex;\n                            const isCompleted = completedModules.includes(moduleIndex);\n                            const backgroundColor = isActive\n                              ? '#2563EB'\n                              : isCompleted\n                                ? '#D1FAE5'\n                                : '#E0E7FF';\n                            const color = isActive ? '#FFFFFF' : isCompleted ? '#065F46' : '#1E3A8A';\n                            const moduleLabel = `${moduleIndex + 1}. ${module.name}`;\n                            const uniqueKey = `${workflow.id}-${module.id}-${moduleIndex}`;\n                            const moduleTooltip = getModuleTooltipLabel(module);\n                            const chip = (\n                              <Chip\n                                label={moduleLabel}\n                                size=\"small\"\n                                sx={{\n                                  backgroundColor,\n                                  color,\n                                  mb: 1,\n                                  fontWeight: isActive ? 700 : 500,\n                                }}\n                              />\n                            );\n                            return (\n                              <ModuleTooltipWrapper key={uniqueKey} title={moduleTooltip}>\n                                {chip}\n                              </ModuleTooltipWrapper>\n                            );\n                          })}\n                        </Stack>\n\n                          <Box display=\"flex\" gap={4}>\n                            <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                              <Settings size={16} color=\"#6B7280\" />\n                              <Typography variant=\"caption\" sx={{ color: '#6B7280', fontSize: '12px' }}>\n                                {modulesCount} module{modulesCount === 1 ? '' : 's'}\n                              </Typography>\n                            </Box>\n                            <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                              <Clock size={16} color=\"#6B7280\" />\n                              <Typography variant=\"caption\" sx={{ color: '#6B7280', fontSize: '12px' }}>\n                                {estimatedDuration}\n                              </Typography>\n                            </Box>\n                            <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                              <CheckCircle size={16} color={workflow.runCount > 0 ? '#16A34A' : '#94A3B8'} />\n                              <Typography variant=\"caption\" sx={{ color: '#6B7280', fontSize: '12px' }}>\n                                {workflow.runCount} run{workflow.runCount === 1 ? '' : 's'}\n                              </Typography>\n                            </Box>\n                            <Typography variant=\"caption\" sx={{ color: '#6B7280', fontSize: '12px' }}>\n                              Last run: {formatLastRun(workflow.lastRunAt)}\n                            </Typography>\n                          </Box>\n                          {runStatusMessage && (\n                            <Typography variant=\"caption\" sx={{ color: '#2563EB', display: 'block', mt: 1 }}>\n                              {runStatusMessage}\n                            </Typography>\n                          )}\n                        </Box>\n\n                        <Box display=\"flex\" flexDirection=\"column\" alignItems=\"flex-end\" gap={1.5}>\n                          <Box display=\"flex\" gap={1}>\n                            <Tooltip title=\"Clone Workflow\">\n                              <IconButton\n                                onClick={() => handleCloneWorkflow(workflow)}\n                                sx={{\n                                  backgroundColor: '#E2E8F0',\n                                  color: '#0F172A',\n                                  width: 36,\n                                  height: 36,\n                                  '&:hover': {\n                                    backgroundColor: '#CBD5E1'\n                                  }\n                                }}\n                              >\n                                <Copy size={16} />\n                              </IconButton>\n                            </Tooltip>\n                            <Tooltip title=\"Schedule Workflow\">\n                              <IconButton\n                                onClick={() => handleOpenScheduleDialog(workflow)}\n                                sx={{\n                                  backgroundColor: '#E0E7FF',\n                                  color: '#1E3A8A',\n                                  width: 36,\n                                  height: 36,\n                                  '&:hover': {\n                                    backgroundColor: '#C7D2FE'\n                                  }\n                                }}\n                              >\n                                <Clock size={16} />\n                              </IconButton>\n                            </Tooltip>\n                            <Tooltip\n                              title={\n                                !isRunning\n                                  ? 'Run Workflow'\n                                  : isWorkflowPaused(workflow.id)\n                                    ? 'Resume Workflow'\n                                    : 'Pause Workflow'\n                              }\n                            >\n                              <IconButton\n                                onClick={() => {\n                                  if (!isRunning) {\n                                    handleRunWorkflow(workflow);\n                                  } else if (isWorkflowPaused(workflow.id)) {\n                                    handleResumeWorkflow(workflow.id);\n                                  } else {\n                                    handlePauseWorkflow(workflow.id);\n                                  }\n                                }}\n                                sx={{\n                                  backgroundColor: !isRunning\n                                    ? '#2563EB'\n                                    : isWorkflowPaused(workflow.id)\n                                      ? '#DCFCE7'\n                                      : '#FEF3C7',\n                                  color: !isRunning\n                                    ? '#FFFFFF'\n                                    : isWorkflowPaused(workflow.id)\n                                      ? '#15803D'\n                                      : '#B45309',\n                                  width: 36,\n                                  height: 36,\n                                  '&:hover': {\n                                    backgroundColor: !isRunning\n                                      ? '#1E48C7'\n                                      : isWorkflowPaused(workflow.id)\n                                        ? '#BBF7D0'\n                                        : '#FDE68A',\n                                  },\n                                }}\n                              >\n                                {!isRunning ? <Play size={16} /> : isWorkflowPaused(workflow.id) ? <Play size={16} /> : <Pause size={16} />}\n                              </IconButton>\n                            </Tooltip>\n                            {isRunning && (\n                            <Tooltip title=\"Cancel Workflow\">\n                              <IconButton\n                                onClick={() => handleStopWorkflow(workflow.id)}\n                                aria-label=\"Cancel workflow\"\n                                sx={{\n                                  backgroundColor: '#FEE2E2',\n                                  color: '#B91C1C',\n                                  width: 36,\n                                    height: 36,\n                                    '&:hover': {\n                                      backgroundColor: '#FECACA'\n                                    }\n                                  }}\n                                >\n                                  <StopCircle size={16} />\n                                </IconButton>\n                              </Tooltip>\n                            )}\n                            <Tooltip title=\"Edit Workflow\">\n                              <IconButton\n                                onClick={() => {\n                                  setEditingWorkflow(workflow);\n                                  setEditorOpen(true);\n                                }}\n                                sx={{\n                                  backgroundColor: '#F1F5F9',\n                                  color: '#475569',\n                                  width: 36,\n                                  height: 36,\n                                  '&:hover': {\n                                    backgroundColor: '#E2E8F0'\n                                  }\n                                }}\n                              >\n                                <Edit size={16} />\n                              </IconButton>\n                            </Tooltip>\n                            <Tooltip title=\"Delete Workflow\">\n                              <IconButton\n                                onClick={() => handleDeleteWorkflow(workflow)}\n                                disabled={isRunning}\n                                sx={{\n                                  backgroundColor: '#FEF2F2',\n                                  color: '#DC2626',\n                                  width: 36,\n                                  height: 36,\n                                  '&:hover': {\n                                    backgroundColor: '#FEE2E2'\n                                  }\n                                }}\n                              >\n                                <Trash2 size={16} />\n                              </IconButton>\n                            </Tooltip>\n                          </Box>\n                        </Box>\n                      </Box>\n                    </CardContent>\n                  </Card>\n                </Grid>\n              );\n            })}\n          </Grid>\n      </CardContent>\n    </Card>\n\n      <Dialog open={scheduleDialogOpen} onClose={handleScheduleDialogClose} fullWidth maxWidth=\"xs\">\n        <DialogTitle>Schedule Workflow</DialogTitle>\n        <DialogContent dividers>\n          <Stack spacing={2} sx={{ mt: 1 }}>\n            <Typography sx={{ color: '#0F172A', fontWeight: 600 }}>\n              {scheduleTargetWorkflow?.name ?? 'Select a workflow'}\n            </Typography>\n            <TextField\n              label=\"Delay before run (minutes)\"\n              type=\"number\"\n              value={scheduleDelayMinutes}\n              onChange={(event) => {\n                setScheduleDelayMinutes(event.target.value);\n                setScheduleDialogError(null);\n              }}\n              inputProps={{ min: 1 }}\n            />\n            {schedulePreviewTime && (\n              <Typography variant=\"caption\" sx={{ color: '#475569' }}>\n                Will run around {schedulePreviewTime}.\n              </Typography>\n            )}\n            <Typography variant=\"body2\" sx={{ color: '#475569' }}>\n              Devices targeted: {scheduleDeviceIds.length}\n            </Typography>\n            {scheduleDialogError && <Alert severity=\"error\">{scheduleDialogError}</Alert>}\n          </Stack>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleScheduleDialogClose}>Close</Button>\n          <Button variant=\"contained\" onClick={handleScheduleSave}>\n            Schedule\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n  <WorkflowEditorDialog\n        open={editorOpen}\n        workflow={editingWorkflow}\n        modulesCatalog={sortedModuleCatalog}\n        onClose={handleCloseEditor}\n        onSubmit={handleEditorSubmit}\n        repeatSettings={\n          editingWorkflow ? getRepeatSettingsForWorkflow(editingWorkflow.id) : DEFAULT_REPEAT_SETTINGS\n        }\n      />\n\n      <Snackbar\n        open={Boolean(snackbar)}\n        autoHideDuration={4000}\n        onClose={() => setSnackbar(null)}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n      >\n        {snackbar ? (\n          <Alert severity={snackbar.severity} onClose={() => setSnackbar(null)} sx={{ borderRadius: '8px' }}>\n            {snackbar.message}\n          </Alert>\n        ) : null}\n      </Snackbar>\n  </Layout>\n);\n};\n\ninterface WorkflowEditorDialogProps {\n  open: boolean;\n  workflow: StoredWorkflow | null;\n  modulesCatalog: ModuleMetadata[];\n  onClose: () => void;\n  onSubmit: (data: WorkflowEditorData, workflowId?: string) => void;\n  repeatSettings: RepeatDurationSettings;\n}\n\nconst WorkflowEditorDialog: React.FC<WorkflowEditorDialogProps> = ({\n  open,\n  workflow,\n  modulesCatalog,\n  onClose,\n  onSubmit,\n  repeatSettings: repeatSettingsProp,\n}) => {\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [selectedModules, setSelectedModules] = useState<ModuleMetadata[]>([]);\n  const [moduleToAdd, setModuleToAdd] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  const [repeatCountInput, setRepeatCountInput] = useState<string>(String(repeatSettingsProp.repeatCount));\n  const [durationValueInput, setDurationValueInput] = useState<string>(String(repeatSettingsProp.durationValue));\n  const [durationUnit, setDurationUnit] = useState<DurationUnit>(repeatSettingsProp.durationUnit);\n  const [draggingModuleIndex, setDraggingModuleIndex] = useState<number | null>(null);\n\n  useEffect(() => {\n    if (!open) {\n      return;\n    }\n    setName(workflow?.name ?? '');\n    setDescription(workflow?.description ?? '');\n    setSelectedModules((workflow?.modules ?? []).map((module) => cloneModuleForWorkflow(module)));\n    setModuleToAdd('');\n    setError(null);\n    setRepeatCountInput(String(repeatSettingsProp.repeatCount));\n    setDurationValueInput(String(repeatSettingsProp.durationValue));\n    setDurationUnit(repeatSettingsProp.durationUnit);\n  }, [open, workflow, repeatSettingsProp]);\n\n  const availableModules = useMemo(() => modulesCatalog, [modulesCatalog]);\n\n  const handleAddModule = () => {\n    if (!moduleToAdd) {\n      return;\n    }\n    const module = modulesCatalog.find((item) => item.id === moduleToAdd);\n    if (!module) {\n      return;\n    }\n    const hydratedModule =\n      module.id === WAITING_TIME_MODULE_ID\n        ? { ...module, waitDurationSeconds: getStoredWaitingTimeDuration() }\n        : module;\n    setSelectedModules((prev) => [...prev, cloneModuleForWorkflow(hydratedModule)]);\n    setModuleToAdd('');\n  };\n\n  const handleRemoveModule = (indexToRemove: number) => {\n    setSelectedModules((prev) => prev.filter((_, index) => index !== indexToRemove));\n  };\n\n  const moveModule = (index: number, direction: -1 | 1) => {\n    setSelectedModules((prev) => {\n      const newModules = [...prev];\n      const targetIndex = index + direction;\n      if (targetIndex < 0 || targetIndex >= newModules.length) {\n        return prev;\n      }\n      const temp = newModules[index];\n      newModules[index] = newModules[targetIndex];\n      newModules[targetIndex] = temp;\n      return newModules;\n    });\n  };\n\n  const reorderSelectedModulePositions = useCallback((sourceIndex: number, targetIndex: number) => {\n    setSelectedModules((prev) => {\n      if (\n        sourceIndex === targetIndex ||\n        sourceIndex < 0 ||\n        targetIndex < 0 ||\n        sourceIndex >= prev.length ||\n        targetIndex > prev.length\n      ) {\n        return prev;\n      }\n      const next = [...prev];\n      const [removed] = next.splice(sourceIndex, 1);\n      let destinationIndex = targetIndex;\n      if (sourceIndex < targetIndex) {\n        destinationIndex = Math.max(0, targetIndex - 1);\n      }\n      destinationIndex = Math.min(destinationIndex, next.length);\n      next.splice(destinationIndex, 0, removed);\n      return next;\n    });\n  }, []);\n\n  const handleModuleDragStart = (event: React.DragEvent<HTMLDivElement>, index: number) => {\n    event.dataTransfer.setData('text/plain', String(index));\n    event.dataTransfer.effectAllowed = 'move';\n    setDraggingModuleIndex(index);\n  };\n\n  const handleModuleDragOver = (event: React.DragEvent<HTMLDivElement>) => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  };\n\n  const handleModuleDrop = (event: React.DragEvent<HTMLDivElement>, targetIndex: number) => {\n    event.preventDefault();\n    const sourceIndexString = event.dataTransfer.getData('text/plain');\n    const sourceIndex = sourceIndexString !== '' ? Number(sourceIndexString) : draggingModuleIndex;\n    if (sourceIndex === null || Number.isNaN(sourceIndex)) {\n      setDraggingModuleIndex(null);\n      return;\n    }\n    reorderSelectedModulePositions(sourceIndex, targetIndex);\n    setDraggingModuleIndex(null);\n  };\n\n  const handleModuleDragEnd = () => {\n    setDraggingModuleIndex(null);\n  };\n\n  const handleWaitDurationChange = (index: number, value: number) => {\n    setSelectedModules((prev) => {\n      const next = [...prev];\n      if (!next[index]) {\n        return prev;\n      }\n      next[index] = {\n        ...next[index],\n        waitDurationSeconds: sanitizeWaitDurationSeconds(value),\n      };\n      return next;\n    });\n  };\n\n  const handleSave = () => {\n    if (!name.trim()) {\n      setError('Workflow name is required.');\n      return;\n    }\n    if (selectedModules.length === 0) {\n      setError('Add at least one module.');\n      return;\n    }\n    setError(null);\n    const normalizedDescription = description.trim();\n    const descriptionValue = normalizedDescription.length > 0 ? normalizedDescription : '';\n    const parsedRepeat = Number.parseInt(repeatCountInput, 10);\n    const parsedDuration = Number.parseInt(durationValueInput, 10);\n    const normalizedRepeat = Number.isFinite(parsedRepeat) && parsedRepeat >= 1 ? Math.trunc(parsedRepeat) : 1;\n    const normalizedDuration =\n      Number.isFinite(parsedDuration) && parsedDuration >= 0 ? Math.trunc(parsedDuration) : 0;\n\n    onSubmit(\n      {\n        name: name.trim(),\n        description: descriptionValue,\n        modules: selectedModules.map((module) => cloneModuleForWorkflow(module)),\n        repeatSettings: {\n          repeatCount: normalizedRepeat,\n          durationValue: normalizedDuration,\n          durationUnit,\n        },\n      },\n      workflow?.id\n    );\n  };\n\n  return (\n    <Dialog open={open} onClose={onClose} fullWidth maxWidth=\"sm\">\n      <DialogTitle>{workflow ? 'Edit Workflow' : 'New Workflow'}</DialogTitle>\n      <DialogContent>\n        <Stack spacing={2} sx={{ mt: 1 }}>\n          <TextField\n            label=\"Workflow name\"\n            value={name}\n            onChange={(event) => setName(event.target.value)}\n            fullWidth\n            autoFocus\n          />\n          <TextField\n            label=\"Description\"\n            value={description}\n            onChange={(event) => setDescription(event.target.value)}\n            fullWidth\n            multiline\n            minRows={2}\n          />\n          <Typography variant=\"subtitle2\" sx={{ color: '#0F172A' }}>\n            Repeat\n          </Typography>\n          <TextField\n            label=\"Repeat count\"\n            type=\"number\"\n            value={repeatCountInput}\n            onChange={(event) => {\n              setRepeatCountInput(event.target.value);\n            }}\n            inputProps={{ min: 1 }}\n            fullWidth\n          />\n\n          <Typography variant=\"subtitle2\" sx={{ color: '#0F172A' }}>\n            Duration\n          </Typography>\n          <Stack direction=\"row\" spacing={1}>\n            <TextField\n              label=\"Keep running\"\n              type=\"number\"\n              value={durationValueInput}\n              onChange={(event) => {\n                setDurationValueInput(event.target.value);\n              }}\n              inputProps={{ min: 0 }}\n              sx={{ flex: 1 }}\n            />\n            <FormControl size=\"small\" sx={{ minWidth: 120 }}>\n              <Select\n                value={durationUnit}\n                onChange={(event) => setDurationUnit(event.target.value as DurationUnit)}\n              >\n                <MenuItem value=\"minutes\">Minutes</MenuItem>\n                <MenuItem value=\"hours\">Hours</MenuItem>\n                <MenuItem value=\"days\">Days</MenuItem>\n              </Select>\n            </FormControl>\n          </Stack>\n\n          <Typography variant=\"subtitle2\" sx={{ color: '#0F172A' }}>\n            Modules\n          </Typography>\n\n          <Stack direction=\"row\" spacing={1} alignItems=\"center\">\n            <FormControl fullWidth size=\"small\">\n              <Select\n                value={moduleToAdd}\n                onChange={(event) => setModuleToAdd(event.target.value)}\n                displayEmpty\n              >\n                <MenuItem value=\"\" disabled>\n                  Select module\n                </MenuItem>\n                {availableModules.map((module) => (\n                  <MenuItem key={module.id} value={module.id}>\n                    {module.name}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n            <Button\n              variant=\"outlined\"\n              onClick={handleAddModule}\n              disabled={!moduleToAdd}\n              sx={{ textTransform: 'none' }}\n            >\n              Add\n            </Button>\n          </Stack>\n\n          {selectedModules.length === 0 ? (\n            <Typography variant=\"body2\" sx={{ color: '#6B7280' }}>\n              No modules selected yet.\n            </Typography>\n          ) : (\n            <Stack spacing={1}>\n              {selectedModules.map((module, index) => {\n                const moduleTooltip = getModuleTooltipLabel(module);\n                const row = (\n                  <Box\n                    draggable\n                    onDragStart={(event) => handleModuleDragStart(event, index)}\n                    onDragOver={handleModuleDragOver}\n                    onDrop={(event) => handleModuleDrop(event, index)}\n                    onDragEnd={handleModuleDragEnd}\n                    sx={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'space-between',\n                      gap: 2,\n                      backgroundColor: '#F8FAFC',\n                      border: `1px ${draggingModuleIndex === index ? 'dashed' : 'solid'} #E5E7EB`,\n                      borderRadius: '8px',\n                      padding: '8px 12px',\n                      cursor: 'grab',\n                      opacity: draggingModuleIndex === index ? 0.85 : 1,\n                    }}\n                  >\n                    <Box sx={{ flex: 1 }}>\n                      <Typography sx={{ fontWeight: 500, color: '#0F172A' }}>\n                        {index + 1}. {module.name}\n                      </Typography>\n                      {isWaitingModule(module) ? (\n                        <Typography variant=\"caption\" sx={{ color: '#475569' }}>\n                          Wait {module.waitDurationSeconds ?? DEFAULT_WAIT_DURATION_SECONDS} second(s)\n                        </Typography>\n                      ) : null}\n                    </Box>\n                    <Stack direction=\"row\" spacing={1} alignItems=\"center\">\n                      {isWaitingModule(module) ? (\n                        <TextField\n                          size=\"small\"\n                          type=\"number\"\n                          label=\"Seconds\"\n                          value={module.waitDurationSeconds ?? DEFAULT_WAIT_DURATION_SECONDS}\n                          onChange={(event) => {\n                            const parsed = Number(event.target.value);\n                            if (Number.isFinite(parsed)) {\n                              handleWaitDurationChange(index, parsed);\n                            }\n                          }}\n                          inputProps={{ min: MIN_WAIT_DURATION_SECONDS, max: MAX_WAIT_DURATION_SECONDS }}\n                          sx={{ width: 120 }}\n                        />\n                      ) : null}\n                      <IconButton\n                        size=\"small\"\n                        onClick={() => moveModule(index, -1)}\n                        disabled={index === 0}\n                      >\n                        <ArrowUp size={16} />\n                      </IconButton>\n                      <IconButton\n                        size=\"small\"\n                        onClick={() => moveModule(index, 1)}\n                        disabled={index === selectedModules.length - 1}\n                      >\n                        <ArrowDown size={16} />\n                      </IconButton>\n                      <IconButton size=\"small\" onClick={() => handleRemoveModule(index)}>\n                        <X size={16} />\n                      </IconButton>\n                    </Stack>\n                  </Box>\n                );\n                return (\n                  <ModuleTooltipWrapper key={`${module.id}-${index}`} title={moduleTooltip}>\n                    {row}\n                  </ModuleTooltipWrapper>\n                );\n              })}\n              <Box\n                sx={{\n                  border: draggingModuleIndex === null ? '1px dashed transparent' : '1px dashed #CBD5F5',\n                  borderRadius: '8px',\n                  padding: '6px',\n                  textAlign: 'center',\n                  color: '#94A3B8',\n                  fontSize: '12px',\n                  transition: 'border-color 0.2s ease, color 0.2s ease',\n                }}\n                onDragOver={handleModuleDragOver}\n                onDrop={(event) => handleModuleDrop(event, selectedModules.length)}\n              >\n                {draggingModuleIndex === null ? 'Drag to reorder modules' : 'Drop here to move to the end'}\n              </Box>\n            </Stack>\n          )}\n\n          {error ? <Alert severity=\"error\">{error}</Alert> : null}\n        </Stack>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} sx={{ textTransform: 'none' }}>\n          Cancel\n        </Button>\n        <Button variant=\"contained\" onClick={handleSave} sx={{ textTransform: 'none' }}>\n          Save\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default FlowComposer;\n"],"names":["CircleCheckBig","createLucideIcon","d","key","SELECTED_DEVICES_STORAGE_KEY","LEGACY_SELECTED_DEVICE_KEY","SELECTED_DEVICES_EVENT","normalizeIds","value","Array","isArray","filter","id","trim","length","parsed","JSON","parse","_unused","trimmed","readSelectedDeviceIds","window","localStorage","stored","getItem","ids","from","Set","legacy","legacyIds","writeSelectedDeviceIds","removeItem","error","console","warn","uniqueIds","setItem","stringify","dispatchEvent","CustomEvent","detail","toggleSelectedDeviceId","deviceId","set","has","delete","add","_ref","children","navigate","useNavigate","location","useLocation","appMenuAnchor","setAppMenuAnchor","useState","historyIndex","setHistoryIndex","_window$history$state","_window$history$state2","history","state","idx","historyLength","setHistoryLength","useEffect","_window$history$state3","_window$history$state4","handlePopState","_window$history$state5","_window$history$state6","addEventListener","removeEventListener","canGoBack","canGoForward","handleCloseMenu","handleMenuClick","action","alert","open","faq","updates","manual","_jsxs","Box","sx","display","minHeight","backgroundColor","fontFamily","width","background","padding","flexDirection","position","top","height","mb","pb","borderBottom","_jsx","Typography","variant","color","fontWeight","fontSize","lineHeight","flex","label","icon","Grid3X3","size","path","Puzzle","Zap","Smartphone","map","item","index","isActive","pathname","onClick","borderRadius","alignItems","gap","cursor","textAlign","mt","Chip","IconButton","event","currentTarget","Info","Menu","anchorEl","Boolean","onClose","MenuItem","maxWidth","margin","justifyContent","disabled","border","ChevronLeft","ChevronRight","ChevronDown","Plus","Settings","cx","cy","r","Clock","Copy","x","y","rx","ry","Pause","CircleStop","SquarePen","Trash2","ArrowUp","ArrowDown","X","GLOBAL_CALL_TEST_KEY","WORKFLOW_BACKEND_MAP_KEY","CALL_TEST_DEFAULTS","countryCode","phoneNumber","duration","callCount","WAITING_TIME_MODULE_ID","REPEAT_UNIT_TO_SECONDS","minutes","hours","days","DEFAULT_REPEAT_SETTINGS","repeatCount","durationValue","durationUnit","sanitizeCallTestValues","values","_values$countryCode","_values$phoneNumber","_values$duration","_values$callCount","countryDigits","replace","concat","Math","max","min","Number","resolveCallTestValuesForDevice","readCallTestStorageMap","raw","entries","Object","forEach","resolveCallTestValuesForModule","module","callTestParams","sleep","ms","Promise","resolve","setTimeout","isWaitingModule","describeCallTestModule","_values$callCount2","numberLabel","join","formatCallTestNumber","attempts","attemptLabel","getModuleTooltipLabel","_module$waitDurationS","waitDurationSeconds","describeWaitingModule","description","ModuleTooltipWrapper","_ref2","title","Tooltip","sanitizeWaitDurationSeconds","candidate","isFinite","rounded","round","getStoredWaitingTimeDuration","cloneModuleForWorkflow","cloned","_objectSpread","effectiveDuration","WorkflowEditorDialog","_ref9","workflow","modulesCatalog","onSubmit","repeatSettings","repeatSettingsProp","name","setName","setDescription","selectedModules","setSelectedModules","moduleToAdd","setModuleToAdd","setError","repeatCountInput","setRepeatCountInput","String","durationValueInput","setDurationValueInput","setDurationUnit","draggingModuleIndex","setDraggingModuleIndex","_workflow$name","_workflow$description","_workflow$modules","modules","availableModules","useMemo","moveModule","direction","prev","newModules","targetIndex","temp","reorderSelectedModulePositions","useCallback","sourceIndex","next","removed","splice","destinationIndex","handleModuleDragOver","preventDefault","dataTransfer","dropEffect","handleModuleDrop","sourceIndexString","getData","isNaN","handleModuleDragEnd","Dialog","fullWidth","DialogTitle","DialogContent","Stack","spacing","TextField","onChange","target","autoFocus","multiline","minRows","type","inputProps","FormControl","minWidth","Select","displayEmpty","Button","handleAddModule","find","hydratedModule","textTransform","_module$waitDurationS2","_module$waitDurationS3","moduleTooltip","row","draggable","onDragStart","handleModuleDragStart","setData","effectAllowed","onDragOver","onDrop","onDragEnd","opacity","handleWaitDurationChange","handleRemoveModule","indexToRemove","_","transition","Alert","severity","DialogActions","handleSave","normalizedDescription","descriptionValue","parsedRepeat","parseInt","parsedDuration","normalizedRepeat","trunc","normalizedDuration","_ref4","_scheduleTargetWorkfl","backendUrl","searchQuery","setSearchQuery","filterStatus","setFilterStatus","workflows","setWorkflows","getStoredWorkflows","editorOpen","setEditorOpen","editingWorkflow","setEditingWorkflow","snackbar","setSnackbar","selectedDeviceIds","setSelectedDeviceIds","runningWorkflows","setRunningWorkflows","workflowRunStatus","setWorkflowRunStatus","workflowActiveModuleIndex","setWorkflowActiveModuleIndex","workflowCompletedModules","setWorkflowCompletedModules","workflowPauseRequests","setWorkflowPauseRequests","workflowPauseRef","useRef","workflowRepeatSettings","setWorkflowRepeatSettings","workflowCancelRequests","setWorkflowCancelRequests","workflowCancelControllers","serverSchedules","setServerSchedules","scheduleFetchError","setScheduleFetchError","scheduleDialogOpen","setScheduleDialogOpen","scheduleTargetWorkflow","setScheduleTargetWorkflow","scheduleDelayMinutes","setScheduleDelayMinutes","scheduleDialogError","setScheduleDialogError","scheduleDeviceIds","setScheduleDeviceIds","workflowBackendMap","setWorkflowBackendMap","readWorkflowBackendMap","_ref3","localId","backendId","backendWorkflowIds","setBackendWorkflowIds","moduleCatalogMap","Map","MODULE_CATALOG","m","normalizedBackendUrl","schedulePreviewTime","Date","now","toLocaleString","hour","minute","handleCloneWorkflow","cloneName","addStoredWorkflow","runCount","lastRunAt","message","syncWorkflows","WORKFLOWS_STORAGE_EVENT","syncSelection","current","getRepeatSettingsForWorkflow","workflowId","_workflowRepeatSettin","updateRepeatSettingsForWorkflow","patch","_prev$workflowId","setWorkflowPaused","paused","isWorkflowPaused","markWorkflowCancelled","clearWorkflowCancellation","isWorkflowCancelled","handleStopWorkflow","controller","abort","sortedModuleCatalog","sort","a","b","localeCompare","sortedWorkflows","updatedAt","totalWorkflows","activeWorkflows","status","draftWorkflows","totalExecutions","reduce","sum","mostRecentRunAt","latest","mostRecentRunLabel","getTime","filteredWorkflows","matchesStatus","query","toLowerCase","matchesSearch","includes","fetchWorkflowSchedules","async","response","fetch","signal","ok","text","Error","payload","json","aborted","AbortController","interval","setInterval","clearInterval","scheduleSummaries","grouped","backendToLocal","acc","_ref5","entry","_grouped$localWorkflo","localWorkflowId","workflow_id","bucket","deviceIds","scheduleIds","nextRunAt","run_at","push","device_id","ensureBackendWorkflow","existing","method","headers","body","wf","backendIdSet","changed","_ref6","syncBackendState","missing","cancelled","handleOpenScheduleDialog","devices","handleScheduleDialogClose","handleScheduleSave","parsedMinutes","runAtIso","toISOString","attemptSchedule","device_ids","retry","backendWorkflowId","scheduleResult","toLocaleTimeString","handleCancelSchedule","summary","all","scheduleId","formatScheduleLabel","iso","date","handleCloseEditor","executeModuleForDevices","repeatCountMeta","durationSecondsMeta","runIteration","abortSignal","waitSeconds","successes","failures","apiModuleId","moduleId","reason","results","allSettled","_buildModuleParameter","parameters","buildModuleParametersForDevice","number","call_count","calls","workflow_name","module_id","repeat_count","duration_seconds","run_iteration","data","dataStatus","success","result","handleRunWorkflow","_repeatSettings$durat","_repeatSettings$durat2","workflowSummary","normalizedRepeatCount","durationSeconds","unit","convertDurationToSeconds","workflowController","sessionStart","durationWindowMs","runCounter","completedRuns","waitWhilePaused","runLabel","deviceOutcomes","reasons","_ref7","previous","nextModule","_deviceOutcomes$devic","failedDevices","_deviceOutcomes$devic2","timestamp","recordWorkflowRun","recordDeviceWorkflowRun","updateStoredWorkflow","recordDeviceActivity","referenceId","_ref8","details","failedList","failure","failureReasons","elapsedMs","formatLastRun","Layout","mr","e","borderColor","IconComponent","placeholder","InputProps","startAdornment","InputAdornment","Search","startIcon","handleNewWorkflow","Grid","container","xs","sm","Card","boxShadow","CardContent","statusStyle","bg","modulesCount","estimatedDuration","modulePreview","slice","base","get","paramCount","keys","suffix","isRunning","runStatusMessage","activeModuleIndex","completedModules","flexWrap","moduleIndex","isCompleted","moduleLabel","uniqueKey","chip","CheckCircle","handlePauseWorkflow","Play","StopCircle","Edit","confirm","deleteStoredWorkflow","handleDeleteWorkflow","dividers","handleEditorSubmit","_data$description$tri","_data$description","sanitizedRepeat","created","Snackbar","autoHideDuration","anchorOrigin","vertical","horizontal"],"sourceRoot":""}