{"version":3,"file":"static/js/542.366743e2.chunk.js","mappings":"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","sources":["utils/deviceMetadata.ts","utils/deviceSelection.ts","utils/deviceRegistry.ts","utils/telemetry.ts","pages/Dashboard.tsx","styles/dashboardTheme.ts","services/deviceApi.ts","utils/deviceCache.ts","services/websocket.ts","hooks/useDevices.ts","services/utils.ts"],"sourcesContent":["export const DEVICE_METADATA_STORAGE_KEY = 'deviceManagerMetadata';\nexport const DEVICE_METADATA_EVENT = 'deviceMetadataUpdated';\n\nexport interface DeviceChecklistItem {\n  id: string;\n  label: string;\n  done: boolean;\n}\n\nexport interface DeviceMetadata {\n  alias?: string;\n  tags?: string[];\n  notes?: string;\n  pinned?: boolean;\n  checklist?: DeviceChecklistItem[];\n}\n\nexport type DeviceMetadataMap = Record<string, DeviceMetadata>;\n\nconst sanitizeTags = (tags?: unknown): string[] => {\n  if (!Array.isArray(tags)) {\n    return [];\n  }\n  return tags\n    .filter((tag): tag is string => typeof tag === 'string')\n    .map((tag) => tag.trim())\n    .filter((tag) => tag.length > 0);\n};\n\nconst defaultChecklist: DeviceChecklistItem[] = [\n  { id: 'drivers', label: 'Drivers installed', done: false },\n  { id: 'usb_debugging', label: 'USB debugging enabled', done: false },\n  { id: 'sim_ready', label: 'SIM ready', done: false },\n];\n\nconst sanitizeChecklist = (checklist?: unknown): DeviceChecklistItem[] => {\n  if (!Array.isArray(checklist)) {\n    return defaultChecklist.map((item) => ({ ...item }));\n  }\n  return defaultChecklist.map((item) => {\n    const existing = checklist.find(\n      (entry): entry is DeviceChecklistItem =>\n        entry && typeof entry === 'object' && (entry as DeviceChecklistItem).id === item.id\n    );\n    if (existing) {\n      return {\n        id: existing.id,\n        label: typeof existing.label === 'string' ? existing.label : item.label,\n        done: Boolean(existing.done),\n      };\n    }\n    return { ...item };\n  });\n};\n\nexport const normalizeDeviceMetadata = (meta?: DeviceMetadata | null): DeviceMetadata => ({\n  alias: typeof meta?.alias === 'string' ? meta.alias : '',\n  tags: sanitizeTags(meta?.tags),\n  notes: typeof meta?.notes === 'string' ? meta.notes : '',\n  pinned: Boolean(meta?.pinned),\n  checklist: sanitizeChecklist(meta?.checklist),\n});\n\nexport const DEFAULT_DEVICE_METADATA: DeviceMetadata = normalizeDeviceMetadata();\n\nexport const readDeviceMetadata = (): DeviceMetadataMap => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return {};\n  }\n  try {\n    const raw = window.localStorage.getItem(DEVICE_METADATA_STORAGE_KEY);\n    if (!raw) {\n      return {};\n    }\n    const parsed = JSON.parse(raw);\n    if (!parsed || typeof parsed !== 'object') {\n      return {};\n    }\n    const next: DeviceMetadataMap = {};\n    Object.entries(parsed as Record<string, DeviceMetadata>).forEach(([deviceId, meta]) => {\n      next[deviceId] = normalizeDeviceMetadata(meta);\n    });\n    return next;\n  } catch (error) {\n    console.warn('[deviceMetadata] Failed to read metadata', error);\n    return {};\n  }\n};\n\nexport const writeDeviceMetadata = (metadata: DeviceMetadataMap): void => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return;\n  }\n  try {\n    window.localStorage.setItem(DEVICE_METADATA_STORAGE_KEY, JSON.stringify(metadata));\n    window.dispatchEvent(new Event(DEVICE_METADATA_EVENT));\n  } catch (error) {\n    console.warn('[deviceMetadata] Failed to persist metadata', error);\n  }\n};\n\nexport const readDeviceAliasMap = (): Record<string, string> => {\n  const metadata = readDeviceMetadata();\n  const aliasMap: Record<string, string> = {};\n  Object.entries(metadata).forEach(([deviceId, meta]) => {\n    const alias = meta.alias?.trim();\n    if (alias) {\n      aliasMap[deviceId] = alias;\n    }\n  });\n  return aliasMap;\n};\n","export const SELECTED_DEVICES_STORAGE_KEY = 'selectedDeviceIds';\nconst LEGACY_SELECTED_DEVICE_KEY = 'selectedDeviceId';\nexport const SELECTED_DEVICES_EVENT = 'selected-devices:updated';\n\nconst normalizeIds = (value: unknown): string[] => {\n  if (!value) {\n    return [];\n  }\n  if (Array.isArray(value)) {\n    return value.filter((id): id is string => typeof id === 'string' && id.trim().length > 0);\n  }\n  if (typeof value === 'string') {\n    try {\n      const parsed = JSON.parse(value);\n      if (Array.isArray(parsed)) {\n        return normalizeIds(parsed);\n      }\n    } catch {\n      const trimmed = value.trim();\n      if (trimmed.length > 0) {\n        return [trimmed];\n      }\n    }\n  }\n  return [];\n};\n\nexport const readSelectedDeviceIds = (): string[] => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return [];\n  }\n  try {\n    const stored = window.localStorage.getItem(SELECTED_DEVICES_STORAGE_KEY);\n    const ids = normalizeIds(stored);\n    if (ids.length > 0) {\n      return Array.from(new Set(ids));\n    }\n    const legacy = window.localStorage.getItem(LEGACY_SELECTED_DEVICE_KEY);\n    const legacyIds = normalizeIds(legacy);\n    if (legacyIds.length > 0) {\n      writeSelectedDeviceIds(legacyIds);\n      window.localStorage.removeItem(LEGACY_SELECTED_DEVICE_KEY);\n      return legacyIds;\n    }\n  } catch (error) {\n    console.warn('[deviceSelection] Failed to read selected devices', error);\n  }\n  return [];\n};\n\nexport const writeSelectedDeviceIds = (ids: string[]) => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return;\n  }\n  try {\n    const uniqueIds = Array.from(new Set(ids.filter((id) => typeof id === 'string' && id.trim().length > 0)));\n    window.localStorage.setItem(SELECTED_DEVICES_STORAGE_KEY, JSON.stringify(uniqueIds));\n    window.dispatchEvent(new CustomEvent(SELECTED_DEVICES_EVENT, { detail: uniqueIds }));\n  } catch (error) {\n    console.warn('[deviceSelection] Failed to persist selected devices', error);\n  }\n};\n\nexport const clearSelectedDeviceIds = () => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return;\n  }\n  try {\n    window.localStorage.removeItem(SELECTED_DEVICES_STORAGE_KEY);\n    window.dispatchEvent(new CustomEvent(SELECTED_DEVICES_EVENT, { detail: [] }));\n  } catch (error) {\n    console.warn('[deviceSelection] Failed to clear selected devices', error);\n  }\n};\n\nexport const toggleSelectedDeviceId = (ids: string[], deviceId: string): string[] => {\n  const set = new Set(ids);\n  if (set.has(deviceId)) {\n    set.delete(deviceId);\n  } else {\n    set.add(deviceId);\n  }\n  return Array.from(set);\n};\n","import { Device } from '@types';\n\nexport interface DeviceRegistryEntry {\n  id: string;\n  model?: string;\n  connectionType?: string;\n  lastStatus?: string;\n  firstSeen: string;\n  lastSeen: string;\n}\n\nexport type DeviceRegistryMap = Record<string, DeviceRegistryEntry>;\n\nexport const DEVICE_REGISTRY_STORAGE_KEY = 'deviceRegistry';\nexport const DEVICE_REGISTRY_EVENT = 'deviceRegistry:updated';\n\nconst emitRegistryUpdate = () => {\n  if (typeof window !== 'undefined') {\n    window.dispatchEvent(new CustomEvent(DEVICE_REGISTRY_EVENT));\n  }\n};\n\nconst readRegistryInternal = (): DeviceRegistryMap => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return {};\n  }\n  try {\n    const raw = window.localStorage.getItem(DEVICE_REGISTRY_STORAGE_KEY);\n    if (!raw) {\n      return {};\n    }\n    const parsed = JSON.parse(raw);\n    if (parsed && typeof parsed === 'object') {\n      return parsed as DeviceRegistryMap;\n    }\n  } catch (error) {\n    console.warn('[deviceRegistry] Failed to read registry', error);\n  }\n  return {};\n};\n\nconst persistRegistry = (registry: DeviceRegistryMap) => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return;\n  }\n  try {\n    window.localStorage.setItem(DEVICE_REGISTRY_STORAGE_KEY, JSON.stringify(registry));\n    emitRegistryUpdate();\n  } catch (error) {\n    console.warn('[deviceRegistry] Failed to persist registry', error);\n  }\n};\n\nexport const readDeviceRegistry = (): DeviceRegistryMap => {\n  return readRegistryInternal();\n};\n\nconst entriesEqual = (a: DeviceRegistryEntry, b: DeviceRegistryEntry): boolean => {\n  return (\n    a.model === b.model &&\n    a.connectionType === b.connectionType &&\n    a.lastStatus === b.lastStatus &&\n    a.firstSeen === b.firstSeen &&\n    a.lastSeen === b.lastSeen\n  );\n};\n\nexport const syncDevicesToRegistry = (devices: Device[]): void => {\n  if (!devices || devices.length === 0) {\n    return;\n  }\n  const registry = readRegistryInternal();\n  let changed = false;\n  const now = new Date().toISOString();\n\n  devices.forEach((device) => {\n    if (!device?.id) {\n      return;\n    }\n    const existing = registry[device.id];\n    const entry: DeviceRegistryEntry = {\n      id: device.id,\n      model: device.model || existing?.model,\n      connectionType: device.connection_type || existing?.connectionType,\n      lastStatus: device.status || existing?.lastStatus,\n      firstSeen: existing?.firstSeen ?? now,\n      lastSeen: now,\n    };\n    if (!existing || !entriesEqual(existing, entry)) {\n      registry[device.id] = entry;\n      changed = true;\n    }\n  });\n\n  if (changed) {\n    persistRegistry(registry);\n  }\n};\n","type TelemetryEventName =\n  | 'dashboard_viewed'\n  | 'search_used'\n  | 'scan_again_clicked'\n  | 'add_devices_clicked'\n  | 'dashboard_activity_cleared';\n\ntype TelemetryPayload = Record<string, unknown> | undefined;\n\nconst sendViaNavigator = (event: TelemetryEventName, payload: TelemetryPayload) => {\n  if (typeof navigator === 'undefined' || typeof navigator.sendBeacon !== 'function') {\n    return false;\n  }\n  try {\n    const blob = new Blob(\n      [JSON.stringify({ event, payload, ts: new Date().toISOString() })],\n      { type: 'application/json' }\n    );\n    navigator.sendBeacon('/api/v1/telemetry', blob);\n    return true;\n  } catch {\n    return false;\n  }\n};\n\nclass TelemetryClient {\n  track(event: TelemetryEventName, payload?: TelemetryPayload): void {\n    if (typeof window === 'undefined') {\n      return;\n    }\n    try {\n      if (window.electronAPI?.trackEvent) {\n        window.electronAPI.trackEvent(event, payload ?? {});\n        return;\n      }\n      if (sendViaNavigator(event, payload)) {\n        return;\n      }\n    } catch (error) {\n      console.debug('[telemetry] failed to send event', event, error);\n      return;\n    }\n    console.debug('[telemetry]', event, payload ?? {});\n  }\n}\n\nexport const telemetry = new TelemetryClient();\n","import React, { useState, useEffect, useMemo, useRef, useCallback } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport {\n  Box,\n  Typography,\n  Button,\n  TextField,\n  InputAdornment,\n  Card,\n  CardContent,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Chip,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Divider,\n  IconButton,\n  Snackbar,\n  Alert,\n  CircularProgress,\n  Paper,\n  Checkbox,\n  Tooltip,\n  Menu,\n  MenuItem,\n  Stack,\n} from '@mui/material';\nimport { \n  Search,\n  Grid3X3,\n  Smartphone,\n  RefreshCw,\n  Zap,\n  Puzzle,\n  CheckCircle,\n  Wifi,\n  AlertTriangle,\n  Battery,\n  Square,\n  CheckSquare,\n  Signal,\n  ChevronLeft,\n  ChevronRight,\n  Info,\n  GitBranch,\n  Play,\n  Pencil\n} from 'lucide-react';\n\nimport { useDevices } from '../hooks/useDevices';\nimport { getStoredWorkflows, WORKFLOWS_STORAGE_EVENT, StoredWorkflow } from '../utils/workflows';\nimport {\n  readSelectedDeviceIds,\n  writeSelectedDeviceIds,\n  toggleSelectedDeviceId,\n  SELECTED_DEVICES_EVENT,\n} from '../utils/deviceSelection';\nimport { resolveBaseUrl } from '../services/utils';\nimport { deviceApi } from '../services/deviceApi';\nimport { Device } from '../types';\nimport { MODULE_CATALOG } from '../data/modules';\nimport { getAllDeviceWorkflowHistories, DEVICE_HISTORY_EVENT, clearDeviceWorkflowHistory } from '../utils/deviceHistory';\nimport {\n  readDeviceAliasMap,\n  readDeviceMetadata,\n  writeDeviceMetadata,\n  normalizeDeviceMetadata,\n  DEFAULT_DEVICE_METADATA,\n  DEVICE_METADATA_EVENT,\n  DEVICE_METADATA_STORAGE_KEY,\n} from '../utils/deviceMetadata';\nimport { syncDevicesToRegistry } from '../utils/deviceRegistry';\nimport { dashboardTheme } from '../styles/dashboardTheme';\nimport { telemetry } from '../utils/telemetry';\n\nconst SEARCH_DEBOUNCE_MS = 350;\nconst ACTIVITY_PAGE_SIZE = 4;\nconst MAX_ACTIVITY_ENTRIES = 20;\nconst DISCONNECTED_DEVICES_STORAGE_KEY = 'dashboardDisconnectedDevices';\nconst ACTIVITY_CLEAR_THRESHOLD_STORAGE_KEY = 'dashboardActivityClearedAt';\nconst tokens = dashboardTheme;\nconst cardBaseSx = {\n  backgroundColor: tokens.colors.panel,\n  border: `1px solid ${tokens.colors.border}`,\n  borderRadius: `${tokens.radius}px`,\n  boxShadow: tokens.shadows.card,\n  transition: 'all 0.2s ease-in-out',\n};\nconst hoverableCardSx = {\n  '&:hover': {\n    boxShadow: tokens.shadows.cardHover,\n    transform: 'translateY(-2px)',\n  },\n};\nconst sectionTitleSx = {\n  fontSize: '16px',\n  lineHeight: '24px',\n  fontWeight: 600,\n  color: tokens.colors.text,\n};\nconst subtextSx = {\n  fontSize: '12px',\n  color: tokens.colors.subtext,\n};\n\ntype SearchResultItem = {\n  type: string;\n  id: string;\n  label: string;\n  href?: string;\n};\n\ntype ActivityItem = {\n  id: string;\n  icon?: string;\n  title: string;\n  meta?: string;\n  ts?: string | null;\n};\n\ntype QuickAction = {\n  icon: React.ReactNode;\n  label: string;\n  active: boolean;\n  path: string;\n};\n\nconst readStoredDisconnectedDevices = (): Set<string> => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return new Set();\n  }\n  try {\n    const raw = window.localStorage.getItem(DISCONNECTED_DEVICES_STORAGE_KEY);\n    if (!raw) {\n      return new Set();\n    }\n    const parsed = JSON.parse(raw);\n    if (Array.isArray(parsed)) {\n      return new Set(parsed.filter((value): value is string => typeof value === 'string'));\n    }\n  } catch (error) {\n    console.warn('[Dashboard] Failed to read disconnected devices cache', error);\n  }\n  return new Set();\n};\n\nconst persistDisconnectedDevices = (devices: Set<string>) => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return;\n  }\n  try {\n    if (devices.size === 0) {\n      window.localStorage.removeItem(DISCONNECTED_DEVICES_STORAGE_KEY);\n    } else {\n      window.localStorage.setItem(\n        DISCONNECTED_DEVICES_STORAGE_KEY,\n        JSON.stringify(Array.from(devices.values()))\n      );\n    }\n  } catch (error) {\n    console.warn('[Dashboard] Failed to persist disconnected devices cache', error);\n  }\n};\n\nconst readActivityClearThreshold = (): number | null => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return null;\n  }\n  try {\n    const raw = window.localStorage.getItem(ACTIVITY_CLEAR_THRESHOLD_STORAGE_KEY);\n    if (!raw) {\n      return null;\n    }\n    const value = Number(raw);\n    return Number.isFinite(value) ? value : null;\n  } catch {\n    return null;\n  }\n};\n\nconst persistActivityClearThreshold = (value: number | null): void => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return;\n  }\n  try {\n    if (value === null) {\n      window.localStorage.removeItem(ACTIVITY_CLEAR_THRESHOLD_STORAGE_KEY);\n    } else {\n      window.localStorage.setItem(ACTIVITY_CLEAR_THRESHOLD_STORAGE_KEY, String(value));\n    }\n  } catch (error) {\n    console.warn('[Dashboard] Failed to persist activity clear threshold', error);\n  }\n};\n\nconst filterActivitiesByThreshold = (items: ActivityItem[], threshold: number | null): ActivityItem[] => {\n  if (!threshold) {\n    return items;\n  }\n  return items.filter((item) => {\n    if (!item.ts) {\n      return false;\n    }\n    const timestamp = new Date(item.ts).getTime();\n    if (Number.isNaN(timestamp)) {\n      return false;\n    }\n    return timestamp > threshold;\n  });\n};\n\nconst parseDisconnectedDevicesValue = (value: string | null): Set<string> => {\n  if (!value) {\n    return new Set();\n  }\n  try {\n    const parsed = JSON.parse(value);\n    if (Array.isArray(parsed)) {\n      return new Set(parsed.filter((item): item is string => typeof item === 'string'));\n    }\n  } catch {\n    // ignore malformed storage values\n  }\n  return new Set();\n};\n\ntype AppMenuAction = 'about' | 'faq' | 'updates' | 'manual';\n\nconst buildLocalSearchResults = (\n  query: string,\n  devices: Device[],\n  aliasMap: Record<string, string> = {}\n): SearchResultItem[] => {\n  const normalized = query.trim().toLowerCase();\n  if (!normalized) {\n    return [];\n  }\n\n  const results: SearchResultItem[] = [];\n\n  const matchedDevices = devices\n    .filter((device) => {\n      const alias = aliasMap[device.id];\n      const tokens = [\n        alias,\n        device.model,\n        device.id,\n        device.network_operator,\n        device.network_technology,\n      ]\n        .filter(Boolean)\n        .map((value) => String(value).toLowerCase());\n      return tokens.some((token) => token.includes(normalized));\n    })\n    .slice(0, 4)\n    .map((device) => {\n      const alias = aliasMap[device.id];\n      const baseLabel = device.model || device.id;\n      const statusLabel = device.status ?? 'unknown';\n      return {\n        type: 'device',\n        id: device.id,\n        label: alias ? `${alias}  ${baseLabel} (${statusLabel})` : `${baseLabel} (${statusLabel})`,\n        href: `/devices/${device.id}`,\n      };\n    });\n\n  results.push(...matchedDevices);\n  return results.slice(0, 8);\n};\n\ninterface DashboardProps {\n  backendUrl?: string;\n}\n\nconst Dashboard: React.FC<DashboardProps> = ({ backendUrl }) => {\n  const { devices, status, error, refresh } = useDevices({ backendUrl, pollMs: 2000 });\n  const [searchQuery, setSearchQuery] = useState('');\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const [disconnectedDevices, setDisconnectedDevices] = useState<Set<string>>(() => readStoredDisconnectedDevices());\n  const [selectedDeviceDetails, setSelectedDeviceDetails] = useState<Device | null>(null);\n  const [showDeviceDetails, setShowDeviceDetails] = useState(false);\n  const [workflows, setWorkflows] = useState<StoredWorkflow[]>(() => getStoredWorkflows());\n  const [selectedDeviceIds, setSelectedDeviceIds] = useState<string[]>(() => readSelectedDeviceIds());\n  const [searchResults, setSearchResults] = useState<SearchResultItem[]>([]);\n  const [searchLoading, setSearchLoading] = useState(false);\n  const [showSearchResults, setShowSearchResults] = useState(false);\n  const [activityItems, setActivityItems] = useState<ActivityItem[]>([]);\n  const [activityLoading, setActivityLoading] = useState(false);\n  const [activityPage, setActivityPage] = useState(0);\n  const [activityViewAll, setActivityViewAll] = useState(false);\n  const [activityClearThreshold, setActivityClearThreshold] = useState<number | null>(() =>\n    typeof window === 'undefined' ? null : readActivityClearThreshold()\n  );\n  const [setupDialogOpen, setSetupDialogOpen] = useState(false);\n  const [aboutDialogOpen, setAboutDialogOpen] = useState(false);\n  const [deviceSetupLoading, setDeviceSetupLoading] = useState<string | null>(null);\n  const [snackbar, setSnackbar] = useState<{ message: string; severity: 'success' | 'error' | 'info' | 'warning' } | null>(null);\n  const [refreshingDevices, setRefreshingDevices] = useState(false);\n  const [historyVersion, setHistoryVersion] = useState(0);\n  const [appMenuAnchor, setAppMenuAnchor] = useState<null | HTMLElement>(null);\n  const [deviceAliases, setDeviceAliases] = useState<Record<string, string>>(() => readDeviceAliasMap());\n  const [aliasEditor, setAliasEditor] = useState<{ deviceId: string; value: string; name: string } | null>(null);\n  const [aliasSaving, setAliasSaving] = useState(false);\n\n  useEffect(() => {\n    syncDevicesToRegistry(devices);\n  }, [devices]);\n\n  useEffect(() => {\n    telemetry.track('dashboard_viewed', { scopeId: 'default' });\n  }, []);\n\n  useEffect(() => {\n    persistDisconnectedDevices(disconnectedDevices);\n  }, [disconnectedDevices]);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') {\n      return;\n    }\n    const syncAliases = () => setDeviceAliases(readDeviceAliasMap());\n    const handleStorage = (event: StorageEvent) => {\n      if (event.key === DEVICE_METADATA_STORAGE_KEY) {\n        syncAliases();\n      }\n    };\n    window.addEventListener(DEVICE_METADATA_EVENT, syncAliases);\n    window.addEventListener('storage', handleStorage);\n    return () => {\n      window.removeEventListener(DEVICE_METADATA_EVENT, syncAliases);\n      window.removeEventListener('storage', handleStorage);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') {\n      return;\n    }\n    const handleStorageChange = (event: StorageEvent) => {\n      if (event.key === DISCONNECTED_DEVICES_STORAGE_KEY) {\n        setDisconnectedDevices(parseDisconnectedDevicesValue(event.newValue));\n      }\n    };\n    window.addEventListener('storage', handleStorageChange);\n    return () => {\n      window.removeEventListener('storage', handleStorageChange);\n    };\n  }, []);\n\n  const searchTimeoutRef = useRef<number | null>(null);\n  const searchAbortRef = useRef<AbortController | null>(null);\n  const searchContainerRef = useRef<HTMLDivElement | null>(null);\n  const lastSearchTrackedRef = useRef<string | null>(null);\n\n  const normalizedBackendUrl = useMemo(() => (backendUrl ? resolveBaseUrl(backendUrl) : null), [backendUrl]);\n  const deviceWorkflowHistories = useMemo(() => getAllDeviceWorkflowHistories(), [historyVersion]);\n\n  const recordSearchTelemetry = useCallback((query: string, results: SearchResultItem[]) => {\n    const trimmed = query.trim();\n    if (!trimmed || lastSearchTrackedRef.current === trimmed) {\n      return;\n    }\n    lastSearchTrackedRef.current = trimmed;\n    telemetry.track('search_used', {\n      queryLength: trimmed.length,\n      resultTypeTop: results[0]?.type ?? 'none',\n    });\n  }, []);\n\n  const updateSelectedDeviceIds = useCallback((updater: (prev: string[]) => string[]) => {\n    setSelectedDeviceIds((prev) => {\n      const next = updater(prev);\n      const prevKey = prev.join(',');\n      const nextKey = next.join(',');\n      if (prevKey !== nextKey) {\n        writeSelectedDeviceIds(next);\n        return next;\n      }\n      return prev;\n    });\n  }, []);\n\n  const persistAliasForDevice = useCallback((deviceId: string, aliasValue: string) => {\n    const metadata = readDeviceMetadata();\n    const current = normalizeDeviceMetadata(metadata[deviceId] ?? DEFAULT_DEVICE_METADATA);\n    const nextMetadata = {\n      ...metadata,\n      [deviceId]: normalizeDeviceMetadata({ ...current, alias: aliasValue }),\n    };\n    writeDeviceMetadata(nextMetadata);\n    setDeviceAliases((prev) => {\n      const next = { ...prev };\n      const trimmed = aliasValue.trim();\n      if (trimmed) {\n        next[deviceId] = trimmed;\n      } else {\n        delete next[deviceId];\n      }\n      return next;\n    });\n  }, []);\n\n  useEffect(() => {\n    const syncWorkflows = () => setWorkflows(getStoredWorkflows());\n    syncWorkflows();\n    window.addEventListener(WORKFLOWS_STORAGE_EVENT, syncWorkflows);\n    return () => {\n      window.removeEventListener(WORKFLOWS_STORAGE_EVENT, syncWorkflows);\n    };\n  }, []);\n\n  useEffect(() => {\n    const handler = (event: Event) => {\n      const custom = event as CustomEvent<string[]>;\n      if (Array.isArray(custom.detail)) {\n        setSelectedDeviceIds((prev) => {\n          const prevKey = prev.join(',');\n          const nextKey = custom.detail.join(',');\n          return prevKey === nextKey ? prev : custom.detail;\n        });\n      } else {\n        setSelectedDeviceIds(readSelectedDeviceIds());\n      }\n    };\n    window.addEventListener(SELECTED_DEVICES_EVENT, handler as EventListener);\n    return () => {\n      window.removeEventListener(SELECTED_DEVICES_EVENT, handler as EventListener);\n    };\n  }, []);\n\n  useEffect(() => {\n    const handleHistoryUpdate = () => {\n      setHistoryVersion((prev) => prev + 1);\n    };\n    window.addEventListener(DEVICE_HISTORY_EVENT, handleHistoryUpdate);\n    return () => {\n      window.removeEventListener(DEVICE_HISTORY_EVENT, handleHistoryUpdate);\n    };\n  }, []);\n\n  const mapActivityItems = (items: any[]): ActivityItem[] =>\n    (Array.isArray(items) ? items : []).map((item, index) => {\n      const ts = item?.ts ?? null;\n      return {\n        id: item?.id ?? `activity-${index}`,\n        icon: item?.icon ?? 'info',\n        title: item?.title ?? 'Workflow update',\n        ts,\n        meta: item?.meta ?? (ts ? formatRelativeTime(ts) : undefined),\n      };\n    });\n\n  const mapExecutionActivityItems = (executions: any[]): ActivityItem[] => {\n    const iconForStatus = (status: string) => {\n      const normalized = (status || '').toLowerCase();\n      if (normalized === 'completed' || normalized === 'success') {\n        return 'check';\n      }\n      if (normalized === 'failed' || normalized === 'error') {\n        return 'warning';\n      }\n      if (normalized === 'cancelled') {\n        return 'ban';\n      }\n      return 'loader';\n    };\n\n    return (Array.isArray(executions) ? executions : [])\n      .map((execution, index) => {\n        const status = execution?.status ?? execution?.state ?? 'completed';\n        const flowName =\n          execution?.flow_name ||\n          execution?.flow?.name ||\n          execution?.flow_id ||\n          execution?.flow?.id ||\n          'Workflow';\n        const devicePart = execution?.device_id ? ` on ${execution.device_id}` : '';\n        const ts = execution?.updated_at || execution?.end_time || execution?.start_time || execution?.created_at || null;\n        return {\n          id: execution?.execution_id ?? execution?.id ?? `exec-${index}`,\n          icon: iconForStatus(status),\n          title: `${flowName} ${String(status).toLowerCase()}${devicePart}`,\n          ts,\n          meta: ts ? formatRelativeTime(ts) : undefined,\n        };\n      })\n      .sort((a, b) => {\n        const aTime = a.ts ? new Date(a.ts).getTime() : 0;\n        const bTime = b.ts ? new Date(b.ts).getTime() : 0;\n        return bTime - aTime;\n      });\n  };\n\n\n  const buildLocalActivityItems = useCallback((): ActivityItem[] => {\n    const entries: ActivityItem[] = [];\n\n    Object.entries(deviceWorkflowHistories).forEach(([deviceId, history]) => {\n      history.forEach((run, index) => {\n        if (!run.executedAt) {\n          return;\n        }\n        const activityId = `history-${deviceId}-${index}-${run.executedAt}`;\n        entries.push({\n          id: activityId,\n          icon: 'check',\n          title: `${run.workflowName || 'Workflow'} on ${deviceId}`,\n          ts: run.executedAt,\n          meta: formatRelativeTime(run.executedAt),\n        });\n      });\n    });\n\n    workflows.forEach((workflow) => {\n      if (!workflow.lastRunAt) {\n        return;\n      }\n      entries.push({\n        id: `workflow-${workflow.id}-${workflow.lastRunAt}`,\n        icon: 'info',\n        title: `${workflow.name} executed`,\n        ts: workflow.lastRunAt,\n        meta: formatRelativeTime(workflow.lastRunAt),\n      });\n    });\n\n    entries.sort((a, b) => {\n      const aTime = a.ts ? new Date(a.ts).getTime() : 0;\n      const bTime = b.ts ? new Date(b.ts).getTime() : 0;\n      return bTime - aTime;\n    });\n\n    return entries;\n  }, [deviceWorkflowHistories, workflows]);\n\n  useEffect(() => {\n    const controller = new AbortController();\n\n    const fetchRecentActivity = async (): Promise<ActivityItem[] | null> => {\n      if (!normalizedBackendUrl) {\n        return null;\n      }\n      try {\n        const response = await fetch(`${normalizedBackendUrl}/api/dashboard/activity/recent`, {\n          signal: controller.signal,\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP ${response.status}`);\n        }\n        const data = await response.json();\n        return mapActivityItems(data.items || []);\n      } catch (error) {\n        if (!controller.signal.aborted) {\n          console.warn('[Dashboard] Failed to fetch /activity/recent', error);\n        }\n      }\n      return null;\n    };\n\n    const fetchExecutionActivity = async (): Promise<ActivityItem[] | null> => {\n      if (!normalizedBackendUrl) {\n        return null;\n      }\n      try {\n        const response = await fetch(`${normalizedBackendUrl}/api/v1/executions`, {\n          signal: controller.signal,\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP ${response.status}`);\n        }\n        const data = await response.json();\n        return mapExecutionActivityItems(Array.isArray(data) ? data : []);\n      } catch (error) {\n        if (!controller.signal.aborted) {\n          console.warn('[Dashboard] Failed to fetch executions for activity', error);\n        }\n      }\n      return null;\n    };\n\n    const loadActivities = async () => {\n      setActivityLoading(true);\n      let nextItems: ActivityItem[] | null = null;\n\n      if (normalizedBackendUrl) {\n        nextItems = await fetchRecentActivity();\n        if ((!nextItems || nextItems.length === 0) && !controller.signal.aborted) {\n          nextItems = await fetchExecutionActivity();\n        }\n      }\n\n      if ((!nextItems || nextItems.length === 0) && !controller.signal.aborted) {\n        nextItems = buildLocalActivityItems();\n      }\n\n      if (!controller.signal.aborted) {\n        const filteredItems = filterActivitiesByThreshold(nextItems ?? [], activityClearThreshold);\n        const limitedItems =\n          filteredItems.length > MAX_ACTIVITY_ENTRIES\n            ? filteredItems.slice(0, MAX_ACTIVITY_ENTRIES)\n            : filteredItems;\n        setActivityItems(limitedItems);\n        setActivityPage(0);\n        setActivityViewAll(false);\n        setActivityLoading(false);\n      }\n    };\n\n    loadActivities();\n    return () => controller.abort();\n  }, [normalizedBackendUrl, buildLocalActivityItems, activityClearThreshold]);\n\n  useEffect(() => {\n    if (activityViewAll) {\n      return;\n    }\n    setActivityPage((prev) => {\n      const maxPage = Math.max(0, Math.ceil(activityItems.length / ACTIVITY_PAGE_SIZE) - 1);\n      return prev > maxPage ? maxPage : prev;\n    });\n  }, [activityItems.length, activityViewAll]);\n\n  useEffect(() => {\n    const handleClickAway = (event: MouseEvent) => {\n      if (!searchContainerRef.current) {\n        return;\n      }\n      if (!searchContainerRef.current.contains(event.target as Node)) {\n        setShowSearchResults(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickAway);\n    return () => document.removeEventListener('mousedown', handleClickAway);\n  }, []);\n\n  useEffect(() => {\n    if (searchTimeoutRef.current !== null) {\n      window.clearTimeout(searchTimeoutRef.current);\n      searchTimeoutRef.current = null;\n    }\n    if (searchAbortRef.current) {\n      searchAbortRef.current.abort();\n      searchAbortRef.current = null;\n    }\n\n    const trimmed = searchQuery.trim();\n    if (!trimmed) {\n      setSearchResults([]);\n      setShowSearchResults(false);\n      setSearchLoading(false);\n      lastSearchTrackedRef.current = null;\n      return;\n    }\n\n    setShowSearchResults(true);\n\n    if (!normalizedBackendUrl) {\n      setSearchLoading(false);\n      const localResults = buildLocalSearchResults(trimmed, devices, deviceAliases);\n      setSearchResults(localResults);\n      recordSearchTelemetry(trimmed, localResults);\n      return;\n    }\n\n    setSearchLoading(true);\n    const controller = new AbortController();\n    searchAbortRef.current = controller;\n\n    searchTimeoutRef.current = window.setTimeout(async () => {\n      try {\n        const response = await fetch(\n          `${normalizedBackendUrl}/api/dashboard/search?q=${encodeURIComponent(trimmed)}&limit=8`,\n          { signal: controller.signal }\n        );\n        if (!response.ok) {\n          throw new Error(`HTTP ${response.status}`);\n        }\n        const data = await response.json();\n        const rawResults: SearchResultItem[] = Array.isArray(data.results) ? data.results : [];\n        const deviceResults = rawResults.filter((item) => (item?.type ?? 'device') === 'device');\n        if (deviceResults.length > 0) {\n          setSearchResults(deviceResults);\n          recordSearchTelemetry(trimmed, deviceResults);\n        } else {\n          const localResults = buildLocalSearchResults(trimmed, devices, deviceAliases);\n          setSearchResults(localResults);\n          recordSearchTelemetry(trimmed, localResults);\n        }\n      } catch (err) {\n        if (controller.signal.aborted) {\n          return;\n        }\n        console.warn('[Dashboard] Search failed, falling back to local results', err);\n        const localResults = buildLocalSearchResults(trimmed, devices, deviceAliases);\n        setSearchResults(localResults);\n        recordSearchTelemetry(trimmed, localResults);\n      } finally {\n        if (!controller.signal.aborted) {\n          setSearchLoading(false);\n        }\n      }\n    }, SEARCH_DEBOUNCE_MS);\n\n    return () => {\n      controller.abort();\n      if (searchTimeoutRef.current !== null) {\n        window.clearTimeout(searchTimeoutRef.current);\n        searchTimeoutRef.current = null;\n      }\n    };\n  }, [searchQuery, normalizedBackendUrl, devices, recordSearchTelemetry, deviceAliases]);\n\n  const normalizeStatus = (status?: string) => (status ? status.toLowerCase() : 'unknown');\n  const connectedStatuses = ['connected', 'online', 'busy'];\n  const idleStatuses = ['idle'];\n\n  const sanitizeOperatorValue = (value?: string | null): string | null => {\n    if (!value) {\n      return null;\n    }\n    const trimmed = String(value).trim();\n    if (!trimmed || trimmed.toLowerCase() === 'unknown') {\n      return null;\n    }\n    if (\n      trimmed.includes('NetworkRegistrationInfo') ||\n      trimmed.includes('mOperatorAlphaShort') ||\n      trimmed.startsWith('null')\n    ) {\n      return null;\n    }\n    const firstSegment = trimmed.split(',')[0].trim();\n    if (!firstSegment || firstSegment.toLowerCase() === 'null') {\n      return null;\n    }\n    return firstSegment;\n  };\n\n  const resolveOperatorLabel = (device: Device) => {\n    const candidates = [device.network_operator, device.carrier, device?.sim_info?.carrier];\n    for (const candidate of candidates) {\n      const sanitized = sanitizeOperatorValue(candidate);\n      if (sanitized) {\n        return sanitized;\n      }\n    }\n    return 'Not detected';\n  };\n\n  const formatNetworkTechnology = (value?: string | null): string => {\n    if (!value) {\n      return 'Unknown';\n    }\n\n    const normalized = value.toLowerCase();\n    const mapping: Record<string, string> = {\n      lte: '4G',\n      'lte-ca': '4G+',\n      gsm: '2G',\n      gprs: '2G',\n      edge: '2G',\n      'cdma-evdo': '3G',\n      evdo: '3G',\n      evdo0: '3G',\n      evdoa: '3G',\n      evdob: '3G',\n      e_hrpd: '3G',\n      umts: '3G',\n      wcdma: '3G',\n      hspa: '3G',\n      hsupa: '3G',\n      hsupa_: '3G',\n      hsdpa: '3G',\n      hspap: '3G',\n      tdscdma: '3G',\n      nr: '5G',\n      'nr-nsa': '5G',\n      'nr-sa': '5G',\n      'nr/mmwave': '5G',\n    };\n\n    const alias = mapping[normalized];\n    if (alias) {\n      return `${alias} (${value.toUpperCase()})`;\n    }\n\n    if (/^(2g|3g|4g|5g|6g)$/i.test(value)) {\n      return value.toUpperCase();\n    }\n\n    return value.toUpperCase();\n  };\n\n  const activityTotalPages = useMemo(() => {\n    const pages = Math.ceil(activityItems.length / ACTIVITY_PAGE_SIZE);\n    return Math.max(1, pages || 0);\n  }, [activityItems.length]);\n\n  const displayedActivityItems = useMemo(() => {\n    if (activityViewAll) {\n      return activityItems;\n    }\n    const start = activityPage * ACTIVITY_PAGE_SIZE;\n    return activityItems.slice(start, start + ACTIVITY_PAGE_SIZE);\n  }, [activityItems, activityPage, activityViewAll]);\n\n  const canGoPrevActivity = !activityViewAll && activityPage > 0;\n  const canGoNextActivity =\n    !activityViewAll && (activityPage + 1) * ACTIVITY_PAGE_SIZE < activityItems.length;\n  const activityPageStart = activityPage * ACTIVITY_PAGE_SIZE;\n  const activityPageEnd = Math.min(activityItems.length, activityPageStart + ACTIVITY_PAGE_SIZE);\n  const activityPageCount = Math.max(0, activityPageEnd - activityPageStart);\n\n  const visibleDevices = useMemo(\n    () =>\n      devices.filter((device) => {\n        const normalizedStatusValue = normalizeStatus(device.status);\n        return connectedStatuses.includes(normalizedStatusValue) || idleStatuses.includes(normalizedStatusValue);\n      }),\n    [devices]\n  );\n\n  const setupCandidates = useMemo<Device[]>(() => [], []);\n\n  const handleAddDevicesClick = () => {\n    telemetry.track('add_devices_clicked', {\n      requiresSetup: setupCandidates.length,\n    });\n    setSetupDialogOpen(true);\n  };\n\n  const normalizedSearch = searchQuery.trim().toLowerCase();\n  const filteredDevices = visibleDevices.filter((device) => {\n    if (!normalizedSearch) {\n      return true;\n    }\n    const alias = deviceAliases[device.id]?.toLowerCase() ?? '';\n    return (\n      alias.includes(normalizedSearch) ||\n      device.model?.toLowerCase().includes(normalizedSearch) ||\n      device.id?.toLowerCase().includes(normalizedSearch)\n    );\n  });\n\n  const readyDevices = useMemo(\n    () => visibleDevices.filter((device) => !disconnectedDevices.has(device.id)),\n    [visibleDevices, disconnectedDevices]\n  );\n  const readyDeviceIds = useMemo(() => readyDevices.map((device) => device.id), [readyDevices]);\n\n  const selectedDeviceIdsSet = useMemo(() => new Set(selectedDeviceIds), [selectedDeviceIds]);\n  const visibleDeviceIds = useMemo(() => visibleDevices.map((device) => device.id), [visibleDevices]);\n  const allVisibleSelected =\n    visibleDeviceIds.length > 0 && visibleDeviceIds.every((id) => selectedDeviceIdsSet.has(id));\n  const partiallySelected =\n    visibleDeviceIds.some((id) => selectedDeviceIdsSet.has(id)) && !allVisibleSelected;\n\n  const handleToggleSelectAllVisible = () => {\n    updateSelectedDeviceIds((prev) => {\n      if (visibleDeviceIds.length === 0) {\n        return prev;\n      }\n      if (allVisibleSelected) {\n        const visibleSet = new Set(visibleDeviceIds);\n        return prev.filter((id) => !visibleSet.has(id));\n      }\n      const nextSet = new Set(prev);\n      visibleDeviceIds.forEach((id) => nextSet.add(id));\n      return Array.from(nextSet);\n    });\n  };\n\n  const activeDevicesCount = readyDevices.filter((device) =>\n    connectedStatuses.includes(normalizeStatus(device.status))\n  ).length;\n  const totalVisibleDevices = visibleDevices.length;\n  const workflowsActiveCount = workflows.filter((workflow) => workflow.runCount > 0).length;\n  const workflowsDraftCount = workflows.length - workflowsActiveCount;\n  const workflowExecutionCount = workflows.reduce((total, workflow) => total + (workflow.runCount || 0), 0);\n\n  const handleDisconnect = async (device: Device) => {\n    const isDisconnected = disconnectedDevices.has(device.id);\n    if (isDisconnected) {\n      setDisconnectedDevices((prev) => {\n        const next = new Set(prev);\n        next.delete(device.id);\n        return next;\n      });\n      setSnackbar({ severity: 'info', message: `${device.model || device.id} reconnected.` });\n      if (backendUrl) {\n        deviceApi.scanDevices(backendUrl).catch((err) => {\n          console.warn('[Dashboard] Failed to rescan devices after reconnect', err);\n        });\n      }\n      return;\n    }\n\n    setDisconnectedDevices((prev) => new Set(prev).add(device.id));\n    updateSelectedDeviceIds((prev) => prev.filter((id) => id !== device.id));\n\n    if (backendUrl) {\n      try {\n        const response = await deviceApi.disconnectDevice(device.id, backendUrl);\n        setSnackbar({\n          severity: response.success ? 'success' : 'error',\n          message: response.message || `Disconnect request ${response.success ? 'sent' : 'failed'}.`,\n        });\n      } catch (err) {\n        const message = err instanceof Error ? err.message : 'Unknown error while disconnecting device.';\n        setSnackbar({ severity: 'error', message });\n      }\n    } else {\n      setSnackbar({ severity: 'info', message: `${device.model || device.id} marked as disconnected locally.` });\n    }\n  };\n\n  const handleToggleDeviceSelection = (device: Device) => {\n    if (disconnectedDevices.has(device.id)) {\n      setSnackbar({ severity: 'error', message: 'Reconnect the device before using it for tests.' });\n      return;\n    }\n    updateSelectedDeviceIds((prev) => toggleSelectedDeviceId(prev, device.id));\n  };\n\n  useEffect(() => {\n    if (status !== 'success') {\n      return;\n    }\n\n    const readySet = new Set(readyDeviceIds);\n    if (selectedDeviceIds.length > 0) {\n      const filteredSelection = selectedDeviceIds.filter((id) => readySet.has(id));\n      if (filteredSelection.length !== selectedDeviceIds.length) {\n        const removedCount = selectedDeviceIds.length - filteredSelection.length;\n        setSnackbar({\n          severity: filteredSelection.length === 0 ? 'warning' : 'info',\n          message:\n            filteredSelection.length === 0\n              ? 'Active device disconnected. Selection cleared.'\n              : `Removed ${removedCount} disconnected device${removedCount > 1 ? 's' : ''} from the selection.`,\n        });\n        updateSelectedDeviceIds(() => filteredSelection);\n        return;\n      }\n    }\n\n    if (selectedDeviceIds.length === 0 && readyDeviceIds.length === 1) {\n      const autoId = readyDeviceIds[0];\n      const device = readyDevices.find((entry) => entry.id === autoId);\n      if (device) {\n        setSnackbar({\n          severity: 'info',\n          message: `${device.model || device.id} automatically selected as the active device.`,\n        });\n      }\n      updateSelectedDeviceIds(() => [autoId]);\n    }\n  }, [readyDeviceIds, readyDevices, selectedDeviceIds, status, updateSelectedDeviceIds]);\n\n  const handleShowDetails = (device: Device) => {\n    setSelectedDeviceDetails(device);\n    setShowDeviceDetails(true);\n  };\n\n  const handleConfigureDevice = async (device: Device) => {\n    if (!normalizedBackendUrl) {\n      setSnackbar({\n        severity: 'error',\n        message: 'Backend is required to configure devices automatically.',\n      });\n      return;\n    }\n    setDeviceSetupLoading(device.id);\n    try {\n      const response = await deviceApi.configureDevice(device.id, backendUrl);\n      setSnackbar({\n        severity: response.success ? 'success' : 'error',\n        message: response.message || (response.success ? 'Device configured.' : 'Configuration failed.'),\n      });\n      await refresh();\n    } catch (err) {\n      if (err instanceof Error) {\n        setSnackbar({ severity: 'error', message: err.message });\n      } else {\n        setSnackbar({ severity: 'error', message: 'Unexpected error while configuring device.' });\n      }\n    } finally {\n      setDeviceSetupLoading(null);\n    }\n  };\n\n  const handleViewAllActivity = () => {\n    if (activityItems.length === 0) {\n      return;\n    }\n    setActivityViewAll((prev) => {\n      const next = !prev;\n      if (!next) {\n        setActivityPage(0);\n      }\n      return next;\n    });\n  };\n\n  const handleClearActivity = () => {\n    if (activityItems.length === 0 && !activityLoading) {\n      return;\n    }\n    const clearedAt = Date.now();\n    setActivityItems([]);\n    setActivityPage(0);\n    setActivityViewAll(false);\n    setActivityClearThreshold(clearedAt);\n    persistActivityClearThreshold(clearedAt);\n    clearDeviceWorkflowHistory();\n    setSnackbar({ severity: 'info', message: 'Recent activity cleared.' });\n    telemetry.track('dashboard_activity_cleared', { scopeId: 'default' });\n  };\n\n  const handleNextActivityPage = () => {\n    setActivityPage((prev) => Math.min(prev + 1, activityTotalPages - 1));\n  };\n\n  const handlePrevActivityPage = () => {\n    setActivityPage((prev) => Math.max(prev - 1, 0));\n  };\n\n  const handleOpenAppMenu = (event: React.MouseEvent<HTMLElement>) => {\n    setAppMenuAnchor(event.currentTarget);\n  };\n\n  const handleCloseAppMenu = () => setAppMenuAnchor(null);\n\n  const handleAppMenuSelect = (action: AppMenuAction) => {\n    handleCloseAppMenu();\n    if (action === 'about') {\n      setAboutDialogOpen(true);\n      return;\n    }\n\n    const resourceLinks: Record<Exclude<AppMenuAction, 'about'>, string> = {\n      faq: 'https://github.com/Specpapers/ADB-automation-tool/wiki/FAQ',\n      updates: 'https://github.com/Specpapers/ADB-automation-tool/releases',\n      manual: 'https://github.com/Specpapers/ADB-automation-tool/wiki/User-Manual',\n    };\n\n    if (action === 'updates') {\n      setSnackbar({ severity: 'info', message: 'Opening the releases page in a new tab.' });\n    }\n\n    const target = resourceLinks[action];\n    window.open(target, '_blank', 'noopener,noreferrer');\n  };\n\n  const describeSetupRequirements = (device: Device): string => {\n    const reasons: string[] = [];\n    if (device.developer_mode_enabled === false) {\n      reasons.push('Enable developer options');\n    }\n    if (device.usb_debugging_enabled === false) {\n      reasons.push('Enable USB debugging');\n    }\n    const statusHints = [\n      device.raw_status,\n      device.raw_adb_status,\n      device.adb_status,\n      device.status,\n    ]\n      .filter((value): value is string => typeof value === 'string')\n      .map((value) => value.toLowerCase());\n\n    if (statusHints.some((value) => value.includes('unauthorized'))) {\n      reasons.push('Authorize this computer');\n    }\n    if (statusHints.some((value) => value.includes('offline'))) {\n      reasons.push('Reconnect the device');\n    }\n    return reasons.length > 0 ? reasons.join('  ') : 'Device not ready';\n  };\n\n  const formatBatteryLevel = (value: Device['battery_level']) => {\n    if (value === null || value === undefined || value === '') {\n      return 'N/A';\n    }\n    if (typeof value === 'number') {\n      return `${value}%`;\n    }\n    const text = String(value);\n    return text.endsWith('%') ? text : `${text}%`;\n  };\n\n  const formatAndroidVersion = (device: Device) => {\n    return device.android_version || device.os_version || 'Unknown';\n  };\n\n  const formatLastSeen = (value: Device['last_seen']) => {\n    if (!value) {\n      return 'Unknown';\n    }\n    const normalized = String(value).trim();\n    if (!normalized || normalized.toLowerCase() === 'invalid date') {\n      return 'Unknown';\n    }\n    if (normalized.toLowerCase() === 'now') {\n      return new Date().toLocaleString();\n    }\n    const parsed = new Date(normalized);\n    if (!Number.isNaN(parsed.getTime())) {\n      return parsed.toLocaleString();\n    }\n    const numeric = Number(normalized);\n    if (Number.isFinite(numeric)) {\n      const numericDate = new Date(numeric);\n      if (!Number.isNaN(numericDate.getTime())) {\n        return numericDate.toLocaleString();\n      }\n    }\n    return 'Unknown';\n  };\n\n  const parseBatteryLevel = (value: Device['battery_level']): number | null => {\n    if (typeof value === 'number' && Number.isFinite(value)) {\n      return Math.max(0, Math.min(100, Math.round(value)));\n    }\n    if (typeof value === 'string') {\n      const numeric = parseInt(value.replace('%', '').trim(), 10);\n      if (Number.isFinite(numeric)) {\n        return Math.max(0, Math.min(100, numeric));\n      }\n    }\n    return null;\n  };\n\n  const batteryStats = useMemo(() => {\n    const readings = devices\n      .map((device) => {\n        const level = parseBatteryLevel(device.battery_level);\n        return level === null ? null : { device, level };\n      })\n      .filter(Boolean) as { device: Device; level: number }[];\n\n    if (readings.length === 0) {\n      return { average: null as number | null, count: 0, lowest: [] as { device: Device; level: number }[] };\n    }\n\n    const average = Math.round(\n      readings.reduce((total, entry) => total + entry.level, 0) / readings.length\n    );\n    const lowest = [...readings].sort((a, b) => a.level - b.level).slice(0, 3);\n    return { average, count: readings.length, lowest };\n  }, [devices]);\n\n  const handleManualRefresh = async (origin: 'header' | 'empty' = 'header') => {\n    if (refreshingDevices) {\n      return;\n    }\n    telemetry.track('scan_again_clicked', {\n      origin,\n      deviceCount: devices.length,\n    });\n    setRefreshingDevices(true);\n    try {\n      if (backendUrl) {\n        await deviceApi.scanDevices(backendUrl);\n      }\n      await refresh();\n      setSnackbar({ severity: 'success', message: 'Devices synchronized with the backend.' });\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Failed to refresh devices.';\n      setSnackbar({ severity: 'error', message });\n    } finally {\n      setRefreshingDevices(false);\n    }\n  };\n\n  const formatRelativeTime = (value?: string | number | Date | null): string => {\n    if (!value) {\n      return 'Just now';\n    }\n    const date = value instanceof Date ? value : new Date(value);\n    if (Number.isNaN(date.getTime())) {\n      return 'Just now';\n    }\n    const seconds = Math.max(0, Math.floor((Date.now() - date.getTime()) / 1000));\n    if (seconds < 60) {\n      return seconds <= 1 ? 'Just now' : `${seconds} seconds ago`;\n    }\n    const minutes = Math.floor(seconds / 60);\n    if (minutes < 60) {\n      return minutes === 1 ? '1 minute ago' : `${minutes} minutes ago`;\n    }\n    const hours = Math.floor(minutes / 60);\n    if (hours < 24) {\n      return hours === 1 ? '1 hour ago' : `${hours} hours ago`;\n    }\n    const days = Math.floor(hours / 24);\n    if (days < 7) {\n      return days === 1 ? '1 day ago' : `${days} days ago`;\n    }\n    const weeks = Math.floor(days / 7);\n    return weeks === 1 ? '1 week ago' : `${weeks} weeks ago`;\n  };\n\n\n  const renderActivityIcon = (item: ActivityItem) => {\n    switch (item.icon) {\n      case 'check':\n        return <CheckCircle size={20} />;\n      case 'warning':\n        return <AlertTriangle size={20} />;\n      case 'loader':\n        return <RefreshCw size={20} />;\n      case 'info':\n      default:\n        return <Wifi size={20} />;\n    }\n  };\n\n  const handleSearchResultClick = (item: SearchResultItem) => {\n    setShowSearchResults(false);\n    if (item.type === 'device') {\n      const target = devices.find((device) => device.id === item.id);\n      if (target) {\n        handleShowDetails(target);\n      }\n    }\n    if (item.href) {\n      navigate(item.href);\n    }\n  };\n\n  const quickActions: QuickAction[] = useMemo(\n    () => [\n      {\n        icon: <Play size={16} />,\n        label: `Quick Test (${selectedDeviceIds.length} selected)`,\n        active: selectedDeviceIds.length > 0,\n        path: '/modules',\n      },\n      { icon: <GitBranch size={16} />, label: 'Workflows', active: false, path: '/workflows' },\n      { icon: <Puzzle size={16} />, label: 'Modules', active: false, path: '/modules' },\n    ],\n    [selectedDeviceIds.length]\n  );\n\n  const openAliasEditor = useCallback(\n    (device: Device) => {\n      setAliasEditor({\n        deviceId: device.id,\n        value: deviceAliases[device.id] ?? '',\n        name: deviceAliases[device.id] || device.model || device.id,\n      });\n    },\n    [deviceAliases]\n  );\n\n  const handleAliasDialogClose = useCallback(() => {\n    if (!aliasSaving) {\n      setAliasEditor(null);\n    }\n  }, [aliasSaving]);\n\n  const handleAliasSave = useCallback(() => {\n    if (!aliasEditor) {\n      return;\n    }\n    const trimmed = aliasEditor.value.trim();\n    setAliasSaving(true);\n    try {\n      persistAliasForDevice(aliasEditor.deviceId, trimmed);\n      setSnackbar({\n        severity: 'success',\n        message: trimmed ? `Alias saved for ${aliasEditor.name}.` : `Alias removed for ${aliasEditor.name}.`,\n      });\n      setAliasEditor(null);\n    } catch (error) {\n      console.warn('[Dashboard] Failed to persist alias', error);\n      setSnackbar({ severity: 'error', message: 'Unable to save alias. Please try again.' });\n    } finally {\n      setAliasSaving(false);\n    }\n  }, [aliasEditor, persistAliasForDevice]);\n\n  const handleAliasInputChange = useCallback((value: string) => {\n    setAliasEditor((prev) => (prev ? { ...prev, value } : prev));\n  }, []);\n\n  return (\n    <Box sx={{ \n      display: 'flex',\n      minHeight: '100vh',\n      backgroundColor: tokens.colors.bg,\n      fontFamily: 'Inter, system-ui, -apple-system, \"Segoe UI\", Roboto, sans-serif'\n    }}>\n      {/* Sidebar */}\n      <Box sx={{\n        width: 280,\n        background: 'linear-gradient(180deg, #0D1B2A 0%, #152238 100%)',\n        padding: '16px 12px',\n        display: 'flex',\n        flexDirection: 'column',\n        position: 'sticky',\n        top: 0,\n        height: '100vh'\n      }}>\n        {/* Brand */}\n        <Box sx={{ mb: 4, pb: 2, borderBottom: '1px solid rgba(255, 255, 255, 0.08)' }}>\n          <Typography variant=\"h6\" sx={{ \n            color: 'rgba(255, 255, 255, 0.9)', \n            fontWeight: 700,\n            fontSize: '18px',\n            lineHeight: '26px'\n          }}>\n            MOBIQ\n          </Typography>\n          <Typography variant=\"body2\" sx={{ \n            color: 'rgba(255, 255, 255, 0.7)',\n            fontSize: '12px',\n            lineHeight: '18px'\n          }}>\n            The Future of Telecom Automation\n          </Typography>\n        </Box>\n\n        {/* Navigation */}\n        <Box sx={{ flex: 1 }}>\n          {[\n            { label: 'Dashboard', icon: <Grid3X3 size={20} />, path: '/dashboard' },\n            { label: 'Modules', icon: <Puzzle size={20} />, path: '/modules' },\n            { label: 'Workflows', icon: <Zap size={20} />, path: '/workflows' },\n            { label: 'Device Manager', icon: <Smartphone size={20} />, path: '/devices' }\n          ].map((item, index) => {\n            const isActive = location.pathname === item.path;\n            return (\n              <Box\n                key={index}\n                onClick={() => navigate(item.path)}\n                sx={{\n                  height: 48,\n                  borderRadius: '12px',\n                  padding: '0 14px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 2,\n                  mb: 1,\n                  cursor: 'pointer',\n                  backgroundColor: isActive ? '#1E3A8A' : 'transparent',\n                  color: isActive ? '#FFFFFF' : '#D1D5DB',\n                  '&:hover': {\n                    backgroundColor: isActive ? '#1E3A8A' : '#11253F',\n                    color: isActive ? '#FFFFFF' : '#E5E7EB'\n                  }\n                }}\n              >\n                <Box sx={{ color: isActive ? '#FFFFFF' : '#93C5FD' }}>\n                  {item.icon}\n                </Box>\n                <Typography sx={{ \n                  fontSize: '14px',\n                  fontWeight: 500\n                }}>\n                  {item.label}\n                </Typography>\n              </Box>\n            );\n          })}\n        </Box>\n\n        {/* Footer */}\n        <Box sx={{ textAlign: 'center', mt: 2 }}>\n          <Box sx={{ display: 'inline-flex', alignItems: 'center', gap: 1 }}>\n            <Chip \n              label=\"MOBIQ v1.0\"\n              size=\"small\"\n              sx={{\n                backgroundColor: 'rgba(255, 255, 255, 0.1)',\n                color: 'rgba(255, 255, 255, 0.7)',\n                fontSize: '11px'\n              }}\n            />\n            <IconButton\n              size=\"small\"\n              onClick={handleOpenAppMenu}\n              sx={{ color: 'rgba(255, 255, 255, 0.8)' }}\n            >\n              <Info size={16} />\n            </IconButton>\n          </Box>\n          <Menu\n            anchorEl={appMenuAnchor}\n            open={Boolean(appMenuAnchor)}\n            onClose={handleCloseAppMenu}\n            anchorOrigin={{ vertical: 'top', horizontal: 'left' }}\n            transformOrigin={{ vertical: 'bottom', horizontal: 'left' }}\n          >\n            <MenuItem onClick={() => handleAppMenuSelect('about')}>About</MenuItem>\n            <MenuItem onClick={() => handleAppMenuSelect('faq')}>FAQ</MenuItem>\n            <MenuItem onClick={() => handleAppMenuSelect('updates')}>Check for updates</MenuItem>\n            <MenuItem onClick={() => handleAppMenuSelect('manual')}>User manual</MenuItem>\n          </Menu>\n        </Box>\n      </Box>\n\n      {/* Main Content */}\n      <Box sx={{ \n        flex: 1,\n        padding: '24px 28px',\n        maxWidth: 1320,\n        margin: '0 auto'\n      }}>\n        {/* Header */}\n        <Box sx={{\n          height: 56,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          mb: 4\n        }}>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n            <Box\n              sx={{\n                height: 48,\n                width: 48,\n                borderRadius: '14px',\n                background: 'linear-gradient(135deg, #0F172A 0%, #0EA5E9 50%, #7C3AED 100%)',\n                display: 'grid',\n                placeItems: 'center',\n                boxShadow: '0 10px 30px rgba(14, 165, 233, 0.28)',\n              }}\n            >\n              <Grid3X3 size={22} color=\"#FFFFFF\" />\n            </Box>\n            <Typography\n              variant=\"h1\"\n              sx={{\n                fontSize: '28px',\n                lineHeight: '36px',\n                fontWeight: 800,\n                color: '#0F172A',\n                letterSpacing: '-0.01em',\n              }}\n            >\n              Dashboard\n            </Typography>\n          </Box>\n\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n            <Box ref={searchContainerRef} sx={{ position: 'relative', width: 460 }}>\n              <TextField\n                placeholder=\"Search devices\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                onFocus={() => searchQuery.trim() && setShowSearchResults(true)}\n                sx={{\n                  width: '100%',\n                  '& .MuiOutlinedInput-root': {\n                    height: 40,\n                    borderRadius: '10px',\n                    '& fieldset': {\n                      borderColor: '#E5E7EB'\n                    }\n                  }\n                }}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      <Search size={20} color=\"#6B7280\" />\n                    </InputAdornment>\n                  )\n                }}\n              />\n              {showSearchResults && (\n                <Paper\n                  elevation={3}\n                  sx={{\n                    position: 'absolute',\n                    top: 44,\n                    left: 0,\n                    right: 0,\n                    borderRadius: '12px',\n                    overflow: 'hidden',\n                    zIndex: 20,\n                    maxHeight: 320,\n                    display: 'flex',\n                    flexDirection: 'column'\n                  }}\n                  onMouseDown={(event) => event.preventDefault()}\n                >\n                  {searchLoading ? (\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1.5, padding: '12px 16px' }}>\n                      <CircularProgress size={18} />\n                      <Typography sx={{ fontSize: '14px', color: '#475569' }}>Searching</Typography>\n                    </Box>\n                  ) : searchResults.length === 0 ? (\n                    <Box sx={{ padding: '12px 16px' }}>\n                      <Typography sx={{ fontSize: '14px', color: '#6B7280' }}>No devices found.</Typography>\n                    </Box>\n                  ) : (\n                    searchResults.map((item) => (\n                      <Box\n                        key={`${item.type}-${item.id}`}\n                        onClick={() => handleSearchResultClick(item)}\n                        sx={{\n                          padding: '12px 16px',\n                          display: 'flex',\n                          flexDirection: 'column',\n                          gap: 0.5,\n                          cursor: 'pointer',\n                          '&:hover': {\n                            backgroundColor: '#EEF2FF'\n                          }\n                        }}\n                      >\n                        <Typography sx={{ fontSize: '14px', fontWeight: 600, color: '#0F172A' }}>\n                          {item.label}\n                        </Typography>\n                        <Typography sx={{ fontSize: '12px', color: '#6B7280' }}>\n                          Device\n                        </Typography>\n                      </Box>\n                    ))\n                  )}\n                </Paper>\n              )}\n            </Box>\n            \n            <Button\n              variant=\"contained\"\n              startIcon={<RefreshCw size={18} />}\n              onClick={() => handleManualRefresh('header')}\n              disabled={refreshingDevices}\n              sx={{\n                height: 40,\n                borderRadius: '12px',\n                backgroundColor: refreshingDevices ? '#94A3B8' : '#1E293B',\n                textTransform: 'none',\n                fontWeight: 600,\n                '&:hover': {\n                  backgroundColor: refreshingDevices ? '#94A3B8' : '#0F172A'\n                }\n              }}\n            >\n              {refreshingDevices ? 'Refreshing' : 'Refresh'}\n            </Button>\n\n            <Button\n              variant=\"contained\"\n              startIcon={<Grid3X3 size={20} />}\n              onClick={handleAddDevicesClick}\n              sx={{\n                height: 40,\n                borderRadius: '12px',\n                backgroundColor: 'linear-gradient(135deg, #2563EB 0%, #1E40AF 100%)',\n                background: 'linear-gradient(135deg, #2563EB 0%, #1E40AF 100%)',\n                textTransform: 'none',\n                fontWeight: 600,\n                boxShadow: '0 4px 12px rgba(37, 99, 235, 0.3)',\n                transition: 'all 0.2s ease-in-out',\n                '&:hover': {\n                  background: 'linear-gradient(135deg, #1E40AF 0%, #1E3A8A 100%)',\n                  boxShadow: '0 6px 16px rgba(37, 99, 235, 0.4)',\n                  transform: 'translateY(-1px)'\n                }\n              }}\n            >\n              Add Devices\n            </Button>\n          </Box>\n        </Box>\n\n        {/* Top Summary Cards */}\n        <Box sx={{\n          display: 'grid',\n          gridTemplateColumns: 'repeat(auto-fit, minmax(240px, 1fr))',\n          gap: 3,\n          mb: 3\n        }}>\n          {/* Connected Devices Card */}\n          <Card sx={{ ...cardBaseSx, ...hoverableCardSx }}>\n            <CardContent sx={{ padding: `${tokens.card.padding}px ${tokens.spacing}px` }}>\n              <Typography sx={{\n                fontSize: '16px',\n                lineHeight: '24px',\n                fontWeight: 600,\n                color: tokens.colors.text,\n                mb: 2\n              }}>\n                Connected Devices\n              </Typography>\n              <Typography sx={{\n                fontSize: '48px',\n                fontWeight: 700,\n                color: tokens.colors.text,\n                lineHeight: 1\n              }}>\n                {activeDevicesCount}/{totalVisibleDevices}\n              </Typography>\n              <Typography sx={{\n                fontSize: '12px',\n                lineHeight: '18px',\n                fontWeight: 500,\n                color: tokens.colors.subtext,\n                mt: 1\n              }}>\n                {activeDevicesCount} active\n              </Typography>\n            </CardContent>\n          </Card>\n\n          {/* Workflows Card */}\n          <Card sx={{ ...cardBaseSx, ...hoverableCardSx }}>\n            <CardContent sx={{ padding: `${tokens.card.padding}px ${tokens.spacing}px` }}>\n              <Typography sx={{\n                fontSize: '16px',\n                lineHeight: '24px',\n                fontWeight: 600,\n                color: tokens.colors.text,\n                mb: 2\n              }}>\n                Workflows\n              </Typography>\n              <Typography sx={{\n                fontSize: '48px',\n                fontWeight: 700,\n                color: tokens.colors.text,\n                lineHeight: 1\n              }}>\n                {workflows.length}\n              </Typography>\n              <Typography sx={{\n                fontSize: '12px',\n                lineHeight: '18px',\n                fontWeight: 500,\n                color: tokens.colors.subtext,\n                mt: 1\n              }}>\n                {workflowsActiveCount} active | {workflowsDraftCount} draft | {workflowExecutionCount} run{workflowExecutionCount === 1 ? '' : 's'}\n              </Typography>\n            </CardContent>\n          </Card>\n\n          {/* Quick Actions Card */}\n          <Card sx={{ ...cardBaseSx, ...hoverableCardSx }}>\n            <CardContent sx={{ padding: `${tokens.card.padding}px ${tokens.spacing}px` }}>\n              <Typography sx={{\n                fontSize: '16px',\n                lineHeight: '24px',\n                fontWeight: 600,\n                color: tokens.colors.text,\n                mb: 2\n              }}>\n                Quick Actions\n              </Typography>\n              <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\n                {quickActions.map((action, index) => (\n                  <Box\n                    key={index}\n                    onClick={() => action.path && navigate(action.path)}\n                    sx={{\n                      height: 44,\n                      borderRadius: '12px',\n                      padding: '0 14px',\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: 2,\n                      cursor: 'pointer',\n                      backgroundColor: action.active ? tokens.colors.accent : 'transparent',\n                      color: action.active ? tokens.colors.primary : tokens.colors.text,\n                      border: `1px solid ${action.active ? tokens.colors.primary : tokens.colors.border}`,\n                      transition: 'all 0.2s ease-in-out',\n                      '&:hover': {\n                        backgroundColor: action.active ? tokens.colors.accent : tokens.colors.panel,\n                        boxShadow: tokens.shadows.card,\n                      }\n                    }}\n                  >\n                    <Box\n                      sx={{\n                        width: 28,\n                        height: 28,\n                        borderRadius: '50%',\n                        display: 'grid',\n                        placeItems: 'center',\n                        backgroundColor: action.active ? tokens.colors.primary : tokens.colors.accent,\n                        color: action.active ? '#FFFFFF' : tokens.colors.primary,\n                      }}\n                    >\n                      {action.icon}\n                    </Box>\n                    <Typography sx={{ \n                      fontSize: '14px',\n                      fontWeight: 500,\n                      flex: 1\n                    }}>\n                      {action.label}\n                    </Typography>\n                  </Box>\n                ))}\n              </Box>\n            </CardContent>\n          </Card>\n\n        </Box>\n\n\n\n        {/* Middle Row */}\n        <Box sx={{\n          display: 'grid',\n          gridTemplateColumns: '2fr 1fr',\n          gap: 3\n        }}>\n          {/* Connected Devices Panel */}\n          <Card sx={{ ...cardBaseSx, ...hoverableCardSx, minHeight: 420 }}>\n            <CardContent sx={{ padding: `${tokens.card.padding}px ${tokens.spacing}px` }}>\n              <Box sx={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                mb: 3\n              }}>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1.5 }}>\n              <Typography sx={sectionTitleSx}>\n                Connected Devices\n              </Typography>\n                  <Chip\n                    label={`${selectedDeviceIds.length} device${selectedDeviceIds.length === 1 ? '' : 's'} selected`}\n                    size=\"small\"\n                    sx={{\n                      backgroundColor: tokens.colors.accent,\n                      color: tokens.colors.primary,\n                      fontWeight: 600,\n                      height: 24\n                    }}\n                  />\n                </Box>\n                {visibleDevices.length > 0 && (\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                    <Checkbox\n                      size=\"small\"\n                      checked={allVisibleSelected && visibleDeviceIds.length > 0}\n                      indeterminate={partiallySelected}\n                      onChange={handleToggleSelectAllVisible}\n                      sx={{ padding: 0 }}\n                    />\n                    <Typography sx={{ fontSize: '12px', color: tokens.colors.primary, fontWeight: 600 }}>\n                      Select all\n                    </Typography>\n                  </Box>\n                )}\n              </Box>\n              \n              {visibleDevices.length === 0 ? (\n                <Box sx={{\n                  display: 'flex',\n                  flexDirection: 'column',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  textAlign: 'center',\n                  py: 8\n                }}>\n                  <Smartphone size={56} color=\"#6B7280\" style={{ marginBottom: 16 }} />\n                  <Typography sx={{\n                    fontSize: '16px',\n                    fontWeight: 600,\n                    color: tokens.colors.text,\n                    mb: 1\n                  }}>\n                    No devices connected\n                  </Typography>\n                  <Typography sx={{\n                    fontSize: '14px',\n                    color: tokens.colors.subtext,\n                    mb: 3,\n                    maxWidth: 280\n                  }}>\n                    Connect an Android device via USB and enable USB debugging\n                  </Typography>\n                  <Button\n                    variant=\"contained\"\n                    startIcon={<RefreshCw size={16} />}\n                    onClick={() => handleManualRefresh('empty')}\n                    disabled={refreshingDevices}\n                    sx={{\n                      height: 44,\n                      borderRadius: '12px',\n                      backgroundColor: refreshingDevices ? '#94A3B8' : tokens.colors.primary,\n                      textTransform: 'none',\n                      fontWeight: 600,\n                      '&:hover': {\n                        backgroundColor: refreshingDevices ? '#94A3B8' : '#1E48C7'\n                      }\n                    }}\n                  >\n                    {refreshingDevices ? 'Scanning' : 'Scan Again'}\n                  </Button>\n                </Box>\n              ) : (\n                <Box sx={{\n                  display: 'grid',\n                  gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))',\n                  gap: 2\n                }}>\n                  {filteredDevices.slice(0, 12).map((device) => {\n                    const isSelected = selectedDeviceIdsSet.has(device.id);\n                    const isDisconnected = disconnectedDevices.has(device.id);\n                    const requiresSetup = device.requires_setup === true;\n                    const canSelect = !isDisconnected;\n                    const deviceAlias = deviceAliases[device.id]?.trim() || '';\n                    const primaryName = device.model || device.id;\n                    const secondaryLabel = deviceAlias || device.id;\n\n                    const normalizedStatusValue = normalizeStatus(device.status);\n                    const statusLabel = isDisconnected\n                      ? 'Disconnected'\n                      : normalizedStatusValue === 'busy'\n                        ? 'Busy'\n                        : (device.status || 'Connected').toString();\n                    const statusColor = isDisconnected\n                      ? tokens.colors.danger\n                      : normalizedStatusValue === 'busy'\n                        ? tokens.colors.warning\n                        : tokens.colors.success;\n\n                    const borderColor = isSelected\n                      ? '#2563EB'\n                      : isDisconnected\n                        ? '#DC2626'\n                        : '#E5E7EB';\n\n                    return (\n                      <Box\n                        key={device.id}\n                        sx={{\n                          p: 2,\n                          background: '#F8FAFC',\n                          borderRadius: '10px',\n                          border: `2px solid ${borderColor}`,\n                          boxShadow: isSelected ? '0 4px 12px rgba(37, 99, 235, 0.15)' : 'none',\n                          transition: 'all 0.2s ease-in-out',\n                          opacity: isDisconnected ? 0.6 : 1,\n                          '&:hover': {\n                            boxShadow: '0 2px 8px rgba(16, 24, 40, 0.1)',\n                            transform: 'translateY(-1px)'\n                          }\n                        }}\n                      >\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 1 }}>\n                          <Chip\n                            label={statusLabel}\n                            size=\"small\"\n                            sx={{\n                              backgroundColor: `${statusColor}1A`,\n                              color: statusColor,\n                              fontSize: '10px',\n                              fontWeight: 600,\n                              textTransform: 'capitalize'\n                            }}\n                          />\n                          {requiresSetup && (\n                            <Tooltip title=\"Developer options or USB debugging disabled\">\n                              <Chip\n                                label=\"Setup\"\n                                size=\"small\"\n                                sx={{\n                                  backgroundColor: '#FEF3C7',\n                                  color: '#B45309',\n                                  fontSize: '9px',\n                                  fontWeight: 600,\n                                  textTransform: 'uppercase'\n                                }}\n                              />\n                            </Tooltip>\n                          )}\n                          <Tooltip\n                            title={\n                              !canSelect\n                                ? 'Device unavailable'\n                                : isSelected\n                                  ? 'Active target'\n                                  : 'Set as active target'\n                            }\n                          >\n                            <span>\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handleToggleDeviceSelection(device)}\n                                disabled={!canSelect}\n                                sx={{\n                                  width: 28,\n                                  height: 28,\n                                  borderRadius: '6px',\n                                  backgroundColor: isSelected ? '#2563EB' : '#FFFFFF',\n                                  border: `1px solid ${isSelected ? '#2563EB' : '#CBD5F5'}`,\n                                  color: isSelected ? '#FFFFFF' : '#64748B',\n                                  '&:hover': {\n                                    backgroundColor: canSelect ? '#1E48C7' : '#FFFFFF',\n                                    color: canSelect ? '#FFFFFF' : '#94A3B8'\n                                  }\n                                }}\n                              >\n                                {isSelected ? <CheckSquare size={16} /> : <Square size={16} />}\n                              </IconButton>\n                            </span>\n                          </Tooltip>\n                        </Box>\n\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}>\n                          <Box sx={{\n                            background: !isDisconnected ? '#ECFDF5' : '#FEF2F2',\n                            borderRadius: '6px',\n                            p: 0.5,\n                            color: !isDisconnected ? '#16A34A' : '#DC2626'\n                          }}>\n                            <Smartphone size={16} />\n                          </Box>\n                          <Box\n                            flex={1}\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 1,\n                              justifyContent: 'space-between',\n                            }}\n                          >\n                            <Box sx={{ display: 'flex', flexDirection: 'column' }}>\n                              <Typography\n                                sx={{\n                                  fontSize: '14px',\n                                  fontWeight: 600,\n                                  color: '#0F172A',\n                                }}\n                              >\n                                {primaryName}\n                              </Typography>\n                              <Typography\n                                sx={{\n                                  fontSize: '11px',\n                                  color: '#6B7280',\n                                  fontWeight: deviceAlias ? 600 : 400,\n                                }}\n                              >\n                                {secondaryLabel}\n                              </Typography>\n                            </Box>\n                            <Tooltip title={deviceAlias ? 'Edit alias' : 'Add alias'}>\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => openAliasEditor(device)}\n                                sx={{\n                                  width: 24,\n                                  height: 24,\n                                  borderRadius: '6px',\n                                  backgroundColor: '#F1F5F9',\n                                  color: '#475569',\n                                  ml: 'auto',\n                                  '&:hover': { backgroundColor: '#E2E8F0' },\n                                }}\n                              >\n                                <Pencil size={14} />\n                              </IconButton>\n                            </Tooltip>\n                          </Box>\n                        </Box>\n\n                        <Box\n                          sx={{\n                            display: 'grid',\n                            gridTemplateColumns: 'repeat(auto-fit, minmax(140px, 1fr))',\n                            gap: 1.5,\n                            mb: 2\n                          }}\n                        >\n                          <Box>\n                            <Typography\n                              sx={{\n                                fontSize: '9px',\n                                color: '#6B7280',\n                                mb: 0.25,\n                                textTransform: 'uppercase',\n                                letterSpacing: '0.04em'\n                              }}\n                            >\n                              Network Operator\n                            </Typography>\n                            <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5, flexWrap: 'wrap' }}>\n                              <Typography\n                                sx={{\n                                  fontSize: '11px',\n                                  fontWeight: 600,\n                                  color: '#0F172A'\n                                }}\n                              >\n                                {resolveOperatorLabel(device)}\n                              </Typography>\n                              <Chip\n                                label={formatNetworkTechnology(device.network_technology)}\n                                size=\"small\"\n                                icon={<Signal size={12} />}\n                                sx={{\n                                  height: 22,\n                                  fontSize: '10px',\n                                  fontWeight: 600,\n                                  color: '#1E3A8A',\n                                  backgroundColor: '#E0E7FF',\n                                  '& .MuiChip-icon': {\n                                    color: '#2563EB',\n                                    ml: 0.5\n                                  }\n                                }}\n                              />\n                            </Box>\n                          </Box>\n\n                          <Box>\n                            <Typography\n                              sx={{\n                                fontSize: '9px',\n                                color: '#6B7280',\n                                mb: 0.25,\n                                textTransform: 'uppercase',\n                                letterSpacing: '0.04em'\n                              }}\n                            >\n                              Serial Number\n                            </Typography>\n                            <Typography\n                              sx={{\n                                fontSize: '11px',\n                                fontWeight: 700,\n                                color: '#111827',\n                                fontFamily: 'inherit',\n                                backgroundColor: '#E0E7FF',\n                                borderRadius: '6px',\n                                padding: '2px 6px',\n                                display: 'inline-block',\n                                wordBreak: 'break-all'\n                              }}\n                            >\n                              {device.serial || device.id}\n                            </Typography>\n                          </Box>\n\n                          <Box>\n                            <Typography\n                              sx={{\n                                fontSize: '9px',\n                                color: '#6B7280',\n                                mb: 0.25,\n                                textTransform: 'uppercase',\n                                letterSpacing: '0.04em'\n                              }}\n                            >\n                              Connection\n                            </Typography>\n                            <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                              <Box\n                                sx={{\n                                  width: 8,\n                                  height: 8,\n                                  backgroundColor: device.connection_type === 'WiFi' ? '#2563EB' : '#16A34A',\n                                  borderRadius: '50%',\n                                  boxShadow: '0 0 0 3px rgba(37, 99, 235, 0.1)'\n                                }}\n                              />\n                              <Typography\n                                sx={{\n                                  fontSize: '11px',\n                                  fontWeight: 600,\n                                  color: '#0F172A'\n                                }}\n                              >\n                                {device.connection_type || 'USB'}\n                              </Typography>\n                            </Box>\n                          </Box>\n                        </Box>\n\n                        <Box sx={{ display: 'flex', gap: 1 }}>\n                          <Button\n                            size=\"small\"\n                            variant=\"outlined\"\n                            onClick={() => handleDisconnect(device)}\n                            sx={{\n                              fontSize: '10px',\n                              height: 24,\n                              flex: 1,\n                              borderRadius: '6px',\n                              borderColor: isDisconnected ? '#16A34A' : '#DC2626',\n                              color: isDisconnected ? '#16A34A' : '#DC2626',\n                              '&:hover': { \n                                backgroundColor: isDisconnected ? '#16A34A' : '#DC2626',\n                                color: '#FFFFFF'\n                              }\n                            }}\n                          >\n                            {isDisconnected ? 'Connect' : 'Disconnect'}\n                          </Button>\n                          <Button\n                            size=\"small\"\n                            variant=\"outlined\"\n                            onClick={() => handleShowDetails(device)}\n                            sx={{\n                              fontSize: '10px',\n                              height: 24,\n                              flex: 1,\n                              borderRadius: '6px',\n                              borderColor: '#2563EB',\n                              color: '#2563EB',\n                              '&:hover': { \n                                backgroundColor: '#2563EB',\n                                color: '#FFFFFF'\n                              }\n                            }}\n                          >\n                            Details\n                          </Button>\n                        </Box>\n                      </Box>\n                    );\n                  })}\n                  {filteredDevices.length > 10 && (\n                    <Typography sx={{\n                      fontSize: '12px',\n                      color: tokens.colors.subtext,\n                      textAlign: 'center',\n                      mt: 2\n                    }}>\n                      +{filteredDevices.length - 10} more devices\n                    </Typography>\n                  )}\n                </Box>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Recent Activity Panel */}\n          <Card sx={{ ...cardBaseSx, ...hoverableCardSx }}>\n            <CardContent sx={{ padding: `${tokens.card.padding}px ${tokens.spacing}px` }}>\n              <Box sx={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                mb: 3\n              }}>\n                <Typography sx={{\n                  fontSize: '16px',\n                  lineHeight: '24px',\n                  fontWeight: 600,\n                  color: tokens.colors.text\n                }}>\n                  Recent Activity\n                </Typography>\n                <Stack direction=\"row\" spacing={1}>\n                  <Button\n                    variant=\"text\"\n                    onClick={handleViewAllActivity}\n                    disabled={activityItems.length === 0}\n                    sx={{\n                      height: 30,\n                      color: tokens.colors.subtext,\n                      textTransform: 'none',\n                      fontSize: '12px'\n                    }}\n                  >\n                    {activityViewAll ? 'Show Recent' : 'View All'}\n                  </Button>\n                  <Button\n                    variant=\"text\"\n                    onClick={handleClearActivity}\n                    disabled={activityItems.length === 0 && !activityLoading}\n                    sx={{\n                      height: 30,\n                      color: tokens.colors.subtext,\n                      textTransform: 'none',\n                      fontSize: '12px'\n                    }}\n                  >\n                    Clean All\n                  </Button>\n                </Stack>\n              </Box>\n\n              <List sx={{ padding: 0 }}>\n                {activityLoading ? (\n                  <ListItem\n                    sx={{\n                      height: 56,\n                      borderRadius: '10px',\n                      border: `1px solid ${tokens.colors.border}`,\n                      mb: 1,\n                      padding: '0 16px',\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: 2\n                    }}\n                  >\n                    <CircularProgress size={18} />\n                    <Typography sx={{ fontSize: '14px', color: tokens.colors.subtext }}>Loading activity</Typography>\n                  </ListItem>\n                ) : activityItems.length === 0 ? (\n                  <ListItem\n                    sx={{\n                      height: 56,\n                      borderRadius: '10px',\n                      border: `1px solid ${tokens.colors.border}`,\n                      padding: '0 16px',\n                      display: 'flex',\n                      alignItems: 'center'\n                    }}\n                  >\n                    <Typography sx={{ fontSize: '14px', color: tokens.colors.subtext }}>\n                      No recent executions yet.\n                    </Typography>\n                  </ListItem>\n                ) : (\n                  displayedActivityItems.map((activity) => {\n                    const iconColor =\n                      activity.icon === 'check'\n                        ? tokens.colors.success\n                        : activity.icon === 'warning'\n                          ? tokens.colors.warning\n                          : tokens.colors.primary;\n                    const timestamp = activity.meta || (activity.ts ? new Date(activity.ts).toLocaleString() : 'Just now');\n                    return (\n                      <ListItem\n                        key={activity.id}\n                        sx={{\n                          height: 56,\n                          borderRadius: '10px',\n                          border: `1px solid ${tokens.colors.border}`,\n                          mb: 1,\n                          padding: '0 16px',\n                          '&:last-child': { mb: 0 }\n                        }}\n                      >\n                        <ListItemIcon sx={{ minWidth: 40 }}>\n                          <Box sx={{ color: iconColor }}>\n                            {renderActivityIcon(activity)}\n                          </Box>\n                        </ListItemIcon>\n                        <ListItemText\n                          primary={\n                            <Typography sx={{\n                              fontSize: '14px',\n                              fontWeight: 500,\n                              color: tokens.colors.text\n                            }}>\n                              {activity.title}\n                            </Typography>\n                          }\n                          secondary={\n                            <Typography sx={{\n                              fontSize: '12px',\n                              color: tokens.colors.subtext\n                            }}>\n                              {timestamp}\n                            </Typography>\n                          }\n                        />\n                      </ListItem>\n                    );\n                  })\n                )}\n              </List>\n\n              {activityItems.length > ACTIVITY_PAGE_SIZE && (\n                <Box\n                  sx={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    mt: 2,\n                  }}\n                >\n                  {!activityViewAll ? (\n                    <>\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <IconButton\n                          size=\"small\"\n                          onClick={handlePrevActivityPage}\n                          disabled={!canGoPrevActivity}\n                          sx={{ border: `1px solid ${tokens.colors.border}` }}\n                        >\n                          <ChevronLeft size={16} />\n                        </IconButton>\n                        <Typography sx={{ fontSize: '12px', color: tokens.colors.subtext }}>\n                          Page {activityPage + 1} / {activityTotalPages}\n                        </Typography>\n                        <IconButton\n                          size=\"small\"\n                          onClick={handleNextActivityPage}\n                          disabled={!canGoNextActivity}\n                          sx={{ border: `1px solid ${tokens.colors.border}` }}\n                        >\n                          <ChevronRight size={16} />\n                        </IconButton>\n                      </Box>\n                      <Typography sx={{ fontSize: '12px', color: '#94A3B8' }}>\n                        Showing {activityPageCount} of {activityItems.length}\n                      </Typography>\n                    </>\n                  ) : (\n                    <Typography sx={{ fontSize: '12px', color: '#94A3B8' }}>\n                      Showing all {activityItems.length} activities\n                    </Typography>\n                  )}\n                </Box>\n              )}\n            </CardContent>\n          </Card>\n        </Box>\n      </Box>\n\n      {/* Setup Dialog */}\n      <Dialog\n        open={setupDialogOpen}\n        onClose={() => setSetupDialogOpen(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle sx={{ fontWeight: 600, color: '#0F172A' }}>\n          Devices Requiring Setup\n        </DialogTitle>\n        <DialogContent dividers>\n          {setupCandidates.length === 0 ? (\n            <Typography sx={{ color: '#475569', fontSize: '14px' }}>\n              All detected devices are ready to use. Connect a new device or refresh to rescan.\n            </Typography>\n          ) : (\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n              {setupCandidates.map((device) => (\n                <Paper\n                  key={device.id}\n                  variant=\"outlined\"\n                  sx={{ padding: '12px 16px', borderRadius: '10px', borderColor: '#E2E8F0' }}\n                >\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 1 }}>\n                    <Box>\n                      <Typography sx={{ fontSize: '14px', fontWeight: 600, color: '#0F172A' }}>\n                        {device.model || device.id}\n                      </Typography>\n                      <Typography sx={{ fontSize: '12px', color: '#6B7280' }}>\n                        {describeSetupRequirements(device)}\n                      </Typography>\n                    </Box>\n                    <Chip\n                      label={device.raw_adb_status || device.adb_status || device.raw_status || device.status || 'unknown'}\n                      size=\"small\"\n                      sx={{ textTransform: 'capitalize', backgroundColor: '#F3F4F6', color: '#475569' }}\n                    />\n                  </Box>\n                  <Box sx={{ display: 'flex', gap: 1 }}>\n                    <Button\n                      variant=\"contained\"\n                      size=\"small\"\n                      onClick={() => handleConfigureDevice(device)}\n                      disabled={deviceSetupLoading === device.id}\n                      startIcon={\n                        deviceSetupLoading === device.id ? <CircularProgress size={14} sx={{ color: '#FFFFFF' }} /> : undefined\n                      }\n                      sx={{\n                        textTransform: 'none',\n                        borderRadius: '8px',\n                        backgroundColor: '#2563EB',\n                        '&:hover': { backgroundColor: '#1E40AF' }\n                      }}\n                    >\n                      {deviceSetupLoading === device.id ? 'Configuring' : 'Configure automatically'}\n                    </Button>\n                    <Button\n                      variant=\"outlined\"\n                      size=\"small\"\n                      onClick={() => handleShowDetails(device)}\n                      sx={{\n                        textTransform: 'none',\n                        borderRadius: '8px',\n                        borderColor: '#1E293B',\n                        color: '#1E293B',\n                        '&:hover': { backgroundColor: '#1E293B', color: '#FFFFFF' }\n                      }}\n                    >\n                      View details\n                    </Button>\n                  </Box>\n                </Paper>\n              ))}\n              <Typography sx={{ fontSize: '12px', color: '#64748B' }}>\n                Tip: Ensure the device is unlocked, developer options are enabled, and USB debugging is allowed.\n              </Typography>\n            </Box>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setSetupDialogOpen(false)} sx={{ textTransform: 'none' }}>\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Alias Editor */}\n      <Dialog\n        open={Boolean(aliasEditor)}\n        onClose={handleAliasDialogClose}\n        maxWidth=\"xs\"\n        fullWidth\n      >\n        <DialogTitle sx={{ fontWeight: 600, color: '#0F172A' }}>\n          {aliasEditor?.value ? 'Edit alias' : 'Add alias'}\n        </DialogTitle>\n        <DialogContent dividers>\n          <TextField\n            autoFocus\n            label=\"Alias\"\n            value={aliasEditor?.value ?? ''}\n            onChange={(event) => handleAliasInputChange(event.target.value)}\n            placeholder=\"e.g. QA Pixel 8\"\n            fullWidth\n            size=\"small\"\n            helperText=\"Visible across dashboard, Device Manager, and workflows.\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleAliasDialogClose} disabled={aliasSaving} sx={{ textTransform: 'none' }}>\n            Cancel\n          </Button>\n          <Button\n            onClick={handleAliasSave}\n            disabled={!aliasEditor || aliasSaving}\n            variant=\"contained\"\n            sx={{ textTransform: 'none' }}\n          >\n            {aliasSaving ? 'Saving' : 'Save'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Device Details Modal */}\n      <Dialog\n        open={showDeviceDetails}\n        onClose={() => setShowDeviceDetails(false)}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle sx={{\n          fontSize: '20px',\n          fontWeight: 600,\n          color: '#0F172A',\n          borderBottom: '1px solid #E5E7EB'\n        }}>\n          Device Details - {selectedDeviceDetails?.model || selectedDeviceDetails?.id}\n        </DialogTitle>\n        <DialogContent sx={{ padding: '24px' }}>\n          {selectedDeviceDetails && (\n            <Box sx={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: 3 }}>\n              <Box>\n                <Typography sx={{ fontSize: '14px', color: '#6B7280', mb: 1 }}>Device Model</Typography>\n                <Typography sx={{ fontSize: '16px', fontWeight: 600, color: '#0F172A', mb: 2 }}>\n                  {selectedDeviceDetails.model}\n                </Typography>\n              </Box>\n              <Box>\n                <Typography sx={{ fontSize: '14px', color: '#6B7280', mb: 1 }}>Serial Number</Typography>\n                <Typography sx={{ fontSize: '16px', fontWeight: 700, color: '#0F172A', mb: 2 }}>\n                  {selectedDeviceDetails.serial || selectedDeviceDetails.id}\n                </Typography>\n              </Box>\n              <Box>\n                <Typography sx={{ fontSize: '14px', color: '#6B7280', mb: 1 }}>Android Version</Typography>\n                <Typography sx={{ fontSize: '16px', fontWeight: 600, color: '#0F172A', mb: 2 }}>\n                  {formatAndroidVersion(selectedDeviceDetails)}\n                </Typography>\n              </Box>\n              <Box>\n                <Typography sx={{ fontSize: '14px', color: '#6B7280', mb: 1 }}>Network Operator</Typography>\n                <Typography sx={{ fontSize: '16px', fontWeight: 600, color: '#0F172A', mb: 2 }}>\n                  {resolveOperatorLabel(selectedDeviceDetails)}\n                </Typography>\n              </Box>\n              <Box>\n                <Typography sx={{ fontSize: '14px', color: '#6B7280', mb: 1 }}>Network Technology</Typography>\n                <Typography sx={{ fontSize: '16px', fontWeight: 600, color: '#0F172A', mb: 2 }}>\n                  {formatNetworkTechnology(selectedDeviceDetails.network_technology)}\n                </Typography>\n              </Box>\n              <Box>\n                <Typography sx={{ fontSize: '14px', color: '#6B7280', mb: 1 }}>Battery Level</Typography>\n                <Typography sx={{ fontSize: '16px', fontWeight: 600, color: '#0F172A', mb: 2 }}>\n                  {formatBatteryLevel(selectedDeviceDetails.battery_level)}\n                </Typography>\n              </Box>\n              <Box>\n                <Typography sx={{ fontSize: '14px', color: '#6B7280', mb: 1 }}>Connection Type</Typography>\n                <Typography sx={{ fontSize: '16px', fontWeight: 600, color: '#0F172A', mb: 2 }}>\n                  {selectedDeviceDetails.connection_type || 'USB'}\n                </Typography>\n              </Box>\n              <Box>\n                <Typography sx={{ fontSize: '14px', color: '#6B7280', mb: 1 }}>Status</Typography>\n                <Typography sx={{ fontSize: '16px', fontWeight: 600, color: '#0F172A', mb: 2 }}>\n                  {selectedDeviceDetails.status}\n                </Typography>\n              </Box>\n              <Box sx={{ gridColumn: 'span 2' }}>\n                <Typography sx={{ fontSize: '14px', color: '#6B7280', mb: 1 }}>Last Seen</Typography>\n                <Typography sx={{ fontSize: '16px', fontWeight: 600, color: '#0F172A', mb: 2 }}>\n                  {formatLastSeen(selectedDeviceDetails.last_seen)}\n                </Typography>\n              </Box>\n            </Box>\n          )}\n        </DialogContent>\n        <DialogActions sx={{ padding: '16px 24px', borderTop: '1px solid #E5E7EB' }}>\n          <Button\n            onClick={() => setShowDeviceDetails(false)}\n            sx={{\n              color: '#6B7280',\n              textTransform: 'none',\n              fontWeight: 600\n            }}\n          >\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* About Dialog */}\n      <Dialog open={aboutDialogOpen} onClose={() => setAboutDialogOpen(false)} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>About MOBIQ v1.0</DialogTitle>\n        <DialogContent dividers>\n          <Stack spacing={2}>\n            <Typography variant=\"body1\">\n              MOBIQ v1.0 centralizes the Android automation backend, React dashboard, and Electron shell into a single\n              desktop experience tailored for field teams. It streams live device telemetry, runs scripted modules, and\n              orchestrates repeatable workflows without juggling multiple CLI tools.\n            </Typography>\n            <Box>\n              <Typography variant=\"subtitle2\" sx={{ fontWeight: 600, mb: 0.5 }}>Highlights</Typography>\n              <List dense sx={{ pl: 2 }}>\n                <ListItem sx={{ pl: 0 }}>\n                  <ListItemText primary=\"Live device intelligence: operator, radio access, battery, and debug status.\" />\n                </ListItem>\n                <ListItem sx={{ pl: 0 }}>\n                  <ListItemText primary=\"Prebuilt telco modules (airplane mode, call tests, ping, registration checks).\" />\n                </ListItem>\n                <ListItem sx={{ pl: 0 }}>\n                  <ListItemText primary=\"Workflow composer with local storage, execution history, and retry controls.\" />\n                </ListItem>\n                <ListItem sx={{ pl: 0 }}>\n                  <ListItemText primary=\"Offline-ready installer (Electron + PyInstaller) for Windows field laptops.\" />\n                </ListItem>\n              </List>\n            </Box>\n            <Box>\n              <Typography variant=\"subtitle2\" sx={{ fontWeight: 600, mb: 0.5 }}>Build information</Typography>\n              <Typography variant=\"body2\">\n                Version 1.0.0  Electron 28  React 18  Python 3.12. Documentation and updates live in the project wiki and\n                release notes. For incidents or feature requests, open an issue in the repository or contact the support channel.\n              </Typography>\n            </Box>\n          </Stack>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setAboutDialogOpen(false)} sx={{ textTransform: 'none' }}>\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default Dashboard;\n","export const dashboardTheme = {\n  radius: 16,\n  spacing: 24,\n  card: {\n    padding: 20,\n    elevation: 6,\n  },\n  colors: {\n    bg: '#F7FAFC',\n    panel: '#FFFFFF',\n    text: '#1A202C',\n    subtext: '#4A5568',\n    primary: '#2563EB',\n    success: '#16A34A',\n    warning: '#D97706',\n    danger: '#DC2626',\n    border: '#E2E8F0',\n    mutedBorder: '#CBD5F5',\n    accent: '#EEF2FF',\n  },\n  shadows: {\n    card: '0 8px 24px rgba(0,0,0,0.06)',\n    cardHover: '0 12px 32px rgba(0,0,0,0.08)',\n  },\n} as const;\n\nexport type DashboardTheme = typeof dashboardTheme;\n","import { Device } from '../types';\nimport { resolveBaseUrl } from './utils';\n\nconst resolveApiKey = (): string | null => {\n  // Prefer env (build-time) then localStorage override if set by user/admin\n  const envKey = process.env.REACT_APP_API_KEY || process.env.API_KEY;\n  const stored = typeof window !== 'undefined' ? window.localStorage.getItem('API_KEY') : null;\n  return (stored && stored.trim()) || (envKey && envKey.trim()) || null;\n};\n\nconst authHeaders = (): HeadersInit => {\n  const key = resolveApiKey();\n  return key ? { 'X-API-Key': key } : {};\n};\n\nconst extractDevices = (payload: unknown): any[] => {\n  if (Array.isArray(payload)) {\n    return payload;\n  }\n  if (payload && typeof payload === 'object') {\n    const devices = (payload as { devices?: unknown }).devices;\n    if (Array.isArray(devices)) {\n      return devices;\n    }\n  }\n  return [];\n};\n\nconst normalizeStatus = (status: unknown): Device['status'] => {\n  if (typeof status !== 'string') {\n    return 'disconnected';\n  }\n  const normalized = status.toLowerCase();\n  if (['device', 'online', 'connected'].includes(normalized)) {\n    return 'connected';\n  }\n  if (['busy', 'in_use'].includes(normalized)) {\n    return 'busy';\n  }\n  if (['disconnected', 'offline', 'unauthorized'].includes(normalized)) {\n    return 'disconnected';\n  }\n  return normalized;\n};\n\nconst normalizeDevices = (payload: unknown): Device[] => {\n  return extractDevices(payload).map((device: any) => {\n    const rawStatus = typeof device?.status === 'string' ? device.status : undefined;\n    const rawAdbStatus = typeof device?.adb_status === 'string' ? device.adb_status : undefined;\n    const normalizedStatus = normalizeStatus(rawStatus);\n    const normalizedAdbStatus = normalizeStatus(rawAdbStatus);\n    const developerModeFlag = device?.developer_mode_enabled;\n    const usbDebuggingFlag = device?.usb_debugging_enabled;\n    const backendRequiresSetup =\n      typeof device?.requires_setup === 'boolean' ? device.requires_setup : undefined;\n\n    let requiresSetup =\n      backendRequiresSetup !== undefined\n        ? backendRequiresSetup\n        : normalizedAdbStatus !== 'connected' ||\n          normalizedStatus === 'disconnected' ||\n          device?.developer_mode_enabled === false ||\n          device?.usb_debugging_enabled === false;\n\n    const statusIndicatesReady = ['connected', 'busy'].includes(normalizedStatus);\n    const adbIndicatesReady = normalizedAdbStatus === 'connected' || rawAdbStatus === undefined;\n\n    const shouldAutoApprove =\n      statusIndicatesReady &&\n      adbIndicatesReady &&\n      developerModeFlag !== false &&\n      usbDebuggingFlag !== false;\n\n    if (shouldAutoApprove) {\n      requiresSetup = false;\n    }\n\n    return {\n      ...device,\n      status: normalizedStatus,\n      raw_status: rawStatus,\n      raw_adb_status: rawAdbStatus,\n      requires_setup: requiresSetup,\n    };\n  });\n};\n\nexport const deviceApi = {\n  async getDevices(baseUrl?: string, scopeId?: string): Promise<Device[]> {\n    try {\n      const resolvedBase = resolveBaseUrl(baseUrl);\n      const url = new URL(`${resolvedBase}/api/v1/devices/`);\n      if (scopeId && scopeId !== 'all') {\n        url.searchParams.set('scope', scopeId);\n      }\n      const response = await fetch(url.toString(), { headers: authHeaders() });\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const payload = await response.json();\n      return normalizeDevices(payload);\n    } catch (error) {\n      console.error('Error fetching devices:', error);\n      // Fallback to legacy endpoint\n      try {\n        const resolvedBase = resolveBaseUrl(baseUrl);\n        const response = await fetch(`${resolvedBase}/api/devices/`, { headers: authHeaders() });\n        if (response.ok) {\n          const payload = await response.json();\n          return normalizeDevices(payload);\n        }\n      } catch (fallbackError) {\n        console.error('Fallback API also failed:', fallbackError);\n      }\n      return [];\n    }\n  },\n\n  async scanDevices(baseUrl?: string, scopeId?: string): Promise<void> {\n    const resolvedBase = resolveBaseUrl(baseUrl);\n    const url = new URL(`${resolvedBase}/api/v1/devices/scan`);\n    if (scopeId && scopeId !== 'all') {\n      url.searchParams.set('scope', scopeId);\n    }\n    await fetch(url.toString(), { method: 'POST', headers: authHeaders() }).catch((error) => {\n      console.error('Error scanning devices:', error);\n    });\n  },\n\n  async refreshDevice(baseUrl: string | undefined, deviceId: string): Promise<void> {\n    const resolvedBase = resolveBaseUrl(baseUrl);\n    await fetch(`${resolvedBase}/api/v1/devices/${deviceId}/refresh`, { method: 'POST', headers: authHeaders() }).catch((error) => {\n      console.error('Error refreshing device:', error);\n    });\n  },\n\n  async captureScreenshot(baseUrl: string | undefined, deviceId: string): Promise<any> {\n    try {\n      const resolvedBase = resolveBaseUrl(baseUrl);\n      const response = await fetch(`${resolvedBase}/api/v1/devices/${deviceId}/screenshot`, { method: 'POST', headers: authHeaders() });\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error capturing screenshot:', error);\n      throw error;\n    }\n  },\n\n  async testDevice(deviceId: string, baseUrl?: string): Promise<{ success: boolean; message: string }> {\n    const resolvedBase = resolveBaseUrl(baseUrl);\n    const response = await fetch(`${resolvedBase}/api/v1/devices/${deviceId}/test`, {\n      method: 'POST',\n      headers: authHeaders(),\n    });\n    return await response.json();\n  },\n\n  async rebootDevice(deviceId: string, baseUrl?: string): Promise<{ success: boolean; message: string }> {\n    const resolvedBase = resolveBaseUrl(baseUrl);\n    const response = await fetch(`${resolvedBase}/api/v1/devices/${deviceId}/reboot`, {\n      method: 'POST',\n      headers: authHeaders(),\n    });\n    return await response.json();\n  },\n\n  async disconnectDevice(deviceId: string, baseUrl?: string): Promise<{ success: boolean; message: string }> {\n    const resolvedBase = resolveBaseUrl(baseUrl);\n    const response = await fetch(`${resolvedBase}/api/v1/devices/${deviceId}/disconnect`, {\n      method: 'POST',\n      headers: authHeaders(),\n    });\n    return await response.json();\n  },\n\n  async configureDevice(deviceId: string, baseUrl?: string): Promise<any> {\n    const resolvedBase = resolveBaseUrl(baseUrl);\n    const response = await fetch(`${resolvedBase}/api/v1/devices/${deviceId}/setup`, {\n      method: 'POST',\n      headers: authHeaders(),\n    });\n    if (!response.ok) {\n      const text = await response.text();\n      throw new Error(text || `HTTP ${response.status}`);\n    }\n    return response.json();\n  },\n\n  async downloadDeviceReport(\n    deviceId: string,\n    opts: { from?: string; to?: string; baseUrl?: string }\n  ): Promise<string> {\n    const resolvedBase = resolveBaseUrl(opts.baseUrl);\n    const url = new URL(`${resolvedBase}/api/v1/devices/${deviceId}/report`);\n    if (opts.from) {\n      url.searchParams.set('from_ts', opts.from);\n    }\n    if (opts.to) {\n      url.searchParams.set('to_ts', opts.to);\n    }\n    const response = await fetch(url.toString(), { headers: authHeaders() });\n    if (!response.ok) {\n      const text = await response.text();\n      throw new Error(text || `HTTP ${response.status}`);\n    }\n    const blob = await response.blob();\n    const disposition = response.headers.get('content-disposition') || '';\n    const match = disposition.match(/filename=\\\"?([^\\\";]+)\\\"?/i);\n    const filename = match?.[1] || `device-report-${deviceId}.pdf`;\n    const link = document.createElement('a');\n    const objectUrl = window.URL.createObjectURL(blob);\n    link.href = objectUrl;\n    link.download = filename;\n    link.style.display = 'none';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    window.URL.revokeObjectURL(objectUrl);\n    return filename;\n  }\n};\n","import { Device } from '@types';\n\ntype CacheStore = Record<\n  string,\n  {\n    devices: Device[];\n    timestamp: number;\n  }\n>;\n\nconst CACHE_KEY = 'devices-cache';\nconst DEFAULT_SCOPE = '__default__';\n\nconst safeParse = (value: string | null): CacheStore => {\n  if (!value) {\n    return {};\n  }\n  try {\n    const parsed = JSON.parse(value);\n    if (parsed && typeof parsed === 'object') {\n      return parsed as CacheStore;\n    }\n  } catch (error) {\n    console.warn('[deviceCache] Failed to parse cache', error);\n  }\n  return {};\n};\n\nconst writeStore = (store: CacheStore) => {\n  try {\n    window.localStorage.setItem(CACHE_KEY, JSON.stringify(store));\n  } catch (error) {\n    console.warn('[deviceCache] Failed to persist cache', error);\n  }\n};\n\nconst getScopeKey = (scopeId?: string) => scopeId ?? DEFAULT_SCOPE;\n\nexport const readDeviceCache = (scopeId?: string): { devices: Device[]; timestamp: number } | null => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return null;\n  }\n  const store = safeParse(window.localStorage.getItem(CACHE_KEY));\n  const scoped = store[getScopeKey(scopeId)];\n  if (!scoped) {\n    return null;\n  }\n  return {\n    devices: Array.isArray(scoped.devices) ? scoped.devices : [],\n    timestamp: typeof scoped.timestamp === 'number' ? scoped.timestamp : Date.now(),\n  };\n};\n\nexport const writeDeviceCache = (scopeId: string | undefined, devices: Device[]) => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return;\n  }\n  const store = safeParse(window.localStorage.getItem(CACHE_KEY));\n  store[getScopeKey(scopeId)] = {\n    devices,\n    timestamp: Date.now(),\n  };\n  writeStore(store);\n};\n\nexport const clearDeviceCache = (scopeId?: string) => {\n  if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {\n    return;\n  }\n  const store = safeParse(window.localStorage.getItem(CACHE_KEY));\n  const key = getScopeKey(scopeId);\n  if (store[key]) {\n    delete store[key];\n    writeStore(store);\n  }\n};\n","/**\n * WebSocket service for real-time updates (native WebSocket).\n */\n\n// Using browser/Web API WebSocket to match FastAPI native WS endpoints\n\nexport interface DeviceStatusUpdate {\n  type: 'device_status';\n  device_id: string;\n  status: string;\n  last_seen: string;\n  timestamp: string;\n}\n\nexport interface ExecutionProgressUpdate {\n  type: 'execution_progress';\n  execution_id: string;\n  progress_percentage: number;\n  current_step: string;\n  timestamp: string;\n}\n\nexport interface StepCompletedUpdate {\n  type: 'step_completed';\n  execution_id: string;\n  device_id: string;\n  step_id: string;\n  module_id: string;\n  status: string;\n  duration_seconds: number;\n  screenshot_url?: string;\n  timestamp: string;\n}\n\nexport interface LogEntry {\n  type: 'log_entry';\n  execution_id: string;\n  device_id: string;\n  level: string;\n  message: string;\n  module_id?: string;\n  timestamp: string;\n}\n\nexport type WebSocketMessage = \n  | DeviceStatusUpdate \n  | ExecutionProgressUpdate \n  | StepCompletedUpdate \n  | LogEntry;\n\nclass WebSocketService {\n  private executionSocket: WebSocket | null = null;\n  private devicesSocket: WebSocket | null = null;\n  private backendUrl: string = '';\n  private listeners: Map<string, Set<(data: any) => void>> = new Map();\n  private connectionListeners: Set<(state: 'connected' | 'disconnected') => void> = new Set();\n  private pendingDeviceSubscriptions: Set<string> = new Set();\n\n  private toWs(baseHttpUrl: string): string {\n    return baseHttpUrl.replace(/^http/, 'ws');\n  }\n\n  connectExecution(backendUrl: string, executionId: string): void {\n    if (!backendUrl) {\n      console.warn('WebSocketService: backendUrl is empty, skipping execution WS connection');\n      return;\n    }\n    this.backendUrl = backendUrl;\n    const wsUrl = `${this.toWs(backendUrl)}/api/v1/ws/executions/${executionId}`;\n    if (this.executionSocket && this.executionSocket.readyState <= 1) return;\n\n    this.executionSocket = new WebSocket(wsUrl);\n    this.executionSocket.onopen = () => { console.log('WS (execution) connected'); this.notifyConnection(); };\n    this.executionSocket.onclose = () => { console.log('WS (execution) disconnected'); this.notifyConnection(); };\n    this.executionSocket.onerror = (e) => console.error('WS (execution) error:', e);\n    this.executionSocket.onmessage = (ev: MessageEvent) => {\n      try {\n        const msg = JSON.parse(ev.data) as WebSocketMessage;\n        this.handleMessage(msg);\n      } catch (e) {\n        console.error('Invalid WS (execution) message:', ev.data);\n      }\n    };\n  }\n\n  disconnectExecution(): void {\n    if (this.executionSocket) {\n      this.executionSocket.close();\n      this.executionSocket = null;\n    }\n    this.notifyConnection();\n  }\n\n  connectDevices(backendUrl: string): void {\n    if (!backendUrl) {\n      console.warn('WebSocketService: backendUrl is empty, skipping device WS connection');\n      return;\n    }\n    this.backendUrl = backendUrl;\n    const wsUrl = `${this.toWs(backendUrl)}/api/v1/ws/devices`;\n    if (this.devicesSocket && this.devicesSocket.readyState <= 1) return;\n\n    this.devicesSocket = new WebSocket(wsUrl);\n    this.devicesSocket.onopen = () => {\n      console.log('WS (devices) connected');\n      this.notifyConnection();\n      // Flush pending subscriptions when the socket becomes available\n      this.pendingDeviceSubscriptions.forEach((deviceId) => {\n        this.sendDeviceSubscription('subscribe_device', deviceId);\n      });\n    };\n    this.devicesSocket.onclose = () => { console.log('WS (devices) disconnected'); this.notifyConnection(); };\n    this.devicesSocket.onerror = (e) => console.error('WS (devices) error:', e);\n    this.devicesSocket.onmessage = (ev: MessageEvent) => {\n      try {\n        const data = JSON.parse(ev.data);\n        const messages = Array.isArray(data) ? data : [data];\n        messages.forEach((msg) => {\n          if (msg && typeof msg === 'object' && 'type' in msg) {\n            this.handleMessage(msg as WebSocketMessage);\n          } else {\n            console.warn('WS (devices) ignored message without type:', msg);\n          }\n        });\n      } catch (e) {\n        console.error('Invalid WS (devices) message:', ev.data);\n      }\n    };\n  }\n\n  disconnectDevices(): void {\n    if (this.devicesSocket) {\n      this.devicesSocket.close();\n      this.devicesSocket = null;\n    }\n    this.notifyConnection();\n  }\n\n  disconnectAll(): void {\n    this.disconnectExecution();\n    this.disconnectDevices();\n    this.listeners.clear();\n  }\n\n  private handleMessage(message: WebSocketMessage): void {\n    // Notify type-specific listeners\n    const typeListeners = this.listeners.get(message.type);\n    if (typeListeners) {\n      typeListeners.forEach(callback => callback(message));\n    }\n\n    // Notify general listeners\n    const generalListeners = this.listeners.get('*');\n    if (generalListeners) {\n      generalListeners.forEach(callback => callback(message));\n    }\n  }\n\n  // Subscribe to specific message types\n  subscribe(messageType: string, callback: (data: any) => void): () => void {\n    if (!this.listeners.has(messageType)) {\n      this.listeners.set(messageType, new Set());\n    }\n    \n    this.listeners.get(messageType)!.add(callback);\n\n    // Return unsubscribe function\n    return () => {\n      const listeners = this.listeners.get(messageType);\n      if (listeners) {\n        listeners.delete(callback);\n        if (listeners.size === 0) {\n          this.listeners.delete(messageType);\n        }\n      }\n    };\n  }\n\n  // Subscribe to device status updates\n  subscribeToDeviceUpdates(callback: (update: DeviceStatusUpdate) => void): () => void {\n    return this.subscribe('device_status', callback);\n  }\n\n  // Subscribe to execution progress\n  subscribeToExecutionProgress(callback: (update: ExecutionProgressUpdate) => void): () => void {\n    return this.subscribe('execution_progress', callback);\n  }\n\n  // Subscribe to step completion\n  subscribeToStepCompletion(callback: (update: StepCompletedUpdate) => void): () => void {\n    return this.subscribe('step_completed', callback);\n  }\n\n  // Subscribe to log entries\n  subscribeToLogs(callback: (log: LogEntry) => void): () => void {\n    return this.subscribe('log_entry', callback);\n  }\n\n  // Subscribe to all messages\n  subscribeToAll(callback: (message: WebSocketMessage) => void): () => void {\n    return this.subscribe('*', callback);\n  }\n\n  // Send messages to server (for device-related commands)\n  subscribeToDevice(deviceId: string): void {\n    this.pendingDeviceSubscriptions.add(deviceId);\n    this.sendDeviceSubscription('subscribe_device', deviceId);\n  }\n\n  unsubscribeFromDevice(deviceId: string): void {\n    this.pendingDeviceSubscriptions.delete(deviceId);\n    this.sendDeviceSubscription('unsubscribe_device', deviceId);\n  }\n\n  private sendDeviceSubscription(action: 'subscribe_device' | 'unsubscribe_device', deviceId: string) {\n    if (this.devicesSocket && this.devicesSocket.readyState === this.devicesSocket.OPEN) {\n      this.devicesSocket.send(JSON.stringify({ type: action, device_id: deviceId }));\n    }\n  }\n\n  startLivePreview(deviceId: string, quality: 'low' | 'medium' | 'high' = 'medium'): void {\n    if (this.devicesSocket && this.devicesSocket.readyState === this.devicesSocket.OPEN) {\n      this.devicesSocket.send(JSON.stringify({ type: 'start_preview', device_id: deviceId, quality }));\n    }\n  }\n\n  stopLivePreview(deviceId: string): void {\n    if (this.devicesSocket && this.devicesSocket.readyState === this.devicesSocket.OPEN) {\n      this.devicesSocket.send(JSON.stringify({ type: 'stop_preview', device_id: deviceId }));\n    }\n  }\n\n  // Connection status\n  isConnected(): boolean {\n    const execOpen = this.executionSocket?.readyState === this.executionSocket?.OPEN;\n    const devOpen = this.devicesSocket?.readyState === this.devicesSocket?.OPEN;\n    return Boolean(execOpen || devOpen);\n  }\n\n  // Get connection state\n  getConnectionState(): string {\n    if (this.isConnected()) return 'connected';\n    return 'disconnected';\n  }\n\n  // Connection status subscriptions\n  subscribeConnectionStatus(callback: (state: 'connected' | 'disconnected') => void): () => void {\n    this.connectionListeners.add(callback);\n    return () => {\n      this.connectionListeners.delete(callback);\n    };\n  }\n\n  private notifyConnection(): void {\n    const state = (this.getConnectionState() as 'connected' | 'disconnected');\n    this.connectionListeners.forEach(cb => cb(state));\n  }\n}\n\nexport const webSocketService = new WebSocketService();\n","import { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { deviceApi } from '../services/deviceApi';\nimport { Device } from '@types';\nimport { readDeviceCache, writeDeviceCache } from '../utils/deviceCache';\nimport { resolveBaseUrl } from '../services/utils';\nimport { webSocketService } from '../services/websocket';\nimport type { DeviceStatusUpdate } from '../services/websocket';\n\ntype Status = 'idle' | 'loading' | 'success' | 'error';\n\nexport interface UseDevicesOptions {\n  backendUrl?: string;\n  scopeId?: string;\n  pollMs?: number;\n  autoRefresh?: boolean;\n}\n\nexport interface UseDevicesResult {\n  devices: Device[];\n  status: Status;\n  error: Error | null;\n  refresh: () => Promise<void>;\n  isEmpty: boolean;\n  lastUpdated: number | null;\n  applyDevicePatch: (deviceId: string, patch: Partial<Device>) => void;\n}\n\nlet deviceSocketRefs = 0;\n\nexport const useDevices = (options: UseDevicesOptions = {}): UseDevicesResult => {\n  const { backendUrl, scopeId, pollMs = 15000, autoRefresh = true } = options;\n\n  const initialCache = useMemo(() => readDeviceCache(scopeId), [scopeId]);\n  const [devices, setDevicesState] = useState<Device[]>(initialCache?.devices ?? []);\n  const [status, setStatus] = useState<Status>(initialCache ? 'success' : 'idle');\n  const [lastUpdated, setLastUpdated] = useState<number | null>(initialCache?.timestamp ?? null);\n  const [error, setError] = useState<Error | null>(null);\n  const pollRef = useRef<ReturnType<typeof setInterval> | null>(null);\n  const devicesRef = useRef<Device[]>(initialCache?.devices ?? []);\n  const backendRef = useRef<string | null>(null);\n\n  const setDevices = useCallback((updater: (prev: Device[]) => Device[]) => {\n    setDevicesState((prev) => {\n      const next = updater(prev);\n      devicesRef.current = next;\n      return next;\n    });\n  }, []);\n\n  const fetchDevices = useCallback(async (opts?: { showLoader?: boolean }) => {\n    const showLoader = opts?.showLoader ?? devicesRef.current.length === 0;\n    try {\n      if (showLoader) {\n        setStatus('loading');\n      }\n      const result = await deviceApi.getDevices(backendUrl, scopeId);\n      setDevices(() => result);\n      setStatus('success');\n      setError(null);\n      setLastUpdated(Date.now());\n      writeDeviceCache(scopeId, result);\n    } catch (err) {\n      const typed = err instanceof Error ? err : new Error('Failed to load devices');\n      setError(typed);\n      if (devicesRef.current.length === 0) {\n        setStatus('error');\n      } else {\n        setStatus('success');\n      }\n    }\n  }, [backendUrl, scopeId]);\n\n  const applyDevicePatch = useCallback(\n    (deviceId: string, patch: Partial<Device>) => {\n      if (!deviceId) {\n        return;\n      }\n      setDevices((prev) => {\n        let found = false;\n        const next = prev.map((device) => {\n          if (device.id === deviceId) {\n            found = true;\n            return { ...device, ...patch };\n          }\n          return device;\n        });\n        if (!found) {\n          next.push({\n            id: deviceId,\n            model: patch.model || 'Unknown device',\n            ...patch,\n          } as Device);\n        }\n        return next;\n      });\n    },\n    [setDevices]\n  );\n\n  useEffect(() => {\n    fetchDevices({ showLoader: devicesRef.current.length === 0 });\n\n    if (!autoRefresh || pollMs <= 0) {\n      return undefined;\n    }\n\n    pollRef.current = setInterval(fetchDevices, pollMs);\n\n    return () => {\n      if (pollRef.current) {\n        clearInterval(pollRef.current);\n      }\n    };\n  }, [fetchDevices, autoRefresh, pollMs]);\n\n  useEffect(() => {\n    if (!backendUrl) {\n      backendRef.current = null;\n      return;\n    }\n\n    const resolved = resolveBaseUrl(backendUrl);\n    backendRef.current = resolved;\n    webSocketService.connectDevices(resolved);\n    deviceSocketRefs += 1;\n\n    const unsubscribe = webSocketService.subscribeToDeviceUpdates((update: DeviceStatusUpdate) => {\n      applyDevicePatch(update.device_id, {\n        status: update.status,\n        last_seen: update.last_seen ?? update.timestamp,\n      });\n    });\n\n    return () => {\n      unsubscribe();\n      deviceSocketRefs = Math.max(0, deviceSocketRefs - 1);\n      if (deviceSocketRefs === 0) {\n        webSocketService.disconnectDevices();\n      }\n    };\n  }, [backendUrl, applyDevicePatch]);\n\n  const memoisedDevices = useMemo(() => devices, [devices]);\n\n  return {\n    devices: memoisedDevices,\n    status,\n    error,\n    refresh: () => fetchDevices({ showLoader: true }),\n    isEmpty: memoisedDevices.length === 0,\n    lastUpdated,\n    applyDevicePatch,\n  };\n};\n","export const DEFAULT_API_BASE_URL = 'http://localhost:8007';\n\nexport const resolveBaseUrl = (baseUrl?: string): string => {\n  const resolved = baseUrl && baseUrl.trim().length > 0 ? baseUrl : DEFAULT_API_BASE_URL;\n  return resolved.endsWith('/') ? resolved.slice(0, -1) : resolved;\n};\n\n"],"names":["DEVICE_METADATA_STORAGE_KEY","DEVICE_METADATA_EVENT","defaultChecklist","id","label","done","normalizeDeviceMetadata","meta","alias","tags","Array","isArray","filter","tag","map","trim","length","notes","pinned","Boolean","checklist","item","existing","find","entry","_objectSpread","DEFAULT_DEVICE_METADATA","readDeviceMetadata","window","localStorage","raw","getItem","parsed","JSON","parse","next","Object","entries","forEach","_ref","deviceId","error","console","warn","writeDeviceMetadata","metadata","setItem","stringify","dispatchEvent","Event","readDeviceAliasMap","aliasMap","_ref2","_meta$alias","SELECTED_DEVICES_STORAGE_KEY","LEGACY_SELECTED_DEVICE_KEY","SELECTED_DEVICES_EVENT","normalizeIds","value","_unused","trimmed","readSelectedDeviceIds","stored","ids","from","Set","legacy","legacyIds","writeSelectedDeviceIds","removeItem","uniqueIds","CustomEvent","detail","toggleSelectedDeviceId","set","has","delete","add","DEVICE_REGISTRY_STORAGE_KEY","DEVICE_REGISTRY_EVENT","readRegistryInternal","persistRegistry","registry","readDeviceRegistry","syncDevicesToRegistry","devices","changed","now","Date","toISOString","device","_existing$firstSeen","model","connectionType","connection_type","lastStatus","status","firstSeen","lastSeen","entriesEqual","a","b","telemetry","track","event","payload","_window$electronAPI","electronAPI","trackEvent","sendViaNavigator","navigator","sendBeacon","blob","Blob","ts","type","debug","DISCONNECTED_DEVICES_STORAGE_KEY","ACTIVITY_CLEAR_THRESHOLD_STORAGE_KEY","tokens","radius","spacing","card","padding","elevation","colors","bg","panel","text","subtext","primary","success","warning","danger","border","mutedBorder","accent","shadows","cardHover","cardBaseSx","backgroundColor","concat","borderRadius","boxShadow","transition","hoverableCardSx","transform","sectionTitleSx","fontSize","lineHeight","fontWeight","color","buildLocalSearchResults","query","arguments","undefined","normalized","toLowerCase","results","matchedDevices","network_operator","network_technology","String","some","token","includes","slice","_device$status","baseLabel","statusLabel","href","push","_aliasEditor$value","backendUrl","refresh","useDevices","pollMs","searchQuery","setSearchQuery","useState","navigate","useNavigate","location","useLocation","disconnectedDevices","setDisconnectedDevices","readStoredDisconnectedDevices","selectedDeviceDetails","setSelectedDeviceDetails","showDeviceDetails","setShowDeviceDetails","workflows","setWorkflows","getStoredWorkflows","selectedDeviceIds","setSelectedDeviceIds","searchResults","setSearchResults","searchLoading","setSearchLoading","showSearchResults","setShowSearchResults","activityItems","setActivityItems","activityLoading","setActivityLoading","activityPage","setActivityPage","activityViewAll","setActivityViewAll","activityClearThreshold","setActivityClearThreshold","readActivityClearThreshold","Number","isFinite","setupDialogOpen","setSetupDialogOpen","aboutDialogOpen","setAboutDialogOpen","deviceSetupLoading","setDeviceSetupLoading","snackbar","setSnackbar","refreshingDevices","setRefreshingDevices","historyVersion","setHistoryVersion","appMenuAnchor","setAppMenuAnchor","deviceAliases","setDeviceAliases","aliasEditor","setAliasEditor","aliasSaving","setAliasSaving","useEffect","scopeId","size","values","persistDisconnectedDevices","syncAliases","handleStorage","key","addEventListener","removeEventListener","handleStorageChange","_unused2","parseDisconnectedDevicesValue","newValue","searchTimeoutRef","useRef","searchAbortRef","searchContainerRef","lastSearchTrackedRef","normalizedBackendUrl","useMemo","resolveBaseUrl","deviceWorkflowHistories","getAllDeviceWorkflowHistories","recordSearchTelemetry","useCallback","_results$0$type","_results$","current","queryLength","resultTypeTop","updateSelectedDeviceIds","updater","prev","join","persistAliasForDevice","aliasValue","_metadata$deviceId","nextMetadata","syncWorkflows","WORKFLOWS_STORAGE_EVENT","handler","custom","handleHistoryUpdate","DEVICE_HISTORY_EVENT","buildLocalActivityItems","_ref4","history","run","index","executedAt","activityId","icon","title","workflowName","formatRelativeTime","workflow","lastRunAt","name","sort","aTime","getTime","controller","AbortController","fetchRecentActivity","async","response","fetch","signal","ok","Error","data","json","items","_item$ts","_item$id","_item$icon","_item$title","_item$meta","aborted","fetchExecutionActivity","executions","iconForStatus","execution","_execution$status","_execution$flow","_execution$flow2","_ref3","_execution$execution_","state","flowName","flow_name","flow","flow_id","devicePart","device_id","updated_at","end_time","start_time","created_at","execution_id","mapExecutionActivityItems","nextItems","_nextItems","filteredItems","threshold","timestamp","isNaN","limitedItems","filterActivitiesByThreshold","loadActivities","abort","maxPage","Math","max","ceil","handleClickAway","contains","target","document","clearTimeout","localResults","setTimeout","encodeURIComponent","deviceResults","_item$type","err","normalizeStatus","connectedStatuses","idleStatuses","sanitizeOperatorValue","startsWith","firstSegment","split","resolveOperatorLabel","_device$sim_info","candidates","carrier","sim_info","candidate","sanitized","formatNetworkTechnology","lte","gsm","gprs","edge","evdo","evdo0","evdoa","evdob","e_hrpd","umts","wcdma","hspa","hsupa","hsupa_","hsdpa","hspap","tdscdma","nr","toUpperCase","test","activityTotalPages","pages","displayedActivityItems","start","canGoPrevActivity","canGoNextActivity","activityPageStart","activityPageEnd","min","activityPageCount","visibleDevices","normalizedStatusValue","setupCandidates","normalizedSearch","filteredDevices","_deviceAliases$device","_deviceAliases$device2","_device$model","_device$id","readyDevices","readyDeviceIds","selectedDeviceIdsSet","visibleDeviceIds","allVisibleSelected","every","partiallySelected","activeDevicesCount","totalVisibleDevices","workflowsActiveCount","runCount","workflowsDraftCount","workflowExecutionCount","reduce","total","readySet","filteredSelection","removedCount","severity","message","autoId","handleShowDetails","handleCloseAppMenu","handleAppMenuSelect","action","faq","updates","manual","open","describeSetupRequirements","reasons","developer_mode_enabled","usb_debugging_enabled","statusHints","raw_status","raw_adb_status","adb_status","handleManualRefresh","readings","level","round","numeric","parseInt","replace","parseBatteryLevel","battery_level","average","count","lowest","origin","deviceCount","deviceApi","scanDevices","date","seconds","floor","minutes","hours","days","weeks","renderActivityIcon","_jsx","CheckCircle","AlertTriangle","RefreshCw","Wifi","quickActions","Play","active","path","GitBranch","Puzzle","openAliasEditor","_deviceAliases$device3","handleAliasDialogClose","handleAliasSave","handleAliasInputChange","_jsxs","Box","sx","display","minHeight","fontFamily","children","width","background","flexDirection","position","top","height","mb","pb","borderBottom","Typography","variant","flex","Grid3X3","Zap","Smartphone","isActive","pathname","onClick","alignItems","gap","cursor","textAlign","mt","Chip","IconButton","currentTarget","Info","Menu","anchorEl","onClose","anchorOrigin","vertical","horizontal","transformOrigin","MenuItem","maxWidth","margin","justifyContent","placeItems","letterSpacing","ref","TextField","placeholder","onChange","e","onFocus","borderColor","InputProps","startAdornment","InputAdornment","Search","Paper","left","right","overflow","zIndex","maxHeight","onMouseDown","preventDefault","CircularProgress","handleSearchResultClick","Button","startIcon","disabled","textTransform","handleAddDevicesClick","requiresSetup","gridTemplateColumns","Card","CardContent","Checkbox","checked","indeterminate","handleToggleSelectAllVisible","visibleSet","nextSet","py","style","marginBottom","_deviceAliases$device4","isSelected","isDisconnected","requires_setup","canSelect","deviceAlias","primaryName","secondaryLabel","toString","statusColor","p","opacity","Tooltip","handleToggleDeviceSelection","CheckSquare","Square","ml","Pencil","flexWrap","Signal","wordBreak","serial","catch","disconnectDevice","handleDisconnect","Stack","direction","handleViewAllActivity","handleClearActivity","clearedAt","persistActivityClearThreshold","clearDeviceWorkflowHistory","List","ListItem","activity","iconColor","toLocaleString","ListItemIcon","minWidth","ListItemText","secondary","_Fragment","handlePrevActivityPage","ChevronLeft","handleNextActivityPage","ChevronRight","Dialog","fullWidth","DialogTitle","DialogContent","dividers","configureDevice","handleConfigureDevice","DialogActions","autoFocus","helperText","android_version","os_version","endsWith","formatBatteryLevel","gridColumn","numericDate","formatLastSeen","last_seen","borderTop","dense","pl","authHeaders","resolveApiKey","envKey","process","REACT_APP_API_KEY","API_KEY","normalizeDevices","extractDevices","rawStatus","rawAdbStatus","normalizedStatus","normalizedAdbStatus","developerModeFlag","usbDebuggingFlag","backendRequiresSetup","getDevices","baseUrl","resolvedBase","url","URL","searchParams","headers","statusText","fallbackError","method","refreshDevice","captureScreenshot","testDevice","rebootDevice","downloadDeviceReport","opts","to","match","get","filename","link","createElement","objectUrl","createObjectURL","download","body","appendChild","click","removeChild","revokeObjectURL","CACHE_KEY","safeParse","writeStore","store","getScopeKey","webSocketService","constructor","executionSocket","devicesSocket","listeners","Map","connectionListeners","pendingDeviceSubscriptions","toWs","baseHttpUrl","connectExecution","executionId","this","wsUrl","readyState","WebSocket","onopen","log","notifyConnection","onclose","onerror","onmessage","ev","msg","handleMessage","disconnectExecution","close","connectDevices","sendDeviceSubscription","disconnectDevices","disconnectAll","clear","typeListeners","callback","generalListeners","subscribe","messageType","subscribeToDeviceUpdates","subscribeToExecutionProgress","subscribeToStepCompletion","subscribeToLogs","subscribeToAll","subscribeToDevice","unsubscribeFromDevice","OPEN","send","startLivePreview","quality","stopLivePreview","isConnected","_this$executionSocket","_this$executionSocket2","_this$devicesSocket","_this$devicesSocket2","execOpen","devOpen","getConnectionState","subscribeConnectionStatus","cb","deviceSocketRefs","_initialCache$devices","_initialCache$timesta","_initialCache$devices2","options","autoRefresh","initialCache","scoped","readDeviceCache","setDevicesState","setStatus","lastUpdated","setLastUpdated","setError","pollRef","devicesRef","backendRef","setDevices","fetchDevices","_opts$showLoader","showLoader","result","writeDeviceCache","typed","applyDevicePatch","patch","found","setInterval","clearInterval","resolved","unsubscribe","update","_update$last_seen","memoisedDevices","isEmpty"],"sourceRoot":""}